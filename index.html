<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>KALNET ERP - Inventory Control</title>
    
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..800&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#1f96ad",
                        "primary-dark": "#167a8c",
                        "primary-hover": "#166f82",
                    },
                    fontFamily: {
                        "sans": ["Inter", "sans-serif"],
                    }
                },
            },
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .view-section {
            display: none;
            height: 100%;
            flex-direction: column;
            overflow: hidden;
            animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .view-section.active { display: flex; }
        
        /* Routing Styles */
        [data-route] { cursor: pointer; }
        [data-route]:hover { text-decoration: underline; opacity: 0.8; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 3px; }
        
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        .icon-filled { font-variation-settings: 'FILL' 1; }
        
        /* Active states for sidebar links */
        .sidebar-sublink-active {
            background-color: rgba(31, 150, 173, 0.1) !important;
            color: #1f96ad !important;
            font-weight: 600 !important;
            border-left: 3px solid #1f96ad !important;
            padding-left: 0.625rem !important;
        }
        
        .sidebar-sublink-active:hover {
            background-color: rgba(31, 150, 173, 0.15) !important;
        }

        #mobile-sidebar { transition: transform 0.3s ease-in-out; }
        
        /* Ensure nav buttons maintain consistency */
        .sidebar-sublink {
            cursor: pointer;
            display: block;
            width: 100%;
            text-align: left;
            border: none;
            background: transparent;
            padding: 0.5rem 0.75rem;
        }
        
        .sidebar-sublink:not(.sidebar-sublink-active) {
            border-left: 3px solid transparent;
            padding-left: 0.75rem;
        }
        
        /* Professional styling improvements */
        button { transition: all 0.2s ease; }
        button:active { transform: scale(0.98); }
        
        /* Focus states for accessibility */
        button:focus, input:focus, select:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(31, 150, 173, 0.1);
        }
        
        /* Improved table styling */
        table tbody tr {
            border-bottom: 1px solid #e2e8f0;
            transition: background-color 0.15s ease;
        }
        
        /* KALNET-style shadows for cards */
        .shadow-sm {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.04), 0 1px 2px -1px rgba(0, 0, 0, 0.04);
        }
        
        .shadow-md {
            box-shadow: 0 4px 12px -2px rgba(0, 0, 0, 0.08), 0 2px 6px -2px rgba(0, 0, 0, 0.04);
        }
        
        /* KALNET-style card hover effects */
        .bg-white {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Card hover - lift effect like kalnet.co */
        .rounded-xl.border:hover, 
        .rounded-lg.border:hover {
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 10px -5px rgba(0, 0, 0, 0.04);
            transform: translateY(-2px);
        }
        
        /* Clickable card hover effect */
        .cursor-pointer.rounded-xl:hover,
        .cursor-pointer.rounded-lg:hover,
        div[onclick].rounded-xl:hover,
        div[onclick].rounded-lg:hover {
            box-shadow: 0 12px 30px -8px rgba(31, 150, 173, 0.15), 0 4px 12px -4px rgba(0, 0, 0, 0.06);
            border-color: rgba(31, 150, 173, 0.4) !important;
            transform: translateY(-3px);
        }
        
        /* Professional UI polish */
        h1, h2, h3, h4, h5, h6 {
            letter-spacing: -0.02em;
        }
        
        .font-bold {
            font-weight: 600;
        }
        
        /* KALNET-style primary button styling */
        button.bg-primary {
            background: linear-gradient(135deg, #1f96ad 0%, #1a8499 100%);
            box-shadow: 0 4px 14px -2px rgba(31, 150, 173, 0.35);
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        button.bg-primary:hover {
            background: linear-gradient(135deg, #1a8499 0%, #157080 100%);
            box-shadow: 0 6px 20px -2px rgba(31, 150, 173, 0.45);
            transform: translateY(-1px);
        }
        
        button.bg-primary:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px -2px rgba(31, 150, 173, 0.35);
        }
        
        /* Secondary button hover */
        button.border:hover {
            box-shadow: 0 4px 12px -3px rgba(0, 0, 0, 0.1);
            transform: translateY(-1px);
        }
        
        /* Improved border radius for consistency */
        input, select, textarea, button {
            border-radius: 0.5rem;
        }
        
        /* Table header styling */
        thead {
            font-weight: 600;
            letter-spacing: 0.05em;
        }
        
        /* Badge styling improvements */
        [class*="bg-"] {
            transition: all 0.2s ease;
        }
        
        /* KALNET-style stat cards */
        .p-5.rounded-xl.border {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .p-5.rounded-xl.border:hover {
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.08);
        }
        
        /* Smooth link transitions */
        a, button {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* KALNET-style input focus */
        input:focus, select:focus, textarea:focus {
            border-color: #1f96ad;
            box-shadow: 0 0 0 3px rgba(31, 150, 173, 0.12);
        }
        
        /* Table row hover - subtle background */
        table tbody tr:hover {
            background-color: rgba(31, 150, 173, 0.04);
        }
        
        /* Modal backdrop blur like kalnet.co */
        .fixed.inset-0.z-50 > .absolute.inset-0.bg-black\/50 {
            backdrop-filter: blur(4px);
        }
        
        /* Improved breadcrumb styling */
        .breadcrumb {
            display: flex;
            align-items: center;
            font-size: 0.875rem;
            gap: 0.5rem;
        }
                /* ===== DARK MODE STYLES ===== */
        .dark body {
            background-color: #0d1117;
            color: #e3e6eb;
        }

        /* Dark mode - Sidebar */
        .dark aside {
            background: linear-gradient(180deg, #161b22 0%, #0d1117 100%);
            border-right-color: rgba(255,255,255,0.08);
        }

        /* Dark mode - Header */
        .dark header {
            background-color: #161b22;
            border-bottom-color: #30363d;
        }

        /* Dark mode - Main content areas */
        .dark .bg-white {
            background-color: #161b22;
        }
        
        .dark .bg-slate-50 {
            background-color: #0d1117;
        }
        
        .dark .bg-slate-100 {
            background-color: #161b22;
        }

        /* Dark mode - Text colors */
        .dark .text-slate-900 {
            color: #e3e6eb;
        }
        
        .dark .text-slate-800 {
            color: #d1d9e0;
        }
        
        .dark .text-slate-700 {
            color: #a8b4bf;
        }
        
        .dark .text-slate-600 {
            color: #8b949e;
        }
        
        .dark .text-slate-500 {
            color: #6e7681;
        }

        /* Dark mode - Borders */
        .dark .border-slate-200 {
            border-color: #30363d;
        }
        
        .dark .border-slate-300 {
            border-color: #444c56;
        }

        .dark .divide-slate-100 > * {
            border-color: #30363d;
        }

        /* Dark mode - Buttons */
        .dark button.bg-white {
            background-color: #161b22;
            border-color: #30363d;
            color: #c9d1d9;
        }

        .dark button.bg-white:hover {
            background-color: #21262d;
            border-color: #444c56;
        }

        /* Dark mode - Input fields */
        .dark input[type="text"],
        .dark input[type="date"],
        .dark input[type="number"],
        .dark input[type="email"],
        .dark select,
        .dark textarea {
            background-color: #0d1117;
            border-color: #30363d;
            color: #c9d1d9;
        }

        .dark input::placeholder {
            color: #6e7681;
        }

        /* Dark mode - Tables */
        .dark table thead {
            background-color: #0d1117;
            color: #8b949e;
        }

        .dark table tbody tr:hover {
            background-color: #161b22;
        }

        /* Dark mode - Cards & Panels */
        .dark .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.4);
        }

        .dark .shadow-md {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
        }

        /* Dark mode - Status badges keep their colors */
        .dark .bg-emerald-50,
        .dark .bg-blue-50,
        .dark .bg-red-50,
        .dark .bg-orange-50,
        .dark .bg-yellow-50,
        .dark .bg-purple-50 {
            opacity: 0.95;
        }
        
        /* Dark mode - Colored table rows */
        .dark .bg-yellow-50 {
            background-color: rgba(234, 179, 8, 0.18) !important;
        }

        .dark .bg-orange-50 {
            background-color: rgba(249, 115, 22, 0.18) !important;
        }

        .dark .bg-blue-50 {
            background-color: rgba(59, 130, 246, 0.18) !important;
        }

        .dark .bg-red-50 {
            background-color: rgba(239, 68, 68, 0.18) !important;
        }

        .dark .bg-pink-50 {
            background-color: rgba(236, 72, 153, 0.18) !important;
        }

        .dark .bg-green-50 {
            background-color: rgba(34, 197, 94, 0.18) !important;
        }

        .dark .bg-purple-50 {
            background-color: rgba(168, 85, 247, 0.18) !important;
        }

        .dark .bg-emerald-50 {
            background-color: rgba(16, 185, 129, 0.18) !important;
        }

        .dark .bg-indigo-50 {
            background-color: rgba(99, 102, 241, 0.18) !important;
        }

        /* Dark mode - Fix for alternating row colors in tables */
        .dark tbody tr.bg-yellow-50:hover,
        .dark tbody tr.bg-orange-50:hover,
        .dark tbody tr.bg-blue-50:hover,
        .dark tbody tr.bg-red-50:hover,
        .dark tbody tr.bg-pink-50:hover,
        .dark tbody tr.bg-green-50:hover {
            filter: brightness(1.15);
        }

        /* Dark mode - Opacity rows (like inactive items) */
        .dark .opacity-50 {
            opacity: 0.4;
        }

        /* Dark mode - Fix for colored text in light backgrounds */
        .dark .text-yellow-700 {
            color: #e3b341 !important;
        }

        .dark .text-orange-700 {
            color: #f76808 !important;
        }

        .dark .text-orange-600 {
            color: #f76808 !important;
        }

        .dark .text-blue-700 {
            color: #58a6ff !important;
        }

        .dark .text-red-700 {
            color: #f85149 !important;
        }

        .dark .text-red-600 {
            color: #f85149 !important;
        }

        .dark .text-emerald-700 {
            color: #3fb950 !important;
        }

        .dark .text-emerald-600 {
            color: #3fb950 !important;
        }

        .dark .text-purple-700 {
            color: #bc8ef9 !important;
        }

        .dark .text-slate-400 {
            color: #8b949e !important;
        }

        .dark .text-slate-600 {
            color: #8b949e !important;
        }

        /* Dark mode - Scrollbar */
        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #30363d;
        }

        /* Dark mode - Hover states */
        .dark .hover\:bg-slate-50:hover {
            background-color: #161b22 !important;
        }

        .dark .hover\:bg-slate-100:hover {
            background-color: #21262d !important;
        }

        /* Dark mode transition */
        body {
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        /* Dark mode link colors */
        .dark a, .dark .text-primary {
            color: #58a6ff;
        }
        
        .dark a:hover {
            color: #79c0ff;
        }
        
        /* Dark mode specific button text colors */
        .dark .text-slate-700,
        .dark .text-slate-800,
        .dark .text-slate-900 {
            color: #c9d1d9;
        }
        
        /* Dark mode badge and label colors */
        .dark .bg-slate-100,
        .dark .bg-slate-200 {
            background-color: #21262d;
            border-color: #30363d;
        }
        
        /* Professional dark mode header styling */
        .dark .bg-slate-50 {
            background-color: #0d1117;
            border-color: #30363d;
        }
        
        /* Dark mode focus ring */
        .dark input:focus,
        .dark select:focus,
        .dark textarea:focus {
            border-color: #58a6ff;
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.15);
        }
        
        /* Dark mode professional button styling */
        .dark button.bg-primary {
            background: linear-gradient(135deg, #1f96ad 0%, #167a8c 100%);
            box-shadow: 0 2px 4px rgba(31, 150, 173, 0.3);
        }
        
        .dark button.bg-primary:hover {
            background: linear-gradient(135deg, #167a8c 0%, #0f5a6b 100%);
            box-shadow: 0 4px 8px rgba(31, 150, 173, 0.4);
        }
        
        .dark .text-primary {
            color: #58a6ff;
        }
        
        .dark .bg-primary {
            background-color: #0d47a1;
            opacity: 0.9;
        }
        
        .dark .border-primary {
            border-color: #58a6ff;
        }

    </style>
</head>

<body class="bg-slate-50 text-slate-900 h-screen flex overflow-hidden">

    <div id="mobile-overlay" class="fixed inset-0 bg-black/50 z-30 hidden lg:hidden" onclick="toggleSidebar()"></div>

    <!-- SIDEBAR -->
    <aside id="mobile-sidebar" class="fixed inset-y-0 left-0 w-[280px] bg-white border-r border-slate-200 z-40 transform -translate-x-full lg:translate-x-0 flex flex-col h-full transition-transform duration-300">
        <div class="h-16 flex items-center gap-3 px-6 border-b border-slate-200">
            <div class="size-9 rounded-lg bg-primary flex items-center justify-center text-white font-bold text-lg">K</div>
            <div class="flex flex-col">
                <span class="font-bold text-base tracking-tight leading-none text-slate-900">KALNET</span>
                <span class="text-[10px] font-medium text-slate-500 uppercase tracking-wider mt-0.5">ERP Core</span>
            </div>
        </div>

        <nav class="flex-1 overflow-y-auto custom-scrollbar py-4 px-3 space-y-1">
            <button id="nav-dashboard" onclick="navigateTo('dashboard')" class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">dashboard</span>
                Dashboard
            </button>
            
            <div class="px-3 pt-5 pb-2">
                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Modules</p>
            </div>

            <button class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">shopping_cart</span>
                Order Management
            </button>
<button id="nav-inventory-main" onclick="toggleInventoryMenu()" class="w-full flex items-center justify-between gap-3 px-3 py-2.5 text-sm font-bold text-primary bg-primary/10 rounded-lg transition-colors">
    <div class="flex items-center gap-3">
        <span class="material-symbols-outlined text-[20px] icon-filled">inventory_2</span>
        Inventory Control
    </div>
    <span id="inventory-menu-arrow" class="material-symbols-outlined text-[18px] transition-transform rotate-180">expand_more</span>
</button>


            <div id="inventory-submenu" class="pl-4 mt-1 border-l-2 border-slate-100 ml-4 mb-2 flex flex-col gap-0.5">
                    <button id="nav-overview" onclick="navigateTo('overview')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Overview</button>
                    <button id="nav-stock-tracker" onclick="navigateTo('stock-tracker')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Stock Tracker</button>
                    <button id="nav-items" onclick="navigateTo('items')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Items</button>
                    <button id="nav-ledger" onclick="navigateTo('ledger')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Ledger</button>
                    <button id="nav-reservations" onclick="navigateTo('reservations')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Reservations</button>
                    <button id="nav-discrepancies" onclick="navigateTo('discrepancies')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Discrepancies</button>
                    <button id="nav-adjustments" onclick="navigateTo('adjustments')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Adjustments</button>
                    <button id="nav-transfers" onclick="navigateTo('transfers')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Transfers</button>
                    <button id="nav-receiving" onclick="navigateTo('receiving')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Receiving (GRN)</button>
                    <button id="nav-putaway-rules" onclick="navigateTo('putaway-rules')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Putaway Rules</button>
                    <button id="nav-picking" onclick="navigateTo('picking')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Picking & Dispatch</button>
                    <button id="nav-cycle-counts" onclick="navigateTo('cycle-counts')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Cycle Counts</button>

            </div>

            <!-- Production Planning Module (Expandable) -->
            <button id="nav-production-main" onclick="toggleProductionMenu()" class="w-full flex items-center justify-between gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <div class="flex items-center gap-3">
                    <span class="material-symbols-outlined text-[20px]">precision_manufacturing</span>
                    Production Planning
                </div>
                <span id="production-menu-arrow" class="material-symbols-outlined text-[18px] transition-transform">expand_more</span>
            </button>

            <div id="production-submenu" class="pl-4 mt-1 border-l-2 border-slate-100 ml-4 mb-2 flex flex-col gap-0.5 hidden">
                <button id="nav-pp-overview" onclick="navigateTo('pp-overview')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Overview</button>
                <button id="nav-pp-planning" onclick="navigateTo('pp-planning')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Planning</button>
                <button id="nav-pp-capacity" onclick="navigateTo('pp-capacity')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Capacity</button>
                <button id="nav-pp-materials" onclick="navigateTo('pp-materials')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Materials & MRP</button>
                <button id="nav-pp-work-orders" onclick="navigateTo('pp-work-orders')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Work Orders</button>
                <button id="nav-pp-shopfloor" onclick="navigateTo('pp-shopfloor')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Shopfloor</button>
                <button id="nav-pp-quality" onclick="navigateTo('pp-quality')" class="sidebar-sublink text-left text-xs font-medium text-slate-500 hover:text-primary py-2 pl-3 rounded-r hover:bg-slate-50 transition-colors">Quality</button>
            </div>

            <button class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">trending_up</span>
                Demand Forecasting
            </button>

            <button class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">bar_chart</span>
                Business Intelligence
            </button>

            <button class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">folder</span>
                Doc Management
            </button>

            <div class="px-3 pt-5 pb-2">
                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">System</p>
            </div>
            
            <button onclick="navigateTo('warehouses')" class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">database</span>
                Masters
            </button>

            <button class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">route</span>
                Workflows
            </button>

            <button class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">description</span>
                Reports
            </button>

            <button onclick="navigateTo('policy-config')" class="w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded-lg group transition-colors">
                <span class="material-symbols-outlined text-[20px]">settings</span>
                Settings
            </button>
        </nav>

        <div class="p-4 border-t border-slate-200">
            <div class="flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50 cursor-pointer">
                <div class="size-9 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-sm">AM</div>
                <div class="flex flex-col overflow-hidden">
                    <span class="text-sm font-bold truncate">Alex Morgan</span>
                    <span class="text-xs text-slate-500 truncate">System Admin</span>
                </div>
            </div>
        </div>
    </aside>

        <div class="flex-1 flex flex-col min-w-0 h-full relative lg:ml-[280px]">

        
        <!-- HEADER -->
        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-8 shrink-0 z-10">
            <div class="flex items-center gap-4">
                <button onclick="toggleSidebar()" class="lg:hidden p-2 text-slate-500 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">menu</span>
                </button>
                <div class="hidden md:flex items-center text-sm text-slate-500">
                    <span>ERP Core</span>
                    <span class="material-symbols-outlined text-[16px] mx-2 text-slate-300">chevron_right</span>
                    <span>Modules</span>
                    <span class="material-symbols-outlined text-[16px] mx-2 text-slate-300">chevron_right</span>
                    <span class="font-semibold text-slate-900" id="page-title">Inventory Control</span>
                </div>
            </div>

            <div class="flex items-center gap-3">
                <div class="relative hidden md:block">
                    <input type="text" placeholder="Search ERP..." class="w-64 h-9 pl-9 pr-3 text-sm bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary placeholder:text-slate-400"/>
                    <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                </div>
                <button class="flex items-center gap-2 px-3 py-1.5 bg-slate-100 rounded-full text-xs font-semibold text-slate-700 hover:bg-slate-200 transition-colors">
                    <span class="w-2 h-2 rounded-full bg-green-500"></span>
                    Singapore HQ
                </button>
                <div class="h-6 w-px bg-slate-200 mx-1"></div>
                <button class="p-2 text-slate-500 hover:text-primary rounded-full hover:bg-slate-50 md:hidden">
                    <span class="material-symbols-outlined text-[20px]">search</span>
                </button>
                <button class="p-2 text-slate-500 hover:text-primary rounded-full hover:bg-slate-50 relative">
                    <span class="material-symbols-outlined text-[20px]">notifications</span>
                    <span class="absolute top-2 right-2 size-2 bg-red-500 rounded-full border border-white"></span>
                </button>
                <button class="p-2 text-slate-500 hover:text-primary rounded-full hover:bg-slate-50">
                    <span class="material-symbols-outlined text-[20px]">help</span>
                </button>
                <button onclick="toggleDarkMode()" id="dark-mode-toggle" class="p-2 text-slate-500 hover:text-primary rounded-full hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-800">
    <span class="material-symbols-outlined text-[20px]">dark_mode</span>
</button>

            </div>
        </header>

        <main id="app-container" class="flex-1 overflow-hidden relative bg-slate-50">
            <!-- SCREEN 1: Inventory Overview -->
            <div id="overview" class="view-section active">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex flex-col md:flex-row md:items-end justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900 tracking-tight">Inventory Overview</h2>
                                <p class="text-slate-500 text-sm mt-1">Real-time stock, warehousing, and replenishment.</p>
                            </div>
                            <div class="flex items-center gap-3 flex-wrap">
                                <button onclick="showCreateTransferModal()" class="flex items-center justify-center h-10 px-4 bg-white border border-slate-200 rounded-lg text-slate-700 text-sm font-semibold shadow-sm hover:bg-slate-50 transition-all gap-2">
                                    <span class="material-symbols-outlined text-[20px]">sync_alt</span>
                                    <span>Create Transfer</span>
                                </button>
                                <button onclick="showReorderAutomationModal()" class="flex items-center justify-center h-10 px-4 bg-white border border-slate-200 rounded-lg text-slate-700 text-sm font-semibold shadow-sm hover:bg-slate-50 transition-all gap-2">
                                    <span class="material-symbols-outlined text-[20px]">autorenew</span>
                                    <span>Reorder Automation</span>
                                </button>
                                <button onclick="showUpdateStockModal()" class="flex items-center justify-center h-10 px-4 bg-primary text-white rounded-lg text-sm font-bold shadow-md hover:bg-primary-hover transition-all gap-2">
                                    <span>Update Stock</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4">
                            <div onclick="navigateTo('stock-tracker')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">On Hand</span>
                                    <span class="material-symbols-outlined text-slate-300">inventory_2</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-slate-900">142,030</div>
                                    <div class="flex items-center gap-1 mt-1.5 text-xs font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded w-fit">
                                        <span class="material-symbols-outlined text-[14px]">trending_up</span> 2.4%
                                    </div>
                                </div>
                            </div>

                            <div onclick="navigateTo('stock-tracker')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Available</span>
                                    <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-emerald-600">118,500</div>
                                    <div class="text-xs text-slate-500 mt-1.5">83% of Total Stock</div>
                                </div>
                            </div>

                            <div onclick="navigateTo('reservations')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Reserved</span>
                                    <span class="material-symbols-outlined text-slate-300">lock</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-slate-900">23,530</div>
                                    <div class="flex items-center gap-1 mt-1.5 text-xs font-bold text-orange-600 bg-orange-50 px-2 py-0.5 rounded w-fit">
                                        <span class="material-symbols-outlined text-[14px]">trending_up</span> 12% spike
                                    </div>
                                </div>
                            </div>

                            <div onclick="navigateTo('transfers')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">In Transit</span>
                                    <span class="material-symbols-outlined text-slate-300">local_shipping</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-slate-900">8,200</div>
                                    <div class="text-xs text-slate-500 mt-1.5">Incoming 4 POs</div>
                                </div>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">QC Hold</span>
                                    <span class="material-symbols-outlined text-slate-300">priority_high</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-slate-900">450</div>
                                    <div class="flex items-center gap-1 mt-1.5 text-xs font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded w-fit">
                                        <span class="material-symbols-outlined text-[14px]">warning</span> Action
                                    </div>
                                </div>
                            </div>

                            <div onclick="navigateTo('exceptions')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-red-500 border-l-4 border-l-red-500 transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Low Stock</span>
                                    <span class="material-symbols-outlined text-red-500">trending_down</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-slate-900">12 <span class="text-sm font-medium text-slate-400">SKUs</span></div>
                                    <div class="text-xs text-red-600 mt-1.5">Requires Reorder</div>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-base font-bold text-slate-900">Stock Health</h3>
                                    <button onclick="navigateTo('stock-tracker')" class="text-sm text-primary font-semibold hover:underline">View Stock Tracker →</button>
                                </div>
                                <div class="h-64 flex items-center justify-center text-slate-400">
                                    <div class="text-center">
                                        <span class="material-symbols-outlined text-6xl mb-2">show_chart</span>
                                        <p class="text-sm">Inventory value vs Turnover Rate (Last 6 Months)</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-base font-bold text-slate-900">Alerts & Exceptions</h3>
                                    <button onclick="navigateTo('exceptions')" class="text-sm text-primary font-semibold hover:underline">View All →</button>
                                </div>
                                <div class="space-y-3">
                                    <div class="p-3 bg-red-50 rounded-lg border border-red-100 cursor-pointer hover:bg-red-100">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-red-500 text-[20px]">error</span>
                                            <div class="flex-1">
                                                <p class="text-xs font-bold text-red-900">SKU-9920 below safety stock</p>
                                                <p class="text-xs text-red-700 mt-0.5">Stock level at 5 units. Minimum required is 20.</p>
                                                <button onclick="navigateTo('reorder-automation')" class="text-xs text-red-700 font-bold hover:underline mt-1">Reorder Now</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="p-3 bg-orange-50 rounded-lg border border-orange-100 cursor-pointer hover:bg-orange-100">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-orange-500 text-[20px]">local_shipping</span>
                                            <div class="flex-1">
                                                <p class="text-xs font-bold text-orange-900">Shipment #4402 Delayed</p>
                                                <p class="text-xs text-orange-700 mt-0.5">Held at customs (ID). Updated ETA: Tomorrow.</p>
                                                <button onclick="showNotification('Opening shipment #4402 details...', 'info')" class="text-xs text-orange-700 font-bold hover:underline mt-1">View Shipment</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="p-3 bg-blue-50 rounded-lg border border-blue-100 cursor-pointer hover:bg-blue-100">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-blue-500 text-[20px]">sync_problem</span>
                                            <div class="flex-1">
                                                <p class="text-xs font-bold text-blue-900">Sync Error: Amazon FBA</p>
                                                <p class="text-xs text-blue-700 mt-0.5">Inventory count mismatch detected.</p>
                                                <button onclick="showNotification('Opening sync resolution wizard...', 'info')" class="text-xs text-blue-700 font-bold hover:underline mt-1">Resolve</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-base font-bold text-slate-900">Warehousing Snapshot</h3>
                                <button onclick="navigateTo('warehouses')" class="text-sm text-primary font-semibold hover:underline">Open Warehouses & Bins →</button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div onclick="navigateTo('warehouse-detail')" class="p-4 border border-slate-200 rounded-lg hover:border-primary cursor-pointer transition-colors">
                                    <div class="flex items-center justify-between mb-3">
                                        <span class="text-sm font-bold text-slate-900">Singapore HQ (WH-01)</span>
                                        <span class="text-xs font-bold text-primary bg-primary/10 px-2 py-1 rounded">82%</span>
                                    </div>
                                    <div class="w-full bg-slate-100 rounded-full h-2 mb-2">
                                        <div class="bg-primary h-2 rounded-full" style="width: 82%"></div>
                                    </div>
                                    <p class="text-xs text-slate-500">High utilization. Consider clearing Zone B.</p>
                                </div>

                                <div class="p-4 border border-slate-200 rounded-lg hover:border-primary cursor-pointer transition-colors">
                                    <div class="flex items-center justify-between mb-3">
                                        <span class="text-sm font-bold text-slate-900">Malaysia North (WH-02)</span>
                                        <span class="text-xs font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded">45%</span>
                                    </div>
                                    <div class="w-full bg-slate-100 rounded-full h-2 mb-2">
                                        <div class="bg-emerald-500 h-2 rounded-full" style="width: 45%"></div>
                                    </div>
                                    <p class="text-xs text-slate-500">Normal capacity levels.</p>
                                </div>

                                <div class="p-4 border border-slate-200 rounded-lg hover:border-primary cursor-pointer transition-colors">
                                    <div class="flex items-center justify-between mb-3">
                                        <span class="text-sm font-bold text-slate-900">Jakarta Hub (HUB-04)</span>
                                        <span class="text-xs font-bold text-red-600 bg-red-50 px-2 py-1 rounded">91%</span>
                                    </div>
                                    <div class="w-full bg-slate-100 rounded-full h-2 mb-2">
                                        <div class="bg-red-500 h-2 rounded-full" style="width: 91%"></div>
                                    </div>
                                    <p class="text-xs text-red-600">⚠ Approaching Capacity</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-base font-bold text-slate-900">Reorder Suggestions</h3>
                                <button onclick="navigateTo('reorder-automation')" class="text-sm text-primary font-semibold hover:underline">View All →</button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left text-sm">
                                    <thead class="border-b border-slate-200">
                                        <tr>
                                            <th class="pb-3 font-bold text-slate-500 text-xs uppercase">SKU</th>
                                            <th class="pb-3 font-bold text-slate-500 text-xs uppercase">Available</th>
                                            <th class="pb-3 font-bold text-slate-500 text-xs uppercase text-right">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-100">
                                        <tr class="hover:bg-slate-50">
                                            <td class="py-3 font-medium text-slate-900">WCH-001</td>
                                            <td class="py-3 text-orange-600 font-bold">4</td>
                                            <td class="py-3 text-right">
                                                <button onclick="navigateTo('reorder-automation')" class="px-3 py-1 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">PO Draft</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-slate-50">
                                            <td class="py-3 font-medium text-slate-900">AUDIO-X2</td>
                                            <td class="py-3 text-orange-600 font-bold">12</td>
                                            <td class="py-3 text-right">
                                                <button onclick="navigateTo('reorder-automation')" class="px-3 py-1 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">PO Draft</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-slate-50">
                                            <td class="py-3 font-medium text-slate-900">NIKE-09</td>
                                            <td class="py-3 text-orange-600 font-bold">24</td>
                                            <td class="py-3 text-right">
                                                <button onclick="navigateTo('reorder-automation')" class="px-3 py-1 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">PO Draft</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

     <!-- SCREEN 2: Update Stock (Choice Screen) -->
<div id="update-stock" class="view-section">
    <div class="flex-1 overflow-y-auto p-8 custom-scrollbar">
        <div class="max-w-5xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">Update Stock</h2>
                <p class="text-slate-500">Choose a method to update inventory. Scanning is optional.</p>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8">
                <div class="flex items-start gap-3">
                    <span class="material-symbols-outlined text-blue-600 text-[24px]">settings</span>
                    <div class="flex-1">
                        <p class="text-sm font-bold text-blue-900 mb-1">Context Configuration</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-2">
                            <div>
                                <label class="text-xs font-bold text-blue-900 block mb-1">Target Warehouse *</label>
                                <select class="w-full px-3 py-2 text-sm border border-blue-200 rounded-lg bg-white">
                                    <option>Select facility...</option>
                                    <option>Singapore HQ (WH-01)</option>
                                    <option>Malaysia North (WH-02)</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-xs font-bold text-blue-900 block mb-1">Update Type *</label>
                                <select class="w-full px-3 py-2 text-sm border border-blue-200 rounded-lg bg-white">
                                    <option>Stock Adjustment</option>
                                    <option>Stock Receipt</option>
                                    <option>Stock Issue</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-xs font-bold text-blue-900 block mb-1">Reference / PO #</label>
                                <input type="text" placeholder="Optional" class="w-full px-3 py-2 text-sm border border-blue-200 rounded-lg bg-white"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <button onclick="navigateTo('upload-document')" class="p-8 border-2 border-slate-200 rounded-xl hover:border-primary hover:shadow-xl transition-all text-left group bg-white">
                    <div class="size-14 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <span class="material-symbols-outlined text-3xl">upload_file</span>
                    </div>
                    <h3 class="font-bold text-lg group-hover:text-primary mb-2">Upload Document</h3>
                    <p class="text-sm text-slate-500 mb-3">Best for bulk updates. Import data from external suppliers or legacy systems.</p>
                    <div class="flex gap-2 flex-wrap">
                        <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded font-medium">.XLSX</span>
                        <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded font-medium">.CSV</span>
                        <span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded font-medium">.PDF</span>
                    </div>
                </button>

                <button onclick="navigateTo('scan-barcodes')" class="p-8 border-2 border-slate-200 rounded-xl hover:border-primary hover:shadow-xl transition-all text-left group bg-white">
                    <div class="size-14 rounded-full bg-emerald-50 text-emerald-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <span class="material-symbols-outlined text-3xl">qr_code_scanner</span>
                    </div>
                    <h3 class="font-bold text-lg group-hover:text-primary mb-2">Scan Barcodes</h3>
                    <p class="text-sm text-slate-500 mb-3">Fast entry for warehouse operations. Supports handheld USB scanners or camera input.</p>
                    <div class="inline-block px-3 py-1 bg-emerald-50 text-emerald-700 text-xs font-bold rounded-full border border-emerald-200">
                        ⚡ Recommended for High Volume
                    </div>
                </button>

                <button onclick="showNotification('Manual Entry grid coming soon!', 'info')" class="p-8 border-2 border-slate-200 rounded-xl hover:border-primary hover:shadow-xl transition-all text-left group bg-white">
                    <div class="size-14 rounded-full bg-orange-50 text-orange-600 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <span class="material-symbols-outlined text-3xl">edit_note</span>
                    </div>
                    <h3 class="font-bold text-lg group-hover:text-primary mb-2">Manual Entry</h3>
                    <p class="text-sm text-slate-500 mb-3">Add items row-by-row in an editable grid. Good for quick adjustments or small batches.</p>
                </button>
            </div>

            <div class="mt-8 text-center">
                <button onclick="navigateTo('overview')" class="text-slate-400 hover:text-slate-600 flex items-center gap-2 mx-auto">
                    <span class="material-symbols-outlined">arrow_back</span> Back to Overview
                </button>
                <p class="text-xs text-slate-400 mt-4">Not sure which method to use? <a href="#" class="text-primary font-semibold hover:underline">View Documentation</a></p>
            </div>
        </div>
    </div>
</div>


          <!-- SCREEN 3: Upload Document -->
<div id="upload-document" class="view-section">
    <div class="flex-1 flex flex-col h-full bg-white">
        <div class="px-6 lg:px-8 py-4 border-b border-slate-200 shrink-0">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-xl font-bold text-slate-900">Upload Document</h1>
                    <p class="text-xs text-slate-500 mt-1">Map columns and validate before posting stock update.</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="navigateTo('update-stock')" class="px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 rounded-lg">Back</button>
                    <button onclick="navigateTo('review-post')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Next: Review & Post →</button>
                </div>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
            <div class="max-w-6xl mx-auto">
                <div class="flex items-center justify-center mb-8">
                    <div class="flex items-center gap-8">
                        <div class="flex items-center gap-3">
                            <div class="size-8 rounded-full bg-primary text-white flex items-center justify-center font-bold">1</div>
                            <span class="font-bold text-sm text-primary">Step 1: Upload</span>
                        </div>
                        <div class="w-20 h-0.5 bg-slate-200"></div>
                        <div class="flex items-center gap-3">
                            <div class="size-8 rounded-full bg-slate-200 text-slate-400 flex items-center justify-center font-bold">2</div>
                            <span class="font-medium text-sm text-slate-400">Step 2: Column Mapping</span>
                        </div>
                        <div class="w-20 h-0.5 bg-slate-200"></div>
                        <div class="flex items-center gap-3">
                            <div class="size-8 rounded-full bg-slate-200 text-slate-400 flex items-center justify-center font-bold">3</div>
                            <span class="font-medium text-sm text-slate-400">Step 3: Review & Post</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2 space-y-6">
                        <div class="bg-white border-2 border-dashed border-slate-300 rounded-lg p-12 text-center hover:border-primary hover:bg-slate-50 transition-all cursor-pointer">
                            <div class="size-16 rounded-full bg-blue-50 text-blue-600 flex items-center justify-center mx-auto mb-4">
                                <span class="material-symbols-outlined text-4xl">cloud_upload</span>
                            </div>
                            <h3 class="font-bold text-lg text-slate-900 mb-2">Drop file here or click to browse</h3>
                            <p class="text-sm text-slate-500 mb-4">Supported formats: XLSX, CSV, PDF (Max 10 MB)</p>
                            <button class="px-6 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary-hover shadow-sm">
                                Choose File
                            </button>
                        </div>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-blue-600 text-[24px]">info</span>
                                <div>
                                    <p class="text-sm font-bold text-blue-900 mb-1">File Requirements</p>
                                    <ul class="text-sm text-blue-700 space-y-1">
                                        <li>• Must contain columns: SKU/Item Code, Quantity</li>
                                        <li>• Optional: Warehouse, Bin Location, Batch/Serial Number</li>
                                        <li>• First row should contain column headers</li>
                                        <li>• Remove any merged cells or formulas</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white border border-slate-200 rounded-lg p-6">
                            <h3 class="font-bold text-slate-900 mb-4">Recent Uploads</h3>
                            <div class="space-y-3">
                                <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer">
                                    <span class="material-symbols-outlined text-emerald-600 text-[24px]">description</span>
                                    <div class="flex-1">
                                        <p class="font-bold text-sm text-slate-900">VendorStock_Jan.xlsx</p>
                                        <p class="text-xs text-slate-500">Jan 22, 2026 • 245 items • Processed</p>
                                    </div>
                                    <button onclick="showNotification('Template VendorStock_Jan.xlsx loaded', 'info')" class="text-sm text-primary font-semibold hover:underline">Reuse</button>
                                </div>
                                <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer">
                                    <span class="material-symbols-outlined text-blue-600 text-[24px]">description</span>
                                    <div class="flex-1">
                                        <p class="font-bold text-sm text-slate-900">StockCount_Dec.csv</p>
                                        <p class="text-xs text-slate-500">Dec 28, 2025 • 189 items • Processed</p>
                                    </div>
                                    <button onclick="showNotification('Template StockCount_Dec.csv loaded', 'info')" class="text-sm text-primary font-semibold hover:underline">Reuse</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div class="bg-white border border-slate-200 rounded-lg p-5">
                            <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-primary text-[20px]">download</span>
                                Templates
                            </h3>
                            <div class="space-y-2">
                                <button class="w-full p-3 bg-slate-50 hover:bg-slate-100 rounded-lg text-left border border-slate-200">
                                    <p class="text-sm font-bold text-slate-900">Stock Adjustment Template</p>
                                    <p class="text-xs text-slate-500">XLSX format with examples</p>
                                </button>
                                <button class="w-full p-3 bg-slate-50 hover:bg-slate-100 rounded-lg text-left border border-slate-200">
                                    <p class="text-sm font-bold text-slate-900">Bulk Receipt Template</p>
                                    <p class="text-xs text-slate-500">For GRN imports</p>
                                </button>
                                <button class="w-full p-3 bg-slate-50 hover:bg-slate-100 rounded-lg text-left border border-slate-200">
                                    <p class="text-sm font-bold text-slate-900">Transfer Template</p>
                                    <p class="text-xs text-slate-500">Inter-warehouse moves</p>
                                </button>
                            </div>
                        </div>

                        <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                            <div class="flex items-start gap-2">
                                <span class="material-symbols-outlined text-emerald-600 text-[20px]">tips_and_updates</span>
                                <div>
                                    <p class="text-xs font-bold text-emerald-900 mb-1">Pro Tip</p>
                                    <p class="text-xs text-emerald-700">Use our templates to ensure 100% compatibility. Auto-mapping works best with standard column names.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

            <!-- SCREEN 4: Stock Tracker -->
            <div id="stock-tracker" class="view-section">
                <div class="flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 flex flex-col md:flex-row justify-between items-start md:items-center gap-3 shrink-0">
                        <div>
                            <div class="flex items-center gap-3">
                                <h1 class="text-xl font-bold text-slate-900">Stock Tracker</h1>
                                <span class="flex items-center gap-1 px-2 py-1 bg-emerald-50 text-emerald-700 rounded text-xs font-bold">
                                    <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
                                    LIVE
                                </span>
                            </div>
                            <p class="text-xs text-slate-500 mt-0.5">Enterprise ERP Stock Tracker for real-time inventory management across multiple warehouses.</p>
                        </div>
                        <div class="flex items-center gap-2 flex-wrap">
                            <button onclick="navigateTo('reservations')" class="h-9 px-3 text-sm font-semibold border border-slate-200 bg-white rounded-lg hover:bg-slate-50 flex items-center gap-2">
    <span class="material-symbols-outlined text-[18px]">lock</span>
    Reserve / Release
</button>
<button onclick="exportData()" class="h-9 px-3 text-sm font-semibold border border-slate-200 bg-white rounded-lg hover:bg-slate-50 flex items-center gap-2">
    <span class="material-symbols-outlined text-[18px]">ios_share</span>
    Export
</button>
<button onclick="toggleColumnSelector()" class="h-9 px-3 text-sm font-semibold border border-slate-200 bg-white rounded-lg hover:bg-slate-50 flex items-center gap-2">
    <span class="material-symbols-outlined text-[18px]">view_column</span>
    Columns
</button>

                            <button onclick="navigateTo('update-stock')" class="h-9 px-4 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">
                                Update Stock
                            </button>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
                        <div class="relative">
                            <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                            <input type="text" placeholder="Filter by SKU / Item..." class="w-64 h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"/>
                        </div>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Warehouse: All</option>
                            <option>Singapore HQ</option>
                            <option>Malaysia North</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Location</option>
                            <option>Zone A</option>
                            <option>Zone B</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Stock State</option>
                            <option>Available</option>
                            <option>Reserved</option>
                            <option>Low Stock</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Category: All</option>
                            <option>Electronics</option>
                            <option>Mechanical</option>
                        </select>
                    </div>

                    <div class="flex-1 overflow-auto custom-scrollbar">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                                <tr>
                                    <th class="px-6 py-3">
                                        <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                    </th>
                                    <th class="px-6 py-3">SKU</th>
                                    <th class="px-6 py-3">Item Name</th>
                                    <th class="px-6 py-3">Barcode</th>
                                    <th class="px-6 py-3">Warehouse</th>
                                    <th class="px-6 py-3">Bin</th>
                                    <th class="px-6 py-3 text-right">On Hand</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm">
                                <tr onclick="navigateTo('sku-detail')" class="hover:bg-slate-50 cursor-pointer group">
                                    <td class="px-6 py-4">
                                        <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary" onclick="event.stopPropagation()"/>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary">KB-204-X</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-bold text-slate-900">Wireless Mech Keyboard</div>
                                        <div class="text-xs text-slate-500">Electronics / Peripherals</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="font-mono text-xs bg-slate-100 px-2 py-1 rounded">89012399</span>
                                    </td>
                                    <td class="px-6 py-4">WH-Main</td>
                                    <td class="px-6 py-4">
                                        <span class="font-mono text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-bold">A-12-04</span>
                                    </td>
                                    <td class="px-6 py-4 text-right">
                                        <div class="font-bold text-slate-900">142</div>
                                    </td>
                                </tr>
                                <tr onclick="navigateTo('sku-detail')" class="hover:bg-slate-50 cursor-pointer group">
                                    <td class="px-6 py-4">
                                        <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary" onclick="event.stopPropagation()"/>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary">MN-400-S</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-bold text-slate-900">UltraWide Monitor 34"</div>
                                        <div class="text-xs text-slate-500">Electronics / Displays</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="font-mono text-xs bg-slate-100 px-2 py-1 rounded">77281900</span>
                                    </td>
                                    <td class="px-6 py-4">WH-East</td>
                                    <td class="px-6 py-4">
                                        <span class="font-mono text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-bold">B-08-01</span>
                                    </td>
                                    <td class="px-6 py-4 text-right">
                                        <div class="font-bold text-orange-600">8</div>
                                    </td>
                                </tr>
                                <tr onclick="navigateTo('sku-detail')" class="hover:bg-slate-50 cursor-pointer group">
                                    <td class="px-6 py-4">
                                        <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary" onclick="event.stopPropagation()"/>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary">MS-ERG-01</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-bold text-slate-900">Ergo Mouse Pro</div>
                                        <div class="text-xs text-slate-500">Electronics / Peripherals</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="font-mono text-xs bg-slate-100 px-2 py-1 rounded">44556677</span>
                                    </td>
                                    <td class="px-6 py-4">WH-West</td>
                                    <td class="px-6 py-4">
                                        <span class="font-mono text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-bold">C-01-02</span>
                                    </td>
                                    <td class="px-6 py-4 text-right">
                                        <div class="font-bold text-slate-900">500</div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0 bg-white">
                        <div class="text-sm text-slate-500">
                            Showing <span class="font-bold text-slate-900">1-5</span> of <span class="font-bold text-slate-900">248</span> items
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                            <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">3</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 5: SKU Detail -->
            <div id="sku-detail" class="view-section">
                <div class="flex h-full overflow-hidden">
                    <div class="flex-1 flex flex-col bg-slate-50 overflow-y-auto custom-scrollbar">
                        <div class="px-6 lg:px-8 py-6">
                            <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                                <div class="flex justify-between items-start border-b border-slate-200 pb-6">
                                    <div class="flex flex-col gap-2">
                                        <div class="flex items-center gap-4">
                                            <h1 class="text-3xl font-bold text-slate-900">Printer Ink Black</h1>
                                            <div class="flex gap-2">
                                                <span class="flex items-center gap-1.5 px-3 py-1 rounded-md bg-red-50 text-red-700 border border-red-200 text-xs font-bold">
                                                    <span class="material-symbols-outlined text-[14px]">warning</span>
                                                    Critical Low Stock
                                                </span>
                                                <span class="flex items-center gap-1.5 px-3 py-1 rounded-md bg-blue-50 text-blue-700 border border-blue-200 text-xs font-bold">
                                                    <span class="material-symbols-outlined text-[14px]">autorenew</span>
                                                    Reorder Enabled
                                                </span>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-4 text-sm text-slate-500">
                                            <span class="font-mono text-slate-700 font-semibold">SKU-2891</span>
                                            <span>•</span>
                                            <span>Barcode: 89011280091</span>
                                            <span>•</span>
                                            <span>Category: Consumables</span>
                                        </div>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <button onclick="navigateTo('reorder-automation')" class="px-4 py-2 border border-slate-300 bg-white text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 shadow-sm flex items-center gap-2">
                                            <span class="material-symbols-outlined text-[18px]">shopping_cart</span>
                                            Create PO Draft
                                        </button>
                                        <button onclick="showCreateTransferModal()" class="px-4 py-2 border border-slate-300 bg-white text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 shadow-sm flex items-center gap-2">
                                            <span class="material-symbols-outlined text-[18px]">sync_alt</span>
                                            Create Transfer
                                        </button>
                                        <button onclick="navigateTo('update-stock')" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-md hover:bg-primary-hover flex items-center gap-2">
                                            <span class="material-symbols-outlined text-[18px]">edit</span>
                                            Update Stock
                                        </button>
                                    </div>
                                </div>

                                <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <div class="flex justify-between text-xs font-bold uppercase text-slate-400 mb-2">
                                            <span>On Hand</span>
                                            <span class="material-symbols-outlined text-[18px] text-slate-300">inventory_2</span>
                                        </div>
                                        <div class="text-2xl font-bold text-slate-900">142</div>
                                    </div>
                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm border-l-4 border-l-green-500">
                                        <div class="flex justify-between text-xs font-bold uppercase text-slate-400 mb-2">
                                            <span>Available</span>
                                            <span class="material-symbols-outlined text-[18px] text-green-500">check_circle</span>
                                        </div>
                                        <div class="text-2xl font-bold text-green-600">42</div>
                                    </div>
                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm cursor-pointer hover:border-primary" onclick="navigateTo('reservations')">
                                        <div class="flex justify-between text-xs font-bold uppercase text-slate-400 mb-2">
                                            <span>Reserved</span>
                                            <span class="material-symbols-outlined text-[18px] text-slate-300">lock</span>
                                        </div>
                                        <div class="text-2xl font-bold text-slate-700">80</div>
                                    </div>
                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <div class="flex justify-between text-xs font-bold uppercase text-slate-400 mb-2">
                                            <span>In Transit</span>
                                            <span class="material-symbols-outlined text-[18px] text-blue-500">local_shipping</span>
                                        </div>
                                        <div class="text-2xl font-bold text-blue-600">20</div>
                                    </div>
                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <div class="flex justify-between text-xs font-bold uppercase text-slate-400 mb-2">
                                            <span>QC Hold</span>
                                            <span class="material-symbols-outlined text-[18px] text-slate-300">check_circle_outline</span>
                                        </div>
                                        <div class="text-2xl font-bold text-slate-700">0</div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                    <div class="lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm flex flex-col overflow-hidden">
                                        <div class="px-6 py-4 border-b border-slate-200 font-bold text-slate-800 bg-slate-50 flex justify-between items-center">
                                            <span>Stock by Location</span>
                                            <button onclick="showNotification('Opening warehouse map view...', 'info')" class="text-xs text-primary font-bold hover:underline">Map View</button>
                                        </div>
                                        <div class="flex-1 overflow-auto">
                                            <table class="w-full text-left text-sm">
                                                <thead class="bg-white text-xs uppercase text-slate-500 border-b border-slate-100 sticky top-0">
                                                    <tr>
                                                        <th class="px-6 py-3">Warehouse</th>
                                                        <th class="px-6 py-3">Zone</th>
                                                        <th class="px-6 py-3">Bin</th>
                                                        <th class="px-6 py-3 text-right">On Hand</th>
                                                        <th class="px-6 py-3 text-right">Available</th>
                                                        <th class="px-6 py-3">Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="divide-y divide-slate-100">
                                                    <tr onclick="navigateTo('bin-detail')" class="hover:bg-slate-50 cursor-pointer">
                                                        <td class="px-6 py-3 font-medium text-slate-900">Singapore HQ</td>
                                                        <td class="px-6 py-3 text-slate-600">Zone A</td>
                                                        <td class="px-6 py-3 font-mono text-slate-600">A-12-04</td>
                                                        <td class="px-6 py-3 text-right font-bold">100</td>
                                                        <td class="px-6 py-3 text-right text-green-600 font-bold">20</td>
                                                        <td class="px-6 py-3"><span class="bg-green-50 text-green-700 px-2 py-0.5 rounded text-xs font-bold">OK</span></td>
                                                    </tr>
                                                    <tr onclick="navigateTo('bin-detail')" class="hover:bg-slate-50 cursor-pointer">
                                                        <td class="px-6 py-3 font-medium text-slate-900">Singapore HQ</td>
                                                        <td class="px-6 py-3 text-slate-600">Zone B</td>
                                                        <td class="px-6 py-3 font-mono text-slate-600">B-02-11</td>
                                                        <td class="px-6 py-3 text-right font-bold">42</td>
                                                        <td class="px-6 py-3 text-right text-green-600 font-bold">22</td>
                                                        <td class="px-6 py-3"><span class="bg-green-50 text-green-700 px-2 py-0.5 rounded text-xs font-bold">OK</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <div class="flex flex-col gap-4">
                                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5">
                                            <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                                                <span class="material-symbols-outlined text-orange-500 text-[20px]">lightbulb</span>
                                                AI Insights & Signals
                                            </h3>
                                            <div class="space-y-3">
                                                <div class="p-3 bg-orange-50 rounded-lg border border-orange-100">
                                                    <div class="flex items-center justify-between mb-1">
                                                        <p class="text-xs text-orange-800 font-bold">Reorder Signal</p>
                                                        <span class="text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded font-bold">HIGH PRIORITY</span>
                                                    </div>
                                                    <div class="my-2">
                                                        <div class="flex justify-between text-xs mb-1">
                                                            <span class="text-orange-900 font-bold">Available: 42</span>
                                                            <span class="text-orange-700">ROP: 80</span>
                                                        </div>
                                                        <div class="w-full bg-orange-200 rounded-full h-2">
                                                            <div class="bg-orange-600 h-2 rounded-full" style="width: 47%"></div>
                                                        </div>
                                                    </div>
                                                    <p class="text-xs text-orange-700 mb-2">Stock is 47% below Reorder Point (80). Suggested order quantity: 120 units.</p>
                                                    <button onclick="navigateTo('reorder-automation')" class="w-full mt-2 text-xs bg-white border border-orange-200 text-orange-700 px-3 py-2 rounded font-bold hover:bg-orange-100">
                                                        Approve & Create PO Draft
                                                    </button>
                                                </div>

                                                <div class="p-3 bg-blue-50 rounded-lg border border-blue-100">
                                                    <div class="flex items-center justify-between mb-2">
                                                        <p class="text-xs text-blue-800 font-bold">Order Impact</p>
                                                        <span class="text-2xl font-bold text-orange-600">2 ⚠</span>
                                                    </div>
                                                    <p class="text-xs text-blue-700 mb-2">BACKORDERS</p>
                                                    <button onclick="navigateTo('reservations')" class="text-xs text-blue-700 font-bold hover:underline">View impacted orders →</button>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5">
                                            <h3 class="font-bold text-slate-900 mb-3 text-sm">Recent Movements</h3>
                                            <div class="space-y-2">
                                                <div class="flex items-start gap-2">
                                                    <span class="w-2 h-2 rounded-full bg-green-500 mt-1"></span>
                                                    <div class="flex-1">
                                                        <p class="text-xs font-bold text-slate-900">Stock In (+50)</p>
                                                        <p class="text-xs text-slate-500">PO #4920 - Supplier A</p>
                                                        <p class="text-xs text-slate-400">2m ago</p>
                                                    </div>
                                                </div>
                                                <div class="flex items-start gap-2">
                                                    <span class="w-2 h-2 rounded-full bg-orange-500 mt-1"></span>
                                                    <div class="flex-1">
                                                        <p class="text-xs font-bold text-slate-900">Reserved (8)</p>
                                                        <p class="text-xs text-slate-500">SO #1023 - Client X</p>
                                                        <p class="text-xs text-slate-400">4h ago</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <button onclick="navigateTo('ledger')" class="mt-3 w-full text-xs text-center text-primary font-semibold hover:underline">View Full Ledger</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                        <h3 class="font-bold text-slate-900 mb-4">Movements</h3>
                                        <div class="text-center text-slate-400 py-8">
                                            <span class="material-symbols-outlined text-4xl mb-2">show_chart</span>
                                            <p class="text-sm">Stock movement timeline chart</p>
                                        </div>
                                    </div>

                                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                        <h3 class="font-bold text-slate-900 mb-4">Lots & Serials</h3>
                                        <div class="text-center text-slate-400 py-8">
                                            <span class="material-symbols-outlined text-4xl mb-2">label</span>
                                            <p class="text-sm">Lot & serial number tracking</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="w-80 bg-white border-l border-slate-200 flex flex-col overflow-hidden hidden xl:flex">
                        <div class="px-6 py-4 border-b border-slate-200">
                            <div class="flex items-center justify-between">
                                <h3 class="font-bold text-slate-900">Item Preview</h3>
                                <button onclick="this.closest('.w-80').classList.add('hidden')" class="text-slate-400 hover:text-slate-600">
                                    <span class="material-symbols-outlined">close</span>
                                </button>
                            </div>
                        </div>
                        <div class="flex-1 overflow-y-auto p-6 custom-scrollbar">
                            <div class="space-y-4">
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase block mb-1">Total Available</label>
                                    <div class="text-2xl font-bold text-green-600">450</div>
                                    <p class="text-xs text-slate-500 mt-1">+12% vs last month</p>
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase block mb-1">Committed</label>
                                    <div class="text-2xl font-bold text-slate-900">24</div>
                                    <p class="text-xs text-slate-500 mt-1">3 open orders</p>
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase block mb-1">Reorder Point</label>
                                    <div class="text-lg font-bold text-slate-900">100 units</div>
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase block mb-1">Preferred Supplier</label>
                                    <div class="text-sm font-bold text-primary">Acme Corp Ltd.</div>
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase block mb-1">Bin Location</label>
                                    <div class="text-sm font-mono font-bold text-slate-900">Zone A 12-04</div>
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase block mb-1">Last Count</label>
                                    <div class="text-sm text-slate-900">Oct 24, 2023 (Auto)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 6: Stock Movement Ledger -->
            <div id="ledger" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Stock Movement Ledger</h2>
                                <p class="text-xs text-slate-500 mt-1">Append-only inventory movements across documents.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">view_column</span>
                                    Columns
                                </button>
                                <button class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">bookmark</span>
                                    Save View
                                </button>
                                <button class="px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">ios_share</span>
                                    Export
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
                        <div class="flex items-center gap-2 bg-white border border-slate-200 rounded-lg px-3 py-2">
                            <span class="material-symbols-outlined text-slate-400 text-[18px]">calendar_today</span>
                            <select class="text-sm border-0 p-0 focus:ring-0">
                                <option>Last 30 Days</option>
                                <option>Last 7 Days</option>
                                <option>This Month</option>
                                <option>Custom Range</option>
                            </select>
                        </div>

                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>All Warehouses</option>
                            <option>Singapore HQ</option>
                            <option>Malaysia North</option>
                        </select>

                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>All Types</option>
                            <option>Receipt</option>
                            <option>Issue</option>
                            <option>Transfer</option>
                            <option>Adjustment</option>
                        </select>

                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Any Doc Type</option>
                            <option>Purchase Order</option>
                            <option>Sales Order</option>
                            <option>Work Order</option>
                        </select>

                        <div class="relative flex-1 min-w-[200px]">
                            <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                            <input type="text" placeholder="Filter by SKU..." class="w-full h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"/>
                        </div>

                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Bin / Loc</option>
                            <option>Zone A</option>
                            <option>Zone B</option>
                        </select>

                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>All Users</option>
                            <option>Alex Morgan</option>
                            <option>System Admin</option>
                        </select>

                        <div class="flex items-center gap-2">
                            <input type="checkbox" id="exceptions" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                            <label for="exceptions" class="text-sm font-medium text-slate-700">Exceptions only</label>
                        </div>
                    </div>

                    <div class="px-6 py-4 bg-white border-b border-slate-200 flex items-center gap-6 shrink-0">
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-slate-400">swap_vert</span>
                            <div>
                                <div class="text-xs text-slate-500 uppercase font-bold">Net Change</div>
                                <div class="text-2xl font-bold text-green-600">+1,240</div>
                            </div>
                        </div>

                        <div class="h-10 w-px bg-slate-200"></div>

                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-green-500">arrow_downward</span>
                            <div>
                                <div class="text-xs text-slate-500 uppercase font-bold">Receipts</div>
                                <div class="text-xl font-bold text-slate-900">5,000</div>
                            </div>
                        </div>

                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-orange-500">arrow_upward</span>
                            <div>
                                <div class="text-xs text-slate-500 uppercase font-bold">Issues</div>
                                <div class="text-xl font-bold text-slate-900">-3,500</div>
                            </div>
                        </div>

                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-slate-400">tune</span>
                            <div>
                                <div class="text-xs text-slate-500 uppercase font-bold">Adjustments</div>
                                <div class="text-xl font-bold text-slate-900">-260</div>
                            </div>
                        </div>

                        <div class="flex items-center gap-3">
                            <span class="material-symbols-outlined text-blue-500">sync_alt</span>
                            <div>
                                <div class="text-xs text-slate-500 uppercase font-bold">Transfers</div>
                                <div class="text-xl font-bold text-slate-900">12</div>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-auto custom-scrollbar">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-semibold sticky top-0 z-10">
                                <tr>
                                    <th class="px-6 py-3 border-b">Time</th>
                                    <th class="px-6 py-3 border-b">SKU</th>
                                    <th class="px-6 py-3 border-b">Item</th>
                                    <th class="px-6 py-3 border-b">Movement Type</th>
                                    <th class="px-6 py-3 border-b">Doc Ref</th>
                                    <th class="px-6 py-3 border-b">Location</th>
                                    <th class="px-6 py-3 border-b text-right">Qty Change</th>
                                    <th class="px-6 py-3 border-b text-right">Balance</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm text-slate-700">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3">Oct 24, 10:42 AM</td>
                                    <td class="px-6 py-3 font-mono font-bold text-primary">KAL-8820</td>
                                    <td class="px-6 py-3">Hydraulic Pump V2</td>
                                    <td class="px-6 py-3"><span class="bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded text-xs font-bold">Receipt</span></td>
                                    <td class="px-6 py-3 text-blue-600 hover:underline cursor-pointer" onclick="navigateTo('receiving')">PO-2023-001</td>
                                    <td class="px-6 py-3">WH-01 / A-44-2</td>
                                    <td class="px-6 py-3 text-right font-bold text-emerald-600">+120</td>
                                    <td class="px-6 py-3 text-right font-mono">1,450</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3">Oct 24, 09:15 AM</td>
                                    <td class="px-6 py-3 font-mono font-bold text-primary">KAL-4419</td>
                                    <td class="px-6 py-3">Sealant Ring 50mm</td>
                                    <td class="px-6 py-3"><span class="bg-amber-100 text-amber-700 px-2 py-0.5 rounded text-xs font-bold">Issue</span></td>
                                    <td class="px-6 py-3 text-blue-600 hover:underline cursor-pointer">WO-992-11</td>
                                    <td class="px-6 py-3">WH-01 / B-12-1</td>
                                    <td class="px-6 py-3 text-right font-bold text-amber-600">-45</td>
                                    <td class="px-6 py-3 text-right font-mono">890</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3">Oct 23, 04:55 PM</td>
                                    <td class="px-6 py-3 font-mono font-bold text-primary">KAL-9921</td>
                                    <td class="px-6 py-3">Control Unit X7</td>
                                    <td class="px-6 py-3"><span class="bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs font-bold">Transfer</span></td>
                                    <td class="px-6 py-3 text-blue-600 hover:underline cursor-pointer" onclick="navigateTo('transfers')">TR-221-00</td>
                                    <td class="px-6 py-3">WH-01 / Dock</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-500">0</td>
                                    <td class="px-6 py-3 text-right font-mono">55</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3">Oct 23, 02:12 PM</td>
                                    <td class="px-6 py-3 font-mono font-bold text-primary">KAL-8820</td>
                                    <td class="px-6 py-3">Hydraulic Pump V2</td>
                                    <td class="px-6 py-3"><span class="bg-red-100 text-red-700 px-2 py-0.5 rounded text-xs font-bold">Adjust</span></td>
                                    <td class="px-6 py-3 text-blue-600 hover:underline cursor-pointer" onclick="navigateTo('adjustments')">ADJ-889</td>
                                    <td class="px-6 py-3">WH-01 / A-44-2</td>
                                    <td class="px-6 py-3 text-right font-bold text-red-600">-12</td>
                                    <td class="px-6 py-3 text-right font-mono">1,330</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0 bg-white">
                        <div class="text-sm text-slate-500">
                            Showing <span class="font-bold text-slate-900">1-10</span> of <span class="font-bold text-slate-900">1,247</span> movements
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                            <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">3</button>
                            <span class="px-2 text-slate-400">...</span>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">125</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
                        </div>
                    </div>
                </div>
            </div>
           <!-- SCREEN 7: Reservations -->
<div id="reservations" class="view-section">
    <div class="flex-1 flex flex-col h-full bg-white">
        <div class="px-6 py-4 border-b border-slate-200 shrink-0">
            <div class="flex justify-between items-center">
                <div>
                    <h2 class="text-2xl font-bold text-slate-900">Stock Reservations</h2>
                    <p class="text-xs text-slate-500 mt-1">Items reserved for sales orders, work orders, or shipments.</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="showBulkReleaseModal()" class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                        <span class="material-symbols-outlined text-[18px]">lock_open</span>
                        Bulk Release
                    </button>
                    <button onclick="showManualReserveModal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                        <span class="material-symbols-outlined text-[18px]">add</span>
                        Manual Reserve
                    </button>
                </div>
            </div>
        </div>

        <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
            <div class="relative">
                <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                <input type="text" placeholder="Search by SKU, Order #..." class="w-64 h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary"/>
            </div>
            <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                <option>All Warehouses</option>
                <option>Singapore HQ</option>
                <option>Malaysia North</option>
            </select>
            <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                <option>Status: All</option>
                <option>Active</option>
                <option>Expired</option>
                <option>Partially Fulfilled</option>
            </select>
            <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                <option>Doc Type: All</option>
                <option>Sales Order</option>
                <option>Work Order</option>
                <option>Transfer</option>
            </select>
        </div>

        <div class="flex-1 overflow-auto custom-scrollbar">
            <table class="w-full text-left">
                <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                    <tr>
                        <th class="px-6 py-3">
                            <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                        </th>
                        <th class="px-6 py-3">Reserved For</th>
                        <th class="px-6 py-3">SKU</th>
                        <th class="px-6 py-3">Item Name</th>
                        <th class="px-6 py-3">Warehouse</th>
                        <th class="px-6 py-3 text-right">Qty Reserved</th>
                        <th class="px-6 py-3">Reserved Until</th>
                        <th class="px-6 py-3">Status</th>
                        <th class="px-6 py-3 text-center">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-100 text-sm">
                    <tr class="hover:bg-slate-50">
                        <td class="px-6 py-4">
                            <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                        </td>
                        <td class="px-6 py-4">
                            <div class="font-bold text-primary hover:underline cursor-pointer">SO-2023-449</div>
                            <div class="text-xs text-slate-500">Acme Corp</div>
                        </td>
                        <td class="px-6 py-4 font-mono font-bold text-slate-900">KB-204-X</td>
                        <td class="px-6 py-4">
                            <div class="font-medium text-slate-900">Wireless Mech Keyboard</div>
                            <div class="text-xs text-slate-500">Electronics</div>
                        </td>
                        <td class="px-6 py-4">Singapore HQ</td>
                        <td class="px-6 py-4 text-right font-bold text-slate-900">50</td>
                        <td class="px-6 py-4">Oct 30, 2023</td>
                        <td class="px-6 py-4">
                            <span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold">Active</span>
                        </td>
                        <td class="px-6 py-4 text-center">
                            <button onclick="showNotification('Reservation released successfully!', 'success')" class="text-primary hover:underline text-xs font-semibold">Release</button>
                        </td>
                    </tr>
                    <tr class="hover:bg-slate-50">
                        <td class="px-6 py-4">
                            <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                        </td>
                        <td class="px-6 py-4">
                            <div class="font-bold text-primary hover:underline cursor-pointer">WO-992-11</div>
                            <div class="text-xs text-slate-500">Production Order</div>
                        </td>
                        <td class="px-6 py-4 font-mono font-bold text-slate-900">MN-400-S</td>
                        <td class="px-6 py-4">
                            <div class="font-medium text-slate-900">UltraWide Monitor 34"</div>
                            <div class="text-xs text-slate-500">Displays</div>
                        </td>
                        <td class="px-6 py-4">Malaysia North</td>
                        <td class="px-6 py-4 text-right font-bold text-slate-900">12</td>
                        <td class="px-6 py-4">Nov 05, 2023</td>
                        <td class="px-6 py-4">
                            <span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold">Active</span>
                        </td>
                        <td class="px-6 py-4 text-center">
                            <button onclick="showNotification('Reservation released successfully!', 'success')" class="text-primary hover:underline text-xs font-semibold">Release</button>
                        </td>
                    </tr>
                    <tr class="hover:bg-slate-50 bg-orange-50">
                        <td class="px-6 py-4">
                            <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                        </td>
                        <td class="px-6 py-4">
                            <div class="font-bold text-primary hover:underline cursor-pointer">SO-2023-391</div>
                            <div class="text-xs text-slate-500">TechStore Inc</div>
                        </td>
                        <td class="px-6 py-4 font-mono font-bold text-slate-900">MS-ERG-01</td>
                        <td class="px-6 py-4">
                            <div class="font-medium text-slate-900">Ergo Mouse Pro</div>
                            <div class="text-xs text-slate-500">Peripherals</div>
                        </td>
                        <td class="px-6 py-4">Singapore HQ</td>
                        <td class="px-6 py-4 text-right font-bold text-orange-600">30</td>
                        <td class="px-6 py-4 text-orange-600 font-bold">Oct 20, 2023</td>
                        <td class="px-6 py-4">
                            <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold">Expired</span>
                        </td>
                        <td class="px-6 py-4 text-center">
                            <button onclick="showNotification('Expired reservations auto-released!', 'success')" class="text-orange-600 hover:underline text-xs font-semibold">Auto-Release</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0">
            <div class="text-sm text-slate-500">
                Total Reserved: <span class="font-bold text-slate-900">23,530 units</span> across <span class="font-bold">142</span> records
            </div>
            <div class="flex items-center gap-2">
                <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
            </div>
        </div>
    </div>
</div>

            <!-- SCREEN 8: Exceptions & Alerts -->
            <div id="exceptions" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Exceptions & Alerts</h2>
                                <p class="text-slate-500 text-sm mt-1">Critical stock issues requiring immediate attention.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    Configure Alerts
                                </button>
                                <button onclick="navigateTo('reorder-automation')" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover">
                                    Bulk Reorder
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="bg-white p-5 rounded-xl border-2 border-red-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Critical Low</span>
                                    <span class="material-symbols-outlined text-red-500">error</span>
                                </div>
                                <div class="text-3xl font-bold text-red-600 mb-1">12</div>
                                <p class="text-xs text-slate-600">Below safety stock</p>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Stock Out</span>
                                    <span class="material-symbols-outlined text-orange-500">warning</span>
                                </div>
                                <div class="text-3xl font-bold text-orange-600 mb-1">5</div>
                                <p class="text-xs text-slate-600">Zero inventory</p>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Overstocked</span>
                                    <span class="material-symbols-outlined text-blue-500">trending_up</span>
                                </div>
                                <div class="text-3xl font-bold text-blue-600 mb-1">8</div>
                                <p class="text-xs text-slate-600">Excess inventory</p>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Discrepancies</span>
                                    <span class="material-symbols-outlined text-purple-500">analytics</span>
                                </div>
                                <div class="text-3xl font-bold text-purple-600 mb-1">3</div>
                                <p class="text-xs text-slate-600">Count mismatches</p>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm">
                            <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between">
                                <h3 class="font-bold text-slate-900">Critical Low Stock Items</h3>
                                <div class="flex gap-2">
                                    <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                                        <option>All Warehouses</option>
                                        <option>Singapore HQ</option>
                                        <option>Malaysia North</option>
                                    </select>
                                    <button onclick="navigateTo('reorder-automation')" class="text-sm text-primary font-semibold hover:underline">Auto-Reorder All →</button>
                                </div>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left text-sm">
                                    <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                        <tr>
                                            <th class="px-6 py-3">
                                                <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                            </th>
                                            <th class="px-6 py-3">SKU</th>
                                            <th class="px-6 py-3">Item</th>
                                            <th class="px-6 py-3">Warehouse</th>
                                            <th class="px-6 py-3 text-right">Available</th>
                                            <th class="px-6 py-3 text-right">Safety Stock</th>
                                            <th class="px-6 py-3 text-right">Shortage</th>
                                            <th class="px-6 py-3">Severity</th>
                                            <th class="px-6 py-3">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-100">
                                        <tr class="hover:bg-red-50 bg-red-50">
                                            <td class="px-6 py-4">
                                                <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                            </td>
                                            <td class="px-6 py-4 font-mono font-bold text-primary">SKU-9920</td>
                                            <td class="px-6 py-4">
                                                <div class="font-bold text-slate-900">Printer Ink Black</div>
                                                <div class="text-xs text-slate-500">Consumables</div>
                                            </td>
                                            <td class="px-6 py-4">Singapore HQ</td>
                                            <td class="px-6 py-4 text-right font-bold text-red-600">5</td>
                                            <td class="px-6 py-4 text-right text-slate-600">20</td>
                                            <td class="px-6 py-4 text-right font-bold text-red-600">-15</td>
                                            <td class="px-6 py-4">
                                                <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit">
                                                    <span class="material-symbols-outlined text-[14px]">error</span>
                                                    Critical
                                                </span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <button onclick="navigateTo('reorder-automation')" class="text-primary hover:underline text-xs font-bold">Create PO</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-orange-50 bg-orange-50">
                                            <td class="px-6 py-4">
                                                <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                            </td>
                                            <td class="px-6 py-4 font-mono font-bold text-primary">WCH-001</td>
                                            <td class="px-6 py-4">
                                                <div class="font-bold text-slate-900">Wireless Charger</div>
                                                <div class="text-xs text-slate-500">Electronics</div>
                                            </td>
                                            <td class="px-6 py-4">Malaysia North</td>
                                            <td class="px-6 py-4 text-right font-bold text-orange-600">4</td>
                                            <td class="px-6 py-4 text-right text-slate-600">15</td>
                                            <td class="px-6 py-4 text-right font-bold text-orange-600">-11</td>
                                            <td class="px-6 py-4">
                                                <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit">
                                                    <span class="material-symbols-outlined text-[14px]">warning</span>
                                                    High
                                                </span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <button onclick="navigateTo('reorder-automation')" class="text-primary hover:underline text-xs font-bold">Create PO</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Stock Out Items</h3>
                                    <span class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded font-bold">5 SKUs</span>
                                </div>
                                <div class="space-y-3">
                                    <div class="p-3 bg-orange-50 rounded-lg border border-orange-100 flex items-center justify-between">
                                        <div>
                                            <p class="text-sm font-bold text-slate-900">AUDIO-X2</p>
                                            <p class="text-xs text-slate-500">Premium Headphones</p>
                                        </div>
                                        <button onclick="navigateTo('reorder-automation')" class="px-3 py-1 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">Reorder</button>
                                    </div>
                                    <div class="p-3 bg-orange-50 rounded-lg border border-orange-100 flex items-center justify-between">
                                        <div>
                                            <p class="text-sm font-bold text-slate-900">NIKE-09</p>
                                            <p class="text-xs text-slate-500">Running Shoes</p>
                                        </div>
                                        <button onclick="navigateTo('reorder-automation')" class="px-3 py-1 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">Reorder</button>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Inventory Discrepancies</h3>
                                    <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded font-bold">3 Issues</span>
                                </div>
                                <div class="space-y-3">
                                    <div class="p-3 bg-purple-50 rounded-lg border border-purple-100">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-purple-600 text-[20px]">sync_problem</span>
                                            <div class="flex-1">
                                                <p class="text-xs font-bold text-purple-900">SKU-4411 Count Mismatch</p>
                                                <p class="text-xs text-purple-700 mt-0.5">System: 120 | Physical: 115</p>
                                                <button onclick="navigateTo('adjustments')" class="text-xs text-purple-700 font-bold hover:underline mt-1">Create Adjustment</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-3 bg-purple-50 rounded-lg border border-purple-100">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-purple-600 text-[20px]">location_off</span>
                                            <div class="flex-1">
                                                <p class="text-xs font-bold text-purple-900">SKU-2290 Location Error</p>
                                                <p class="text-xs text-purple-700 mt-0.5">Item not found in designated bin</p>
                                                <button onclick="showCreateAdjustmentModal()" class="text-xs text-purple-700 font-bold hover:underline mt-1">Investigate</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 9: Stock Adjustments -->
            <div id="adjustments" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Stock Adjustments</h2>
                                <p class="text-xs text-slate-500 mt-1">Correct inventory discrepancies with proper audit trail.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">filter_list</span>
                                    Filters
                                </button>
                                <button onclick="navigateTo('create-adjustment')" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    New Adjustment
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>All Warehouses</option>
                            <option>Singapore HQ</option>
                            <option>Malaysia North</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Reason: All</option>
                            <option>Physical Count</option>
                            <option>Damage</option>
                            <option>Theft/Loss</option>
                            <option>System Error</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Status: All</option>
                            <option>Draft</option>
                            <option>Approved</option>
                            <option>Posted</option>
                        </select>
                        <div class="flex items-center gap-2 bg-white border border-slate-200 rounded-lg px-3 py-2">
                            <span class="material-symbols-outlined text-slate-400 text-[18px]">calendar_today</span>
                            <select class="text-sm border-0 p-0 focus:ring-0">
                                <option>Last 30 Days</option>
                                <option>Last 7 Days</option>
                                <option>This Month</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex-1 overflow-auto custom-scrollbar">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                                <tr>
                                    <th class="px-6 py-3">Adjustment #</th>
                                    <th class="px-6 py-3">Date</th>
                                    <th class="px-6 py-3">Warehouse</th>
                                    <th class="px-6 py-3">Reason</th>
                                    <th class="px-6 py-3 text-right">Items</th>
                                    <th class="px-6 py-3 text-right">Net Qty Change</th>
                                    <th class="px-6 py-3">Created By</th>
                                    <th class="px-6 py-3">Status</th>
                                    <th class="px-6 py-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">ADJ-2023-889</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 23, 2023</td>
                                    <td class="px-6 py-4">Singapore HQ</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-slate-100 text-slate-700 px-2 py-1 rounded text-xs font-bold">Physical Count</span>
                                    </td>
                                    <td class="px-6 py-4 text-right">4</td>
                                    <td class="px-6 py-4 text-right font-bold text-red-600">-12</td>
                                    <td class="px-6 py-4">Alex Morgan</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold">Posted</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening adjustment details ADJ-2023-889...', 'info')" class="text-primary hover:underline text-xs font-semibold">View</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">ADJ-2023-888</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 22, 2023</td>
                                    <td class="px-6 py-4">Malaysia North</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold">Damage</span>
                                    </td>
                                    <td class="px-6 py-4 text-right">1</td>
                                    <td class="px-6 py-4 text-right font-bold text-red-600">-5</td>
                                    <td class="px-6 py-4">John Tan</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold">Posted</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening adjustment details ADJ-2023-888...', 'info')" class="text-primary hover:underline text-xs font-semibold">View</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 bg-yellow-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">ADJ-2023-887</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 21, 2023</td>
                                    <td class="px-6 py-4">Singapore HQ</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs font-bold">System Error</span>
                                    </td>
                                    <td class="px-6 py-4 text-right">2</td>
                                    <td class="px-6 py-4 text-right font-bold text-emerald-600">+8</td>
                                    <td class="px-6 py-4">System</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs font-bold">Pending Approval</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="navigateTo('approval-adjustment')" class="text-primary hover:underline text-xs font-semibold">Review</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0">
                        <div class="text-sm text-slate-500">
                            Showing <span class="font-bold text-slate-900">1-10</span> of <span class="font-bold text-slate-900">87</span> adjustments
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                            <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 10: Stock Transfers -->
            <div id="transfers" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Stock Transfers</h2>
                                <p class="text-xs text-slate-500 mt-1">Move inventory between warehouses and locations.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">map</span>
                                    Transfer Map
                                </button>
                                <button onclick="showCreateTransferModal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    New Transfer
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
                        <div class="relative">
                            <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                            <input type="text" placeholder="Search transfer #, SKU..." class="w-64 h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary"/>
                        </div>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Status: All</option>
                            <option>Draft</option>
                            <option>In Transit</option>
                            <option>Received</option>
                            <option>Cancelled</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>From: All Locations</option>
                            <option>Singapore HQ</option>
                            <option>Malaysia North</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>To: All Locations</option>
                            <option>Singapore HQ</option>
                            <option>Malaysia North</option>
                        </select>
                    </div>

                    <div class="flex-1 overflow-auto custom-scrollbar">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                                <tr>
                                    <th class="px-6 py-3">Transfer #</th>
                                    <th class="px-6 py-3">Date Created</th>
                                    <th class="px-6 py-3">From</th>
                                    <th class="px-6 py-3">To</th>
                                    <th class="px-6 py-3 text-right">Items</th>
                                    <th class="px-6 py-3 text-right">Total Qty</th>
                                    <th class="px-6 py-3">ETA</th>
                                    <th class="px-6 py-3">Status</th>
                                    <th class="px-6 py-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer" onclick="navigateTo('transfer-detail')">TR-2023-221</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 23, 2023</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium">Singapore HQ</div>
                                        <div class="text-xs text-slate-500">WH-01</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium">Malaysia North</div>
                                        <div class="text-xs text-slate-500">WH-02</div>
                                    </td>
                                    <td class="px-6 py-4 text-right">8</td>
                                    <td class="px-6 py-4 text-right font-bold">450</td>
                                    <td class="px-6 py-4">Oct 25, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit">
                                            <span class="material-symbols-outlined text-[14px]">local_shipping</span>
                                            In Transit
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="navigateTo('transfer-detail')" class="text-primary hover:underline text-xs font-semibold">Track</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer" onclick="navigateTo('transfer-detail')">TR-2023-220</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 22, 2023</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium">Malaysia North</div>
                                        <div class="text-xs text-slate-500">WH-02</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium">Jakarta Hub</div>
                                        <div class="text-xs text-slate-500">HUB-04</div>
                                    </td>
                                    <td class="px-6 py-4 text-right">3</td>
                                    <td class="px-6 py-4 text-right font-bold">120</td>
                                    <td class="px-6 py-4">Oct 23, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit">
                                            <span class="material-symbols-outlined text-[14px]">check_circle</span>
                                            Received
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="navigateTo('transfer-detail')" class="text-primary hover:underline text-xs font-semibold">View</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 bg-yellow-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">TR-2023-219</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 21, 2023</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium">Singapore HQ</div>
                                        <div class="text-xs text-slate-500">WH-01</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium">Jakarta Hub</div>
                                        <div class="text-xs text-slate-500">HUB-04</div>
                                    </td>
                                    <td class="px-6 py-4 text-right">12</td>
                                    <td class="px-6 py-4 text-right font-bold">800</td>
                                    <td class="px-6 py-4">-</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs font-bold">Draft</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening transfer for editing...', 'info')" class="text-primary hover:underline text-xs font-semibold">Edit</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0">
                        <div class="text-sm text-slate-500">
                            Active Transfers: <span class="font-bold text-slate-900">15</span> • In Transit: <span class="font-bold text-blue-600">8</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                            <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 11: Create Transfer -->
            <div id="create-transfer" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-xl font-bold text-slate-900">Create Stock Transfer</h1>
                                <p class="text-xs text-slate-500 mt-1">Move inventory between locations.</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigateTo('transfers')" class="px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 rounded-lg">Cancel</button>
                                <button onclick="showNotification('Draft saved successfully!', 'success')" class="px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 shadow-sm">Save Draft</button>
                                <button onclick="showNotification('Transfer submitted successfully!', 'success'); navigateTo('transfers')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Submit Transfer</button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-5xl mx-auto space-y-6">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <div class="flex items-start gap-3">
                                    <span class="material-symbols-outlined text-blue-600 text-[24px]">info</span>
                                    <div>
                                        <p class="text-sm font-bold text-blue-900 mb-1">Transfer Context</p>
                                        <p class="text-xs text-blue-700">Specify the source and destination before adding items. Transit time will be calculated automatically.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Transfer Details</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Transfer ID *</label>
                                        <input type="text" value="TR-2023-222" disabled class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-slate-50"/>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Transfer Date *</label>
                                        <input type="date" value="2023-10-24" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">From Warehouse *</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>Select source...</option>
                                            <option selected>Singapore HQ (WH-01)</option>
                                            <option>Malaysia North (WH-02)</option>
                                            <option>Jakarta Hub (HUB-04)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">To Warehouse *</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>Select destination...</option>
                                            <option>Singapore HQ (WH-01)</option>
                                            <option selected>Malaysia North (WH-02)</option>
                                            <option>Jakarta Hub (HUB-04)</option>
                                        </select>
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Transfer Reason</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>Stock Rebalancing</option>
                                            <option>Customer Request</option>
                                            <option>Production Requirement</option>
                                            <option>Other</option>
                                        </select>
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Notes / Comments</label>
                                        <textarea rows="3" placeholder="Optional notes..." class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"></textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg overflow-hidden">
                                <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between bg-slate-50">
                                    <h3 class="font-bold text-slate-900">Items to Transfer</h3>
                                    <button class="text-sm text-primary font-semibold hover:underline flex items-center gap-1">
                                        <span class="material-symbols-outlined text-[18px]">add</span>
                                        Add Item
                                    </button>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                            <tr>
                                                <th class="px-6 py-3">SKU</th>
                                                <th class="px-6 py-3">Item Name</th>
                                                <th class="px-6 py-3 text-right">Available</th>
                                                <th class="px-6 py-3 text-right">Qty to Transfer</th>
                                                <th class="px-6 py-3">From Bin</th>
                                                <th class="px-6 py-3">To Bin</th>
                                                <th class="px-6 py-3"></th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr>
                                                <td class="px-6 py-4 font-mono font-bold text-primary">KB-204-X</td>
                                                <td class="px-6 py-4">Wireless Mech Keyboard</td>
                                                <td class="px-6 py-4 text-right text-green-600 font-bold">142</td>
                                                <td class="px-6 py-4 text-right">
                                                    <input type="number" value="50" class="w-20 px-2 py-1 text-sm border border-slate-200 rounded text-right"/>
                                                </td>
                                                <td class="px-6 py-4">
                                                    <input type="text" value="A-12-04" class="w-24 px-2 py-1 text-sm border border-slate-200 rounded font-mono"/>
                                                </td>
                                                <td class="px-6 py-4">
                                                    <input type="text" placeholder="Auto" class="w-24 px-2 py-1 text-sm border border-slate-200 rounded font-mono"/>
                                                </td>
                                                <td class="px-6 py-4">
                                                    <button class="text-red-600 hover:text-red-800">
                                                        <span class="material-symbols-outlined text-[18px]">delete</span>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="px-6 py-3 bg-slate-50 border-t border-slate-200 flex justify-between items-center">
                                    <span class="text-sm text-slate-500">Total items: 1</span>
                                    <span class="text-sm font-bold text-slate-900">Total Qty: 50</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 12: Warehouses & Bins Master -->
                         <!-- SCREEN: Discrepancies -->
            <div id="discrepancies" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Stock Discrepancies</h2>
                                <p class="text-xs text-slate-500 mt-1">System vs physical count mismatches and variance investigations.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">filter_list</span>
                                    Filters
                                </button>
                                <button onclick="showCreateAdjustmentModal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    Create Adjustment
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
                        <div class="relative">
                            <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                            <input type="text" placeholder="Search SKU, bin..." class="w-64 h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary"/>
                        </div>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Status: All</option>
                            <option>Open</option>
                            <option>Under Investigation</option>
                            <option>Resolved</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Warehouse: All</option>
                            <option>Singapore HQ</option>
                            <option>Malaysia North</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Severity: All</option>
                            <option>Critical (>$1000)</option>
                            <option>High (>$500)</option>
                            <option>Medium</option>
                        </select>
                    </div>

                    <div class="flex-1 overflow-auto custom-scrollbar">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                                <tr>
                                    <th class="px-6 py-3">Discrepancy #</th>
                                    <th class="px-6 py-3">SKU</th>
                                    <th class="px-6 py-3">Item Name</th>
                                    <th class="px-6 py-3">Warehouse</th>
                                    <th class="px-6 py-3 text-right">System Qty</th>
                                    <th class="px-6 py-3 text-right">Physical Qty</th>
                                    <th class="px-6 py-3 text-right">Variance</th>
                                    <th class="px-6 py-3 text-right">Value Impact</th>
                                    <th class="px-6 py-3">Detected</th>
                                    <th class="px-6 py-3">Status</th>
                                    <th class="px-6 py-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm">
                                <tr class="hover:bg-slate-50 bg-red-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary">DISC-2023-045</div>
                                    </td>
                                    <td class="px-6 py-4 font-mono font-bold text-slate-900">KB-204-X</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Wireless Mech Keyboard</div>
                                        <div class="text-xs text-slate-500">Bin: A-12-04</div>
                                    </td>
                                    <td class="px-6 py-4">Singapore HQ</td>
                                    <td class="px-6 py-4 text-right font-bold">142</td>
                                    <td class="px-6 py-4 text-right font-bold">138</td>
                                    <td class="px-6 py-4 text-right">
                                        <span class="font-bold text-red-600">-4</span>
                                    </td>
                                    <td class="px-6 py-4 text-right font-bold text-red-600">-$180</td>
                                    <td class="px-6 py-4">Oct 23, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold">Open</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showCreateAdjustmentModal()" class="text-primary hover:underline text-xs font-semibold">Investigate</button>
                                    </td>
                                </tr>

                                <tr class="hover:bg-slate-50 bg-orange-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary">DISC-2023-044</div>
                                    </td>
                                    <td class="px-6 py-4 font-mono font-bold text-slate-900">MN-400-S</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">UltraWide Monitor 34"</div>
                                        <div class="text-xs text-slate-500">Bin: B-08-01</div>
                                    </td>
                                    <td class="px-6 py-4">Singapore HQ</td>
                                    <td class="px-6 py-4 text-right font-bold">8</td>
                                    <td class="px-6 py-4 text-right font-bold">10</td>
                                    <td class="px-6 py-4 text-right">
                                        <span class="font-bold text-emerald-600">+2</span>
                                    </td>
                                    <td class="px-6 py-4 text-right font-bold text-emerald-600">+$778</td>
                                    <td class="px-6 py-4">Oct 22, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold">Under Review</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening discrepancy DISC-2023-044 details...', 'info')" class="text-primary hover:underline text-xs font-semibold">View Details</button>
                                    </td>
                                </tr>

                                <tr class="hover:bg-slate-50 bg-yellow-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary">DISC-2023-043</div>
                                    </td>
                                    <td class="px-6 py-4 font-mono font-bold text-slate-900">MS-ERG-01</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Ergo Mouse Pro</div>
                                        <div class="text-xs text-slate-500">Bin: C-01-02</div>
                                    </td>
                                    <td class="px-6 py-4">Malaysia North</td>
                                    <td class="px-6 py-4 text-right font-bold">50</td>
                                    <td class="px-6 py-4 text-right font-bold">48</td>
                                    <td class="px-6 py-4 text-right">
                                        <span class="font-bold text-red-600">-2</span>
                                    </td>
                                    <td class="px-6 py-4 text-right font-bold text-red-600">-$68</td>
                                    <td class="px-6 py-4">Oct 21, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs font-bold">Investigating</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening discrepancy DISC-2023-043 details...', 'info')" class="text-primary hover:underline text-xs font-semibold">View Details</button>
                                    </td>
                                </tr>

                                <tr class="hover:bg-slate-50 opacity-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-slate-500">DISC-2023-042</div>
                                    </td>
                                    <td class="px-6 py-4 font-mono font-bold text-slate-700">AUDIO-X2</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-700">Premium Headphones</div>
                                        <div class="text-xs text-slate-400">Bin: D-05-03</div>
                                    </td>
                                    <td class="px-6 py-4 text-slate-600">Singapore HQ</td>
                                    <td class="px-6 py-4 text-right font-bold text-slate-700">25</td>
                                    <td class="px-6 py-4 text-right font-bold text-slate-700">24</td>
                                    <td class="px-6 py-4 text-right">
                                        <span class="font-bold text-slate-500">-1</span>
                                    </td>
                                    <td class="px-6 py-4 text-right font-bold text-slate-500">-$35</td>
                                    <td class="px-6 py-4 text-slate-600">Oct 20, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold">Resolved</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening resolved discrepancy report...', 'info')" class="text-slate-400 hover:underline text-xs font-semibold">View Report</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0">
                        <div class="text-sm text-slate-500">
                            Open Discrepancies: <span class="font-bold text-red-600">12</span> • Total Value Impact: <span class="font-bold text-red-600">-$2,450</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                            <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
                        </div>
                    </div>
                </div>
            </div>


            <div id="warehouses" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Warehouses & Storage</h2>
                                <p class="text-slate-500 text-sm mt-1">Manage facilities, zones, and bin locations.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">map</span>
                                    3D Map View
                                </button>
                                <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    Add Warehouse
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div onclick="navigateTo('warehouse-detail')" class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 cursor-pointer hover:border-primary transition-colors">
                                <div class="flex items-start justify-between mb-4">
                                    <div>
                                        <h3 class="text-lg font-bold text-slate-900">Singapore HQ</h3>
                                        <p class="text-xs text-slate-500 mt-0.5">WH-01 • Primary DC</p>
                                    </div>
                                    <span class="text-xs font-bold bg-emerald-50 text-emerald-700 px-2 py-1 rounded">Active</span>
                                </div>

                                <div class="space-y-3 mb-4">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-500">Capacity</span>
                                        <span class="font-bold text-slate-900">82%</span>
                                    </div>
                                    <div class="w-full bg-slate-100 rounded-full h-2">
                                        <div class="bg-orange-500 h-2 rounded-full" style="width: 82%"></div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-2 pt-2">
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">Zones</div>
                                            <div class="text-lg font-bold text-slate-900">4</div>
                                        </div>
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">Bins</div>
                                            <div class="text-lg font-bold text-slate-900">120</div>
                                        </div>
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">SKUs</div>
                                            <div class="text-lg font-bold text-slate-900">890</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="pt-3 border-t border-slate-100">
                                    <p class="text-xs text-slate-500 mb-1">Address</p>
                                    <p class="text-sm text-slate-900">12 Logistics Avenue, Singapore 608847</p>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 cursor-pointer hover:border-primary transition-colors">
                                <div class="flex items-start justify-between mb-4">
                                    <div>
                                        <h3 class="text-lg font-bold text-slate-900">Malaysia North</h3>
                                        <p class="text-xs text-slate-500 mt-0.5">WH-02 • Regional Hub</p>
                                    </div>
                                    <span class="text-xs font-bold bg-emerald-50 text-emerald-700 px-2 py-1 rounded">Active</span>
                                </div>

                                <div class="space-y-3 mb-4">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-500">Capacity</span>
                                        <span class="font-bold text-emerald-600">45%</span>
                                    </div>
                                    <div class="w-full bg-slate-100 rounded-full h-2">
                                        <div class="bg-emerald-500 h-2 rounded-full" style="width: 45%"></div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-2 pt-2">
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">Zones</div>
                                            <div class="text-lg font-bold text-slate-900">3</div>
                                        </div>
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">Bins</div>
                                            <div class="text-lg font-bold text-slate-900">85</div>
                                        </div>
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">SKUs</div>
                                            <div class="text-lg font-bold text-slate-900">540</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="pt-3 border-t border-slate-100">
                                    <p class="text-xs text-slate-500 mb-1">Address</p>
                                    <p class="text-sm text-slate-900">45 Industrial Park, Penang 14000, MY</p>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 cursor-pointer hover:border-primary transition-colors">
                                <div class="flex items-start justify-between mb-4">
                                    <div>
                                        <h3 class="text-lg font-bold text-slate-900">Jakarta Hub</h3>
                                        <p class="text-xs text-slate-500 mt-0.5">HUB-04 • Fulfillment</p>
                                    </div>
                                    <span class="text-xs font-bold bg-emerald-50 text-emerald-700 px-2 py-1 rounded">Active</span>
                                </div>

                                <div class="space-y-3 mb-4">
                                    <div class="flex items-center justify-between text-sm">
                                        <span class="text-slate-500">Capacity</span>
                                        <span class="font-bold text-red-600">91%</span>
                                    </div>
                                    <div class="w-full bg-slate-100 rounded-full h-2">
                                        <div class="bg-red-500 h-2 rounded-full" style="width: 91%"></div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-2 pt-2">
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">Zones</div>
                                            <div class="text-lg font-bold text-slate-900">2</div>
                                        </div>
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">Bins</div>
                                            <div class="text-lg font-bold text-slate-900">60</div>
                                        </div>
                                        <div>
                                            <div class="text-xs text-slate-500 mb-1">SKUs</div>
                                            <div class="text-lg font-bold text-slate-900">320</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="pt-3 border-t border-slate-100">
                                    <p class="text-xs text-slate-500 mb-1">Address</p>
                                    <p class="text-sm text-slate-900">Jakarta Industrial Estate, JK 15410, ID</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-orange-600 text-[24px]">warning</span>
                                <div>
                                    <p class="text-sm font-bold text-orange-900 mb-1">Capacity Alert: Jakarta Hub</p>
                                    <p class="text-sm text-orange-700">Jakarta Hub is at 91% capacity. Consider transferring excess inventory or expanding storage.</p>
                                    <button onclick="navigateTo('transfers')" class="mt-2 text-sm text-orange-800 font-bold hover:underline">Create Stock Transfer →</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- SCREEN 13: Warehouse Detail -->
            <div id="warehouse-detail" class="view-section">
                <div class="flex h-full overflow-hidden">
                    <div class="flex-1 flex flex-col bg-slate-50 overflow-y-auto custom-scrollbar">
                        <div class="px-6 lg:px-8 py-6">
                            <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <button onclick="navigateTo('warehouses')" class="text-sm text-slate-500 hover:text-primary mb-2 flex items-center gap-1">
                                            <span class="material-symbols-outlined text-[16px]">arrow_back</span>
                                            Back to Warehouses
                                        </button>
                                        <h1 class="text-3xl font-bold text-slate-900">Singapore HQ</h1>
                                        <p class="text-slate-500 text-sm mt-1">WH-01 • Primary Distribution Center</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                            <span class="material-symbols-outlined text-[18px]">edit</span>
                                            Edit Details
                                        </button>
                                        <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                            <span class="material-symbols-outlined text-[18px]">map</span>
                                            3D Layout
                                        </button>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <div class="flex justify-between items-start mb-3">
                                            <span class="text-slate-500 text-xs font-bold uppercase">Capacity Used</span>
                                            <span class="material-symbols-outlined text-orange-500">analytics</span>
                                        </div>
                                        <div class="text-3xl font-bold text-orange-600 mb-2">82%</div>
                                        <div class="w-full bg-slate-100 rounded-full h-2">
                                            <div class="bg-orange-500 h-2 rounded-full" style="width: 82%"></div>
                                        </div>
                                    </div>

                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <div class="flex justify-between items-start mb-3">
                                            <span class="text-slate-500 text-xs font-bold uppercase">Total SKUs</span>
                                            <span class="material-symbols-outlined text-slate-300">inventory_2</span>
                                        </div>
                                        <div class="text-3xl font-bold text-slate-900">890</div>
                                        <p class="text-xs text-slate-500 mt-1">Across 4 zones</p>
                                    </div>

                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <div class="flex justify-between items-start mb-3">
                                            <span class="text-slate-500 text-xs font-bold uppercase">Active Bins</span>
                                            <span class="material-symbols-outlined text-blue-500">grid_view</span>
                                        </div>
                                        <div class="text-3xl font-bold text-slate-900">102/120</div>
                                        <p class="text-xs text-slate-500 mt-1">18 empty bins</p>
                                    </div>

                                    <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                        <div class="flex justify-between items-start mb-3">
                                            <span class="text-slate-500 text-xs font-bold uppercase">Staff</span>
                                            <span class="material-symbols-outlined text-emerald-500">group</span>
                                        </div>
                                        <div class="text-3xl font-bold text-slate-900">24</div>
                                        <p class="text-xs text-slate-500 mt-1">12 on shift now</p>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                    <div class="lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                        <h3 class="font-bold text-slate-900 mb-4">Zones & Bins</h3>
                                        <div class="space-y-4">
                                            <div class="border border-slate-200 rounded-lg p-4">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div>
                                                        <h4 class="font-bold text-slate-900">Zone A - High Velocity</h4>
                                                        <p class="text-xs text-slate-500">Fast-moving items, closest to shipping</p>
                                                    </div>
                                                    <span class="text-sm font-bold text-emerald-600">65% Full</span>
                                                </div>
                                                <div class="grid grid-cols-8 gap-2">
                                                    <div onclick="navigateTo('bin-detail')" class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">A-01</div>
                                                    <div onclick="navigateTo('bin-detail')" class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">A-02</div>
                                                    <div onclick="navigateTo('bin-detail')" class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">A-03</div>
                                                    <div class="aspect-square bg-slate-50 border border-slate-200 rounded flex items-center justify-center text-xs text-slate-400 cursor-pointer hover:bg-slate-100">A-04</div>
                                                    <div onclick="navigateTo('bin-detail')" class="aspect-square bg-orange-100 border border-orange-300 rounded flex items-center justify-center text-xs font-bold text-orange-700 cursor-pointer hover:bg-orange-200">A-05</div>
                                                    <div onclick="navigateTo('bin-detail')" class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">A-06</div>
                                                    <div onclick="navigateTo('bin-detail')" class="aspect-square bg-red-100 border border-red-300 rounded flex items-center justify-center text-xs font-bold text-red-700 cursor-pointer hover:bg-red-200">A-07</div>
                                                    <div onclick="navigateTo('bin-detail')" class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">A-08</div>
                                                </div>
                                                <div class="flex gap-3 mt-3 text-xs">
                                                    <div class="flex items-center gap-1">
                                                        <div class="w-3 h-3 bg-emerald-100 border border-emerald-300 rounded"></div>
                                                        <span class="text-slate-600">In Use</span>
                                                    </div>
                                                    <div class="flex items-center gap-1">
                                                        <div class="w-3 h-3 bg-orange-100 border border-orange-300 rounded"></div>
                                                        <span class="text-slate-600">Near Full</span>
                                                    </div>
                                                    <div class="flex items-center gap-1">
                                                        <div class="w-3 h-3 bg-red-100 border border-red-300 rounded"></div>
                                                        <span class="text-slate-600">Full</span>
                                                    </div>
                                                    <div class="flex items-center gap-1">
                                                        <div class="w-3 h-3 bg-slate-50 border border-slate-200 rounded"></div>
                                                        <span class="text-slate-600">Empty</span>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="border border-slate-200 rounded-lg p-4">
                                                <div class="flex items-center justify-between mb-3">
                                                    <div>
                                                        <h4 class="font-bold text-slate-900">Zone B - Medium Velocity</h4>
                                                        <p class="text-xs text-slate-500">Regular turnover items</p>
                                                    </div>
                                                    <span class="text-sm font-bold text-blue-600">78% Full</span>
                                                </div>
                                                <div class="grid grid-cols-8 gap-2">
                                                    <div class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">B-01</div>
                                                    <div class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">B-02</div>
                                                    <div class="aspect-square bg-orange-100 border border-orange-300 rounded flex items-center justify-center text-xs font-bold text-orange-700 cursor-pointer hover:bg-orange-200">B-03</div>
                                                    <div class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">B-04</div>
                                                    <div class="aspect-square bg-red-100 border border-red-300 rounded flex items-center justify-center text-xs font-bold text-red-700 cursor-pointer hover:bg-red-200">B-05</div>
                                                    <div class="aspect-square bg-emerald-100 border border-emerald-300 rounded flex items-center justify-center text-xs font-bold text-emerald-700 cursor-pointer hover:bg-emerald-200">B-06</div>
                                                    <div class="aspect-square bg-slate-50 border border-slate-200 rounded flex items-center justify-center text-xs text-slate-400 cursor-pointer hover:bg-slate-100">B-07</div>
                                                    <div class="aspect-square bg-slate-50 border border-slate-200 rounded flex items-center justify-center text-xs text-slate-400 cursor-pointer hover:bg-slate-100">B-08</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="space-y-4">
                                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5">
                                            <h3 class="font-bold text-slate-900 mb-4">Facility Info</h3>
                                            <div class="space-y-3 text-sm">
                                                <div>
                                                    <p class="text-xs text-slate-500 uppercase font-bold mb-1">Address</p>
                                                    <p class="text-slate-900">12 Logistics Avenue<br/>Singapore 608847</p>
                                                </div>
                                                <div>
                                                    <p class="text-xs text-slate-500 uppercase font-bold mb-1">Type</p>
                                                    <p class="text-slate-900">Primary DC</p>
                                                </div>
                                                <div>
                                                    <p class="text-xs text-slate-500 uppercase font-bold mb-1">Size</p>
                                                    <p class="text-slate-900">15,000 sq ft</p>
                                                </div>
                                                <div>
                                                    <p class="text-xs text-slate-500 uppercase font-bold mb-1">Manager</p>
                                                    <p class="text-slate-900">Sarah Chen</p>
                                                </div>
                                                <div>
                                                    <p class="text-xs text-slate-500 uppercase font-bold mb-1">Contact</p>
                                                    <p class="text-slate-900">+65 6123 4567</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-5">
                                            <h3 class="font-bold text-slate-900 mb-4">Recent Activity</h3>
                                            <div class="space-y-3">
                                                <div class="flex items-start gap-2">
                                                    <span class="w-2 h-2 rounded-full bg-green-500 mt-1.5"></span>
                                                    <div class="flex-1">
                                                        <p class="text-xs font-bold text-slate-900">Stock Received</p>
                                                        <p class="text-xs text-slate-500">GRN-4920 • 15m ago</p>
                                                    </div>
                                                </div>
                                                <div class="flex items-start gap-2">
                                                    <span class="w-2 h-2 rounded-full bg-blue-500 mt-1.5"></span>
                                                    <div class="flex-1">
                                                        <p class="text-xs font-bold text-slate-900">Transfer Out</p>
                                                        <p class="text-xs text-slate-500">TR-221 • 2h ago</p>
                                                    </div>
                                                </div>
                                                <div class="flex items-start gap-2">
                                                    <span class="w-2 h-2 rounded-full bg-purple-500 mt-1.5"></span>
                                                    <div class="flex-1">
                                                        <p class="text-xs font-bold text-slate-900">Cycle Count</p>
                                                        <p class="text-xs text-slate-500">Zone A • 4h ago</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 14: Receiving (GRN) -->
            <div id="receiving" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Goods Receipt (GRN)</h2>
                                <p class="text-xs text-slate-500 mt-1">Receive and put away incoming stock from purchase orders.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">filter_list</span>
                                    Filters
                                </button>
                                <button onclick="showCreateGRNModal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    Create GRN
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
                        <div class="relative">
                            <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                            <input type="text" placeholder="Search GRN #, PO #..." class="w-64 h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary"/>
                        </div>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Status: All</option>
                            <option>Draft</option>
                            <option>Received</option>
                            <option>QC Pending</option>
                            <option>Putaway Complete</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Warehouse: All</option>
                            <option>Singapore HQ</option>
                            <option>Malaysia North</option>
                        </select>
                        <div class="flex items-center gap-2 bg-white border border-slate-200 rounded-lg px-3 py-2">
                            <span class="material-symbols-outlined text-slate-400 text-[18px]">calendar_today</span>
                            <select class="text-sm border-0 p-0 focus:ring-0">
                                <option>Last 30 Days</option>
                                <option>Last 7 Days</option>
                                <option>This Month</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex-1 overflow-auto custom-scrollbar">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                                <tr>
                                    <th class="px-6 py-3">GRN #</th>
                                    <th class="px-6 py-3">PO Reference</th>
                                    <th class="px-6 py-3">Supplier</th>
                                    <th class="px-6 py-3">Receipt Date</th>
                                    <th class="px-6 py-3">Warehouse</th>
                                    <th class="px-6 py-3 text-right">Items</th>
                                    <th class="px-6 py-3 text-right">Total Qty</th>
                                    <th class="px-6 py-3">Status</th>
                                    <th class="px-6 py-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer" onclick="navigateTo('receiving-detail')">GRN-4920</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-blue-600 hover:underline cursor-pointer">PO-2023-001</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Acme Supplies Ltd</div>
                                        <div class="text-xs text-slate-500">Supplier #SUP-001</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 24, 2023</td>
                                    <td class="px-6 py-4">Singapore HQ</td>
                                    <td class="px-6 py-4 text-right">8</td>
                                    <td class="px-6 py-4 text-right font-bold">450</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold">Putaway Complete</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="navigateTo('receiving-detail')" class="text-primary hover:underline text-xs font-semibold">View</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 bg-blue-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">GRN-4919</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-blue-600 hover:underline cursor-pointer">PO-2023-002</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">TechParts Inc</div>
                                        <div class="text-xs text-slate-500">Supplier #SUP-045</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 24, 2023</td>
                                    <td class="px-6 py-4">Malaysia North</td>
                                    <td class="px-6 py-4 text-right">5</td>
                                    <td class="px-6 py-4 text-right font-bold">200</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs font-bold">QC Pending</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening Quality Control review...', 'info')" class="text-primary hover:underline text-xs font-semibold">Review QC</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 bg-yellow-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">GRN-4918</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-blue-600 hover:underline cursor-pointer">PO-2023-003</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Global Parts Co</div>
                                        <div class="text-xs text-slate-500">Supplier #SUP-112</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 23, 2023</td>
                                    <td class="px-6 py-4">Singapore HQ</td>
                                    <td class="px-6 py-4 text-right">12</td>
                                    <td class="px-6 py-4 text-right font-bold">850</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs font-bold">Draft</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Completing GRN draft...', 'success')" class="text-primary hover:underline text-xs font-semibold">Complete</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0">
                        <div class="text-sm text-slate-500">
                            Showing <span class="font-bold text-slate-900">1-10</span> of <span class="font-bold text-slate-900">156</span> receipts
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                            <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
                        </div>
                    </div>
                </div>
            </div>

          <!-- SCREEN 15: Putaway Rules -->
<div id="putaway-rules" class="view-section">
    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
        <div class="max-w-[1400px] mx-auto flex flex-col gap-6">
            <div class="flex justify-between items-start">
                <div>
                    <h2 class="text-2xl font-bold text-slate-900">Putaway Rules & Strategies</h2>
                    <p class="text-slate-500 text-sm mt-1">Define how incoming stock should be stored automatically.</p>
                </div>
                <button onclick="showAddPutawayRuleModal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                    <span class="material-symbols-outlined text-[18px]">add</span>
                    Add Rule
                </button>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <div class="flex items-start gap-3">
                    <span class="material-symbols-outlined text-blue-600 text-[24px]">info</span>
                    <div>
                        <p class="text-sm font-bold text-blue-900 mb-1">About Putaway Rules</p>
                        <p class="text-sm text-blue-700">Rules are evaluated in priority order. First matching rule determines bin assignment. Use conditions like item category, velocity, size, and warehouse zone.</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                <div class="px-6 py-4 bg-slate-50 border-b border-slate-200">
                    <h3 class="font-bold text-slate-900">Active Putaway Rules</h3>
                </div>
                <div class="divide-y divide-slate-100">
                    <div class="p-6 hover:bg-slate-50">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex items-start gap-3">
                                <div class="flex items-center gap-2">
                                    <span class="text-lg font-bold text-slate-400">#1</span>
                                    <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                </div>
                                <div>
                                    <h4 class="font-bold text-slate-900 mb-1">High Velocity Items → Zone A</h4>
                                    <p class="text-sm text-slate-600 mb-2">Fast-moving items (velocity ≥ 80%) go to Zone A, closest to packing area</p>
                                    <div class="flex gap-2 flex-wrap">
                                        <span class="text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded font-medium">IF: Velocity ≥ 80%</span>
                                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded font-medium">THEN: Assign Zone A</span>
                                        <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded font-medium">Priority: Nearest Empty</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="text-slate-400 hover:text-slate-600">
                                    <span class="material-symbols-outlined text-[20px]">edit</span>
                                </button>
                                <button class="text-slate-400 hover:text-red-600">
                                    <span class="material-symbols-outlined text-[20px]">delete</span>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 text-xs text-slate-500">
                            <span>Applied to: <strong class="text-slate-900">All Warehouses</strong></span>
                            <span>•</span>
                            <span>Last used: <strong>2h ago</strong></span>
                            <span>•</span>
                            <span>Success rate: <strong class="text-emerald-600">98%</strong></span>
                        </div>
                    </div>

                    <div class="p-6 hover:bg-slate-50">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex items-start gap-3">
                                <div class="flex items-center gap-2">
                                    <span class="text-lg font-bold text-slate-400">#2</span>
                                    <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                </div>
                                <div>
                                    <h4 class="font-bold text-slate-900 mb-1">Bulk Items → Zone C</h4>
                                    <p class="text-sm text-slate-600 mb-2">Large/heavy items assigned to ground-level bulk storage</p>
                                    <div class="flex gap-2 flex-wrap">
                                        <span class="text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded font-medium">IF: Weight > 20kg OR Volume > 0.5m³</span>
                                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded font-medium">THEN: Assign Zone C</span>
                                        <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded font-medium">Priority: Ground Level</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="text-slate-400 hover:text-slate-600">
                                    <span class="material-symbols-outlined text-[20px]">edit</span>
                                </button>
                                <button class="text-slate-400 hover:text-red-600">
                                    <span class="material-symbols-outlined text-[20px]">delete</span>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 text-xs text-slate-500">
                            <span>Applied to: <strong class="text-slate-900">Singapore HQ Only</strong></span>
                            <span>•</span>
                            <span>Last used: <strong>5h ago</strong></span>
                            <span>•</span>
                            <span>Success rate: <strong class="text-emerald-600">95%</strong></span>
                        </div>
                    </div>

                    <div class="p-6 hover:bg-slate-50">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex items-start gap-3">
                                <div class="flex items-center gap-2">
                                    <span class="text-lg font-bold text-slate-400">#3</span>
                                    <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                </div>
                                <div>
                                    <h4 class="font-bold text-slate-900 mb-1">Fragile Items → Upper Racks</h4>
                                    <p class="text-sm text-slate-600 mb-2">Delicate items stored on upper shelves away from heavy traffic</p>
                                    <div class="flex gap-2 flex-wrap">
                                        <span class="text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded font-medium">IF: Category = Fragile/Electronics</span>
                                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded font-medium">THEN: Assign Upper Shelves</span>
                                        <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded font-medium">Priority: Rack Level 3-4</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="text-slate-400 hover:text-slate-600">
                                    <span class="material-symbols-outlined text-[20px]">edit</span>
                                </button>
                                <button class="text-slate-400 hover:text-red-600">
                                    <span class="material-symbols-outlined text-[20px]">delete</span>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 text-xs text-slate-500">
                            <span>Applied to: <strong class="text-slate-900">All Warehouses</strong></span>
                            <span>•</span>
                            <span>Last used: <strong>1d ago</strong></span>
                            <span>•</span>
                            <span>Success rate: <strong class="text-emerald-600">100%</strong></span>
                        </div>
                    </div>

                    <div class="p-6 hover:bg-slate-50 opacity-50">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex items-start gap-3">
                                <div class="flex items-center gap-2">
                                    <span class="text-lg font-bold text-slate-400">#4</span>
                                    <span class="material-symbols-outlined text-slate-400">cancel</span>
                                </div>
                                <div>
                                    <h4 class="font-bold text-slate-900 mb-1">Seasonal Items → Zone D (Inactive)</h4>
                                    <p class="text-sm text-slate-600 mb-2">Low-demand seasonal stock stored in back area</p>
                                    <div class="flex gap-2 flex-wrap">
                                        <span class="text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded font-medium">IF: Tag = Seasonal</span>
                                        <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded font-medium">THEN: Assign Zone D</span>
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <button class="text-slate-400 hover:text-emerald-600">
                                    <span class="material-symbols-outlined text-[20px]">play_arrow</span>
                                </button>
                                <button class="text-slate-400 hover:text-slate-600">
                                    <span class="material-symbols-outlined text-[20px]">edit</span>
                                </button>
                                <button class="text-slate-400 hover:text-red-600">
                                    <span class="material-symbols-outlined text-[20px]">delete</span>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center gap-4 text-xs text-slate-500">
                            <span class="bg-slate-200 text-slate-700 px-2 py-0.5 rounded font-bold">INACTIVE</span>
                            <span>Last used: <strong>30d ago</strong></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white rounded-lg border border-slate-200 p-5">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-symbols-outlined text-emerald-500 text-[28px]">check_circle</span>
                        <div>
                            <div class="text-2xl font-bold text-slate-900">487</div>
                            <div class="text-xs text-slate-500 uppercase font-bold">Successful Assignments</div>
                        </div>
                    </div>
                    <p class="text-xs text-slate-600">Last 30 days</p>
                </div>

                <div class="bg-white rounded-lg border border-slate-200 p-5">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-symbols-outlined text-orange-500 text-[28px]">error</span>
                        <div>
                            <div class="text-2xl font-bold text-slate-900">12</div>
                            <div class="text-xs text-slate-500 uppercase font-bold">Manual Overrides</div>
                        </div>
                    </div>
                    <p class="text-xs text-slate-600">Rules bypassed by staff</p>
                </div>

                <div class="bg-white rounded-lg border border-slate-200 p-5">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="material-symbols-outlined text-blue-500 text-[28px]">speed</span>
                        <div>
                            <div class="text-2xl font-bold text-slate-900">97.5%</div>
                            <div class="text-xs text-slate-500 uppercase font-bold">Rule Accuracy</div>
                        </div>
                    </div>
                    <p class="text-xs text-slate-600">Optimal bin selection rate</p>
                </div>
            </div>
        </div>
    </div>
</div>


            <!-- SCREEN 16: Picking & Dispatch -->
            <div id="picking" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Picking & Dispatch</h2>
                                <p class="text-xs text-slate-500 mt-1">Outbound order fulfillment and shipment preparation.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">route</span>
                                    Optimize Routes
                                </button>
                                <button onclick="showCreatePickModal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    Create Pick List
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
                        <div class="relative">
                            <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                            <input type="text" placeholder="Search pick list, order..." class="w-64 h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary"/>
                        </div>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Status: All</option>
                            <option>Open</option>
                            <option>In Progress</option>
                            <option>Picked</option>
                            <option>Dispatched</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Priority: All</option>
                            <option>Urgent</option>
                            <option>High</option>
                            <option>Normal</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Assigned To: All</option>
                            <option>John Tan</option>
                            <option>Sarah Chen</option>
                            <option>Unassigned</option>
                        </select>
                    </div>

                    <div class="flex-1 overflow-auto custom-scrollbar">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                                <tr>
                                    <th class="px-6 py-3">
                                        <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                    </th>
                                    <th class="px-6 py-3">Pick List #</th>
                                    <th class="px-6 py-3">Order(s)</th>
                                    <th class="px-6 py-3">Customer</th>
                                    <th class="px-6 py-3">Created</th>
                                    <th class="px-6 py-3 text-right">Items</th>
                                    <th class="px-6 py-3">Assigned To</th>
                                    <th class="px-6 py-3">Priority</th>
                                    <th class="px-6 py-3">Status</th>
                                    <th class="px-6 py-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm">
                                <tr class="hover:bg-slate-50 bg-red-50">
                                    <td class="px-6 py-4">
                                        <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer" onclick="navigateTo('picking-detail')">PICK-2023-892</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-blue-600 hover:underline cursor-pointer">SO-2023-449</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Acme Corp</div>
                                        <div class="text-xs text-slate-500">Express Shipping</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 24, 10:30 AM</td>
                                    <td class="px-6 py-4 text-right font-bold">8</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">John Tan</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit">
                                            <span class="material-symbols-outlined text-[14px]">error</span>
                                            Urgent
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs font-bold">In Progress</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="navigateTo('picking-detail')" class="text-primary hover:underline text-xs font-semibold">Track</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4">
                                        <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">PICK-2023-891</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-blue-600 hover:underline cursor-pointer">SO-2023-448, SO-2023-447</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">TechStore Inc</div>
                                        <div class="text-xs text-slate-500">Standard Shipping</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 24, 09:15 AM</td>
                                    <td class="px-6 py-4 text-right font-bold">15</td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Sarah Chen</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="bg-slate-100 text-slate-700 px-2 py-1 rounded text-xs font-bold">Normal</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold">Picked</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening packing slip for PICK-2023-891...', 'info')" class="text-primary hover:underline text-xs font-semibold">Pack & Ship</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 bg-yellow-50">
                                    <td class="px-6 py-4">
                                        <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">PICK-2023-890</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-blue-600 hover:underline cursor-pointer">SO-2023-446</div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Global Retail</div>
                                        <div class="text-xs text-slate-500">Pickup</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 24, 08:00 AM</td>
                                    <td class="px-6 py-4 text-right font-bold">3</td>
                                    <td class="px-6 py-4">
                                        <span class="text-slate-400 italic">Unassigned</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold">High</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs font-bold">Open</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Assigning picker to PICK-2023-890...', 'info')" class="text-primary hover:underline text-xs font-semibold">Assign</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0">
                        <div class="text-sm text-slate-500">
                            Active Pick Lists: <span class="font-bold text-slate-900">23</span> • Urgent: <span class="font-bold text-red-600">4</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                            <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 17: Cycle Counts -->
            <div id="cycle-counts" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Cycle Counts</h2>
                                <p class="text-xs text-slate-500 mt-1">Ongoing physical inventory verification without full shutdown.</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">calendar_today</span>
                                    Schedule
                                </button>
                                <button onclick="showCreateCycleCountModal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    Start Count
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Status: All</option>
                            <option>Scheduled</option>
                            <option>In Progress</option>
                            <option>Completed</option>
                            <option>Variance Found</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Warehouse: All</option>
                            <option>Singapore HQ</option>
                            <option>Malaysia North</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Type: All</option>
                            <option>ABC Analysis</option>
                            <option>Random Sample</option>
                            <option>Full Count</option>
                        </select>
                    </div>

                    <div class="flex-1 overflow-auto custom-scrollbar">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                                <tr>
                                    <th class="px-6 py-3">Count #</th>
                                    <th class="px-6 py-3">Scheduled Date</th>
                                    <th class="px-6 py-3">Type</th>
                                    <th class="px-6 py-3">Warehouse / Zone</th>
                                    <th class="px-6 py-3 text-right">Items</th>
                                    <th class="px-6 py-3 text-right">Counted</th>
                                    <th class="px-6 py-3">Assigned To</th>
                                    <th class="px-6 py-3">Status</th>
                                    <th class="px-6 py-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm">
                                <tr class="hover:bg-slate-50 bg-blue-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">CC-2023-089</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 24, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs font-bold">ABC Analysis</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Singapore HQ</div>
                                        <div class="text-xs text-slate-500">Zone A</div>
                                    </td>
                                    <td class="px-6 py-4 text-right font-bold">45</td>
                                    <td class="px-6 py-4 text-right font-bold text-blue-600">32/45</td>
                                    <td class="px-6 py-4">John Tan</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs font-bold">In Progress</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Resuming cycle count CC-2023-089...', 'info')" class="text-primary hover:underline text-xs font-semibold">Continue</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 bg-red-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">CC-2023-088</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 23, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-slate-100 text-slate-700 px-2 py-1 rounded text-xs font-bold">Random Sample</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Malaysia North</div>
                                        <div class="text-xs text-slate-500">Zone B</div>
                                    </td>
                                    <td class="px-6 py-4 text-right font-bold">20</td>
                                    <td class="px-6 py-4 text-right font-bold text-emerald-600">20/20</td>
                                    <td class="px-6 py-4">Sarah Chen</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit">
                                            <span class="material-symbols-outlined text-[14px]">warning</span>
                                            Variance
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="navigateTo('adjustments')" class="text-primary hover:underline text-xs font-semibold">Review</button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-4">
                                        <div class="font-mono font-bold text-primary hover:underline cursor-pointer">CC-2023-087</div>
                                    </td>
                                    <td class="px-6 py-4">Oct 22, 2023</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs font-bold">ABC Analysis</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="font-medium text-slate-900">Singapore HQ</div>
                                        <div class="text-xs text-slate-500">Zone C</div>
                                    </td>
                                    <td class="px-6 py-4 text-right font-bold">30</td>
                                    <td class="px-6 py-4 text-right font-bold text-emerald-600">30/30</td>
                                    <td class="px-6 py-4">Mike Wong</td>
                                    <td class="px-6 py-4">
                                        <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold flex items-center gap-1 w-fit">
                                            <span class="material-symbols-outlined text-[14px]">check_circle</span>
                                            Completed
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button onclick="showNotification('Opening cycle count report CC-2023-028...', 'info')" class="text-primary hover:underline text-xs font-semibold">View Report</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0">
                        <div class="text-sm text-slate-500">
                            Active Counts: <span class="font-bold text-slate-900">3</span> • Variances: <span class="font-bold text-red-600">1</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                            <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                            <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 18: Reorder Automation -->
            <div id="reorder-automation" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900">Reorder Automation</h2>
                                <p class="text-slate-500 text-sm mt-1">AI-powered replenishment suggestions and PO drafting.</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigateTo('policy-config')" class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">settings</span>
                                    Configure Rules
                                </button>
                                <button onclick="openModal('create-po-modal')" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">shopping_cart</span>
                                    Bulk Create POs
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="bg-white p-5 rounded-xl border-2 border-red-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Urgent Reorders</span>
                                    <span class="material-symbols-outlined text-red-500">error</span>
                                </div>
                                <div class="text-3xl font-bold text-red-600 mb-1">8</div>
                                <p class="text-xs text-slate-600">Below safety stock now</p>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">AI Suggestions</span>
                                    <span class="material-symbols-outlined text-blue-500">psychology</span>
                                </div>
                                <div class="text-3xl font-bold text-blue-600 mb-1">24</div>
                                <p class="text-xs text-slate-600">Predicted stockouts</p>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Draft POs</span>
                                    <span class="material-symbols-outlined text-orange-500">draft</span>
                                </div>
                                <div class="text-3xl font-bold text-orange-600 mb-1">5</div>
                                <p class="text-xs text-slate-600">Awaiting approval</p>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Auto-Approved</span>
                                    <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                </div>
                                <div class="text-3xl font-bold text-emerald-600 mb-1">142</div>
                                <p class="text-xs text-slate-600">Last 30 days</p>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm">
                            <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between bg-slate-50">
                                <div>
                                    <h3 class="font-bold text-slate-900">Urgent Reorder Recommendations</h3>
                                    <p class="text-xs text-slate-500 mt-0.5">Items requiring immediate replenishment</p>
                                </div>
                                <button onclick="showNotification('8 Purchase Orders created and sent to suppliers!', 'success')" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold hover:bg-primary-hover">
                                    Approve All & Create POs
                                </button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left text-sm">
                                    <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                        <tr>
                                            <th class="px-6 py-3">
                                                <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                            </th>
                                            <th class="px-6 py-3">SKU</th>
                                            <th class="px-6 py-3">Item</th>
                                            <th class="px-6 py-3 text-right">Available</th>
                                            <th class="px-6 py-3 text-right">ROP</th>
                                            <th class="px-6 py-3 text-right">Suggested Qty</th>
                                            <th class="px-6 py-3">Supplier</th>
                                            <th class="px-6 py-3 text-right">Est. Cost</th>
                                            <th class="px-6 py-3">Priority</th>
                                            <th class="px-6 py-3">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-100">
                                        <tr class="hover:bg-red-50 bg-red-50">
                                            <td class="px-6 py-4">
                                                <input type="checkbox" checked class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                            </td>
                                            <td class="px-6 py-4 font-mono font-bold text-primary">SKU-9920</td>
                                            <td class="px-6 py-4">
                                                <div class="font-bold text-slate-900">Printer Ink Black</div>
                                                <div class="text-xs text-slate-500">Consumables</div>
                                            </td>
                                            <td class="px-6 py-4 text-right font-bold text-red-600">5</td>
                                            <td class="px-6 py-4 text-right text-slate-600">20</td>
                                            <td class="px-6 py-4 text-right">
                                                <input type="number" value="120" class="w-20 px-2 py-1 text-sm border border-slate-200 rounded text-right font-bold"/>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="font-medium text-slate-900">Acme Corp</div>
                                                <div class="text-xs text-slate-500">Lead time: 3 days</div>
                                            </td>
                                            <td class="px-6 py-4 text-right font-bold text-slate-900">$1,440</td>
                                            <td class="px-6 py-4">
                                                <span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-bold">Critical</span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <button onclick="showCreatePOModal()" class="px-3 py-1 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">Create PO</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-orange-50 bg-orange-50">
                                            <td class="px-6 py-4">
                                                <input type="checkbox" checked class="rounded border-slate-300 text-primary focus:ring-primary"/>
                                            </td>
                                            <td class="px-6 py-4 font-mono font-bold text-primary">WCH-001</td>
                                            <td class="px-6 py-4">
                                                <div class="font-bold text-slate-900">Wireless Charger</div>
                                                <div class="text-xs text-slate-500">Electronics</div>
                                            </td>
                                            <td class="px-6 py-4 text-right font-bold text-orange-600">4</td>
                                            <td class="px-6 py-4 text-right text-slate-600">15</td>
                                            <td class="px-6 py-4 text-right">
                                                <input type="number" value="50" class="w-20 px-2 py-1 text-sm border border-slate-200 rounded text-right font-bold"/>
                                            </td>
                                            <td class="px-6 py-4">
                                                <div class="font-medium text-slate-900">TechSupply Ltd</div>
                                                <div class="text-xs text-slate-500">Lead time: 5 days</div>
                                            </td>
                                            <td class="px-6 py-4 text-right font-bold text-slate-900">$950</td>
                                            <td class="px-6 py-4">
                                                <span class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold">High</span>
                                            </td>
                                            <td class="px-6 py-4">
                                                <button onclick="showCreatePOModal()" class="px-3 py-1 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">Create PO</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900 flex items-center gap-2">
                                        <span class="material-symbols-outlined text-blue-500">psychology</span>
                                        AI Forecast Insights
                                    </h3>
                                </div>
                                <div class="space-y-3">
                                    <div class="p-3 bg-blue-50 rounded-lg border border-blue-100">
                                        <p class="text-sm font-bold text-blue-900 mb-1">Predicted Stockout Risk</p>
                                        <p class="text-xs text-blue-700">SKU-4411: 85% probability of stockout within 7 days based on current sales velocity.</p>
                                        <button onclick="showNotification('Loading AI forecast details for SKU-4411...', 'info')" class="mt-2 text-xs text-blue-700 font-bold hover:underline">View Forecast Details →</button>
                                    </div>
                                    <div class="p-3 bg-emerald-50 rounded-lg border border-emerald-100">
                                        <p class="text-sm font-bold text-emerald-900 mb-1">Optimal Order Timing</p>
                                        <p class="text-xs text-emerald-700">Best reorder window detected for AUDIO-X2. Placing order now saves 12% vs emergency restocking.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Draft Purchase Orders</h3>
                                <div class="space-y-3">
                                    <div class="p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="font-mono font-bold text-primary">PO-DRAFT-445</div>
                                            <span class="text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded font-bold">Pending Approval</span>
                                        </div>
                                        <div class="text-sm text-slate-600 mb-2">Acme Corp • 8 items • $4,500</div>
                                        <div class="flex gap-2">
                                            <button onclick="showNotification('Purchase Order PO-DRAFT-445 approved and sent to supplier!', 'success')" class="flex-1 px-3 py-1.5 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">Approve & Send</button>
                                            <button onclick="showNotification('Opening PO-DRAFT-445 for editing...', 'info')" class="px-3 py-1.5 border border-slate-200 text-slate-700 text-xs font-semibold rounded hover:bg-slate-50">Edit</button>
                                        </div>
                                    </div>
                                    <div class="p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="font-mono font-bold text-primary">PO-DRAFT-444</div>
                                            <span class="text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded font-bold">Pending Approval</span>
                                        </div>
                                        <div class="text-sm text-slate-600 mb-2">TechSupply Ltd • 5 items • $2,850</div>
                                        <div class="flex gap-2">
                                            <button onclick="showNotification('Purchase Order PO-DRAFT-444 approved and sent to supplier!', 'success')" class="flex-1 px-3 py-1.5 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">Approve & Send</button>
                                            <button onclick="showNotification('Opening PO-DRAFT-444 for editing...', 'info')" class="px-3 py-1.5 border border-slate-200 text-slate-700 text-xs font-semibold rounded hover:bg-slate-50">Edit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 19: Policy Configuration -->
            <div id="policy-config" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1200px] mx-auto flex flex-col gap-6">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-900">Inventory Policy Configuration</h2>
                            <p class="text-slate-500 text-sm mt-1">Define reorder points, safety stock, and automation rules.</p>
                        </div>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-blue-600 text-[24px]">settings</span>
                                <div>
                                    <p class="text-sm font-bold text-blue-900 mb-1">Global vs Item-Level Policies</p>
                                    <p class="text-sm text-blue-700">Set system-wide defaults here. Override at item level from Item Master for exceptions.</p>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Reorder Point (ROP) Settings</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Calculation Method</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>Fixed ROP</option>
                                            <option selected>Dynamic (Lead Time × Daily Usage)</option>
                                            <option>AI-Predicted Demand</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Safety Stock Buffer (%)</label>
                                        <div class="flex items-center gap-3">
                                            <input type="range" min="0" max="50" value="20" class="flex-1"/>
                                            <span class="text-sm font-bold text-slate-900 w-12">20%</span>
                                        </div>
                                        <p class="text-xs text-slate-500 mt-1">Additional buffer above calculated ROP</p>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Default Lead Time (Days)</label>
                                        <input type="number" value="7" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Reorder Quantity (EOQ) Settings</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Order Quantity Method</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>Fixed Order Quantity</option>
                                            <option selected>Economic Order Quantity (EOQ)</option>
                                            <option>Period Order Quantity</option>
                                            <option>Min-Max</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Order Cost ($)</label>
                                        <input type="number" value="50" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                        <p class="text-xs text-slate-500 mt-1">Fixed cost per purchase order</p>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Carrying Cost (% per year)</label>
                                        <input type="number" value="25" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                        <p class="text-xs text-slate-500 mt-1">Annual inventory holding cost</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                            <h3 class="font-bold text-slate-900 mb-4">Automation Rules</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 border border-slate-200 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <input type="checkbox" id="auto-po" checked class="rounded border-slate-300 text-primary focus:ring-primary scale-125"/>
                                        <div>
                                            <label for="auto-po" class="font-bold text-slate-900 cursor-pointer">Auto-generate PO Drafts</label>
                                            <p class="text-xs text-slate-500 mt-0.5">Automatically create purchase order drafts when stock hits ROP</p>
                                        </div>
                                    </div>
                                    <span class="text-xs bg-emerald-50 text-emerald-700 px-2 py-1 rounded font-bold">ENABLED</span>
                                </div>

                                <div class="flex items-center justify-between p-4 border border-slate-200 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <input type="checkbox" id="auto-approve" class="rounded border-slate-300 text-primary focus:ring-primary scale-125"/>
                                        <div>
                                            <label for="auto-approve" class="font-bold text-slate-900 cursor-pointer">Auto-approve Low-Value POs</label>
                                            <p class="text-xs text-slate-500 mt-0.5">Skip approval for purchase orders under threshold</p>
                                        </div>
                                    </div>
                                    <span class="text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded font-bold">DISABLED</span>
                                </div>

                                <div class="flex items-center justify-between p-4 border border-slate-200 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <input type="checkbox" id="alert-low" checked class="rounded border-slate-300 text-primary focus:ring-primary scale-125"/>
                                        <div>
                                            <label for="alert-low" class="font-bold text-slate-900 cursor-pointer">Alert on Low Stock</label>
                                            <p class="text-xs text-slate-500 mt-0.5">Send email/SMS alerts when items reach ROP</p>
                                        </div>
                                    </div>
                                    <span class="text-xs bg-emerald-50 text-emerald-700 px-2 py-1 rounded font-bold">ENABLED</span>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-end gap-3">
                            <button onclick="showNotification('Policy configuration reset to defaults', 'info')" class="px-5 py-2 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Reset to Defaults</button>
                            <button onclick="showNotification('Policy configuration saved successfully!', 'success')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Save Configuration</button>
                        </div>
                    </div>
                </div>
            </div>

<!-- SCREEN 20: Items Master -->
<div id="items" class="view-section">
    <div class="flex-1 flex flex-col h-full bg-white">
        <div class="px-6 py-4 border-b border-slate-200 shrink-0">
            <div class="flex justify-between items-center">
                <div>
                    <h2 class="text-2xl font-bold text-slate-900">Items Master</h2>
                    <p class="text-xs text-slate-500 mt-1">Centralized catalog of all inventory items and SKUs.</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="showImportItemsModal()" class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                        <span class="material-symbols-outlined text-[18px]">upload_file</span>
                        Import Items
                    </button>
                    <button onclick="showAddItemModal()" class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover flex items-center gap-2">
                        <span class="material-symbols-outlined text-[18px]">add</span>
                        Add Item
                    </button>
                </div>
            </div>
        </div>

        <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center shrink-0">
            <div class="relative flex-1 min-w-[250px]">
                <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                <input type="text" placeholder="Search by SKU, name, barcode..." class="w-full h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary"/>
            </div>
            <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                <option>Category: All</option>
                <option>Electronics</option>
                <option>Mechanical</option>
                <option>Consumables</option>
            </select>
            <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                <option>Status: All</option>
                <option>Active</option>
                <option>Inactive</option>
                <option>Discontinued</option>
            </select>
            <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                <option>Type: All</option>
                <option>Finished Goods</option>
                <option>Raw Materials</option>
                <option>Components</option>
            </select>
        </div>

        <div class="flex-1 overflow-auto custom-scrollbar">
            <table class="w-full text-left">
                <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold sticky top-0">
                    <tr>
                        <th class="px-6 py-3">
                            <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                        </th>
                        <th class="px-6 py-3">SKU</th>
                        <th class="px-6 py-3">Item Name</th>
                        <th class="px-6 py-3">Category</th>
                        <th class="px-6 py-3">Barcode</th>
                        <th class="px-6 py-3 text-right">On Hand</th>
                        <th class="px-6 py-3 text-right">ROP</th>
                        <th class="px-6 py-3 text-right">Unit Cost</th>
                        <th class="px-6 py-3">Status</th>
                        <th class="px-6 py-3">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-100 text-sm">
                    <tr class="hover:bg-slate-50">
                        <td class="px-6 py-4">
                            <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                        </td>
                        <td class="px-6 py-4 font-mono font-bold text-primary hover:underline cursor-pointer" onclick="navigateTo('sku-detail')">KB-204-X</td>
                        <td class="px-6 py-4">
                            <div class="font-bold text-slate-900">Wireless Mech Keyboard</div>
                            <div class="text-xs text-slate-500">RGB Backlit, Cherry MX</div>
                        </td>
                        <td class="px-6 py-4">Electronics</td>
                        <td class="px-6 py-4 font-mono text-xs">89012399</td>
                        <td class="px-6 py-4 text-right font-bold">142</td>
                        <td class="px-6 py-4 text-right">50</td>
                        <td class="px-6 py-4 text-right">$45.00</td>
                        <td class="px-6 py-4">
                            <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold">Active</span>
                        </td>
                        <td class="px-6 py-4">
                            <button onclick="showNotification('Opening item KB-204-X for editing...', 'info')" class="text-primary hover:underline text-xs font-semibold">Edit</button>
                        </td>
                    </tr>
                    <tr class="hover:bg-slate-50">
                        <td class="px-6 py-4">
                            <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                        </td>
                        <td class="px-6 py-4 font-mono font-bold text-primary hover:underline cursor-pointer" onclick="navigateTo('sku-detail')">MN-400-S</td>
                        <td class="px-6 py-4">
                            <div class="font-bold text-slate-900">UltraWide Monitor 34"</div>
                            <div class="text-xs text-slate-500">3440x1440, 144Hz</div>
                        </td>
                        <td class="px-6 py-4">Electronics</td>
                        <td class="px-6 py-4 font-mono text-xs">77281900</td>
                        <td class="px-6 py-4 text-right font-bold text-orange-600">8</td>
                        <td class="px-6 py-4 text-right">15</td>
                        <td class="px-6 py-4 text-right">$389.00</td>
                        <td class="px-6 py-4">
                            <span class="bg-emerald-50 text-emerald-700 px-2 py-1 rounded text-xs font-bold">Active</span>
                        </td>
                        <td class="px-6 py-4">
                            <button onclick="showNotification('Opening item MN-400-S for editing...', 'info')" class="text-primary hover:underline text-xs font-semibold">Edit</button>
                        </td>
                    </tr>
                    <tr class="hover:bg-slate-50 opacity-50">
                        <td class="px-6 py-4">
                            <input type="checkbox" class="rounded border-slate-300 text-primary focus:ring-primary"/>
                        </td>
                        <td class="px-6 py-4 font-mono font-bold text-slate-400">MS-OLD-01</td>
                        <td class="px-6 py-4">
                            <div class="font-bold text-slate-600">Legacy Mouse v1</div>
                            <div class="text-xs text-slate-400">Discontinued model</div>
                        </td>
                        <td class="px-6 py-4 text-slate-500">Electronics</td>
                        <td class="px-6 py-4 font-mono text-xs text-slate-400">99887766</td>
                        <td class="px-6 py-4 text-right font-bold">0</td>
                        <td class="px-6 py-4 text-right text-slate-400">-</td>
                        <td class="px-6 py-4 text-right text-slate-400">$12.00</td>
                        <td class="px-6 py-4">
                            <span class="bg-slate-100 text-slate-500 px-2 py-1 rounded text-xs font-bold">Inactive</span>
                        </td>
                        <td class="px-6 py-4">
                            <button onclick="showNotification('Opening inactive item MS-OLD-01...', 'info')" class="text-slate-400 hover:underline text-xs font-semibold">View</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="px-6 py-4 border-t border-slate-200 flex items-center justify-between shrink-0">
            <div class="text-sm text-slate-500">
                Showing <span class="font-bold text-slate-900">1-10</span> of <span class="font-bold text-slate-900">2,450</span> items
            </div>
            <div class="flex items-center gap-2">
                <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Previous</button>
                <button class="px-3 py-1.5 text-sm font-bold bg-primary text-white rounded">1</button>
                <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">2</button>
                <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">3</button>
                <button class="px-3 py-1.5 text-sm font-medium border border-slate-200 rounded hover:bg-slate-50">Next</button>
            </div>
        </div>
    </div>
</div>
          <!-- SCREEN 21: Scan Barcodes -->
            <div id="scan-barcodes" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-slate-900">
                    <div class="px-6 py-4 border-b border-slate-700 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-xl font-bold text-white">Barcode Scanner</h1>
                                <p class="text-xs text-slate-400 mt-1">Scan items using USB scanner or camera</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigateTo('update-stock')" class="px-4 py-2 text-sm font-semibold text-slate-300 hover:text-white rounded-lg">Exit Scanner</button>
                                <button onclick="showNotification('Stock update posted successfully!', 'success')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Post Stock Update</button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 flex overflow-hidden">
                        <!-- Left: Scanner View -->
                        <div class="flex-1 flex flex-col items-center justify-center p-8 bg-slate-800 border-r border-slate-700">
                            <div class="w-full max-w-md">
                                <div class="bg-white rounded-2xl p-8 shadow-2xl mb-6">
                                    <div class="aspect-square bg-slate-100 rounded-xl flex items-center justify-center mb-4 relative overflow-hidden">
                                        <div class="absolute inset-0 flex items-center justify-center">
                                            <div class="w-64 h-64 border-4 border-primary rounded-xl opacity-50"></div>
                                        </div>
                                        <span class="material-symbols-outlined text-slate-300 text-[120px] relative z-10">qr_code_scanner</span>
                                        <div class="absolute top-1/2 left-0 right-0 h-0.5 bg-red-500 animate-pulse"></div>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-sm font-bold text-slate-900 mb-1">Ready to Scan</p>
                                        <p class="text-xs text-slate-500">Scan barcode or enter manually below</p>
                                    </div>
                                </div>

                                <div class="space-y-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-300 uppercase block mb-2">Manual Entry</label>
                                        <div class="flex gap-2">
                                            <input type="text" placeholder="Enter SKU or Barcode..." autofocus class="flex-1 px-4 py-3 text-lg font-mono bg-slate-700 border-2 border-slate-600 rounded-lg text-white placeholder-slate-500 focus:border-primary focus:ring-2 focus:ring-primary"/>
                                            <button class="px-6 py-3 bg-primary text-white rounded-lg font-bold hover:bg-primary-hover">
                                                <span class="material-symbols-outlined">add</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="flex items-center gap-3 text-sm text-slate-400">
                                        <div class="flex items-center gap-2">
                                            <div class="w-3 h-3 rounded-full bg-emerald-500 animate-pulse"></div>
                                            <span>USB Scanner Active</span>
                                        </div>
                                        <button onclick="showNotification('Switching to camera mode...', 'info')" class="text-primary hover:underline font-semibold">Switch to Camera</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right: Scanned Items List -->
                        <div class="w-[500px] flex flex-col bg-slate-900">
                            <div class="px-6 py-4 border-b border-slate-700">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-bold text-white">Scanned Items</h3>
                                    <span class="text-sm text-slate-400">Context: <strong class="text-white">WH-01</strong></span>
                                </div>
                            </div>

                            <div class="flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar">
                                <div class="bg-slate-800 rounded-lg p-4 border-2 border-emerald-500">
                                    <div class="flex items-start justify-between mb-2">
                                        <div class="flex-1">
                                            <div class="font-mono font-bold text-emerald-400 text-sm">KB-204-X</div>
                                            <div class="text-sm text-white mt-1">Wireless Mech Keyboard</div>
                                        </div>
                                        <button class="text-slate-400 hover:text-red-400">
                                            <span class="material-symbols-outlined text-[20px]">close</span>
                                        </button>
                                    </div>
                                    <div class="flex items-center gap-3 mt-3">
                                        <span class="text-xs text-slate-400">Qty:</span>
                                        <div class="flex items-center gap-2">
                                            <button class="w-8 h-8 rounded bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-white">
                                                <span class="material-symbols-outlined text-[18px]">remove</span>
                                            </button>
                                            <input type="number" value="1" class="w-16 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-center text-white font-bold"/>
                                            <button class="w-8 h-8 rounded bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-white">
                                                <span class="material-symbols-outlined text-[18px]">add</span>
                                            </button>
                                        </div>
                                        <div class="ml-auto">
                                            <input type="text" placeholder="Bin" value="A-12-04" class="w-20 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-xs font-mono text-white"/>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-xs text-emerald-400 flex items-center gap-1">
                                        <span class="material-symbols-outlined text-[14px]">check_circle</span>
                                        Just scanned
                                    </div>
                                </div>

                                <div class="bg-slate-800 rounded-lg p-4 border border-slate-700">
                                    <div class="flex items-start justify-between mb-2">
                                        <div class="flex-1">
                                            <div class="font-mono font-bold text-slate-300 text-sm">MN-400-S</div>
                                            <div class="text-sm text-slate-300 mt-1">UltraWide Monitor 34"</div>
                                        </div>
                                        <button class="text-slate-400 hover:text-red-400">
                                            <span class="material-symbols-outlined text-[20px]">close</span>
                                        </button>
                                    </div>
                                    <div class="flex items-center gap-3 mt-3">
                                        <span class="text-xs text-slate-400">Qty:</span>
                                        <div class="flex items-center gap-2">
                                            <button class="w-8 h-8 rounded bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-white">
                                                <span class="material-symbols-outlined text-[18px]">remove</span>
                                            </button>
                                            <input type="number" value="3" class="w-16 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-center text-white font-bold"/>
                                            <button class="w-8 h-8 rounded bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-white">
                                                <span class="material-symbols-outlined text-[18px]">add</span>
                                            </button>
                                        </div>
                                        <div class="ml-auto">
                                            <input type="text" placeholder="Bin" value="B-08-01" class="w-20 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-xs font-mono text-white"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-slate-800 rounded-lg p-4 border border-slate-700">
                                    <div class="flex items-start justify-between mb-2">
                                        <div class="flex-1">
                                            <div class="font-mono font-bold text-slate-300 text-sm">MS-ERG-01</div>
                                            <div class="text-sm text-slate-300 mt-1">Ergo Mouse Pro</div>
                                        </div>
                                        <button class="text-slate-400 hover:text-red-400">
                                            <span class="material-symbols-outlined text-[20px]">close</span>
                                        </button>
                                    </div>
                                    <div class="flex items-center gap-3 mt-3">
                                        <span class="text-xs text-slate-400">Qty:</span>
                                        <div class="flex items-center gap-2">
                                            <button class="w-8 h-8 rounded bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-white">
                                                <span class="material-symbols-outlined text-[18px]">remove</span>
                                            </button>
                                            <input type="number" value="12" class="w-16 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-center text-white font-bold"/>
                                            <button class="w-8 h-8 rounded bg-slate-700 hover:bg-slate-600 flex items-center justify-center text-white">
                                                <span class="material-symbols-outlined text-[18px]">add</span>
                                            </button>
                                        </div>
                                        <div class="ml-auto">
                                            <input type="text" placeholder="Bin" value="C-01-02" class="w-20 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-xs font-mono text-white"/>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="p-4 border-t border-slate-700 bg-slate-800">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm text-slate-400">Total Items Scanned</span>
                                    <span class="text-2xl font-bold text-white">3</span>
                                </div>
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-slate-400">Total Quantity</span>
                                    <span class="text-2xl font-bold text-white">16</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 22: Transfer Detail -->
            <div id="transfer-detail" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <button onclick="navigateTo('transfers')" class="text-sm text-slate-500 hover:text-primary mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">arrow_back</span>
                                    Back to Transfers
                                </button>
                                <div class="flex items-center gap-3">
                                    <h1 class="text-xl font-bold text-slate-900">Transfer #TR-2023-221</h1>
                                    <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm font-bold flex items-center gap-1">
                                        <span class="material-symbols-outlined text-[16px]">local_shipping</span>
                                        In Transit
                                    </span>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    Print Label
                                </button>
                                <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover">
                                    Mark as Received
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2 space-y-6">
                                <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm">
                                    <h3 class="font-bold text-slate-900 mb-4">Transfer Route</h3>
                                    <div class="flex items-center gap-4">
                                        <div class="flex-1">
                                            <div class="bg-emerald-50 border-2 border-emerald-500 rounded-lg p-4">
                                                <div class="flex items-center gap-2 mb-2">
                                                    <span class="material-symbols-outlined text-emerald-600">warehouse</span>
                                                    <span class="text-xs font-bold text-emerald-900 uppercase">Origin</span>
                                                </div>
                                                <div class="font-bold text-slate-900">Singapore HQ</div>
                                                <div class="text-xs text-slate-600 mt-1">WH-01 • Zone A</div>
                                            </div>
                                        </div>

                                        <div class="flex flex-col items-center gap-2">
                                            <span class="material-symbols-outlined text-blue-500 text-[32px] animate-pulse">arrow_forward</span>
                                            <div class="text-xs text-center">
                                                <div class="font-bold text-blue-600">In Transit</div>
                                                <div class="text-slate-500">ETA: Oct 25</div>
                                            </div>
                                        </div>

                                        <div class="flex-1">
                                            <div class="bg-slate-50 border-2 border-slate-300 rounded-lg p-4">
                                                <div class="flex items-center gap-2 mb-2">
                                                    <span class="material-symbols-outlined text-slate-400">location_on</span>
                                                    <span class="text-xs font-bold text-slate-500 uppercase">Destination</span>
                                                </div>
                                                <div class="font-bold text-slate-900">Malaysia North</div>
                                                <div class="text-xs text-slate-600 mt-1">WH-02 • Receiving</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm">
                                    <div class="px-6 py-4 bg-slate-50 border-b border-slate-200">
                                        <h3 class="font-bold text-slate-900">Items in Transfer</h3>
                                    </div>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-left text-sm">
                                            <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                                <tr>
                                                    <th class="px-6 py-3">SKU</th>
                                                    <th class="px-6 py-3">Item Name</th>
                                                    <th class="px-6 py-3">From Bin</th>
                                                    <th class="px-6 py-3">To Bin</th>
                                                    <th class="px-6 py-3 text-right">Qty</th>
                                                    <th class="px-6 py-3">Status</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-100">
                                                <tr>
                                                    <td class="px-6 py-3 font-mono font-bold text-primary">KB-204-X</td>
                                                    <td class="px-6 py-3">Wireless Mech Keyboard</td>
                                                    <td class="px-6 py-3 font-mono text-xs">A-12-04</td>
                                                    <td class="px-6 py-3 font-mono text-xs">RCV-01</td>
                                                    <td class="px-6 py-3 text-right font-bold">50</td>
                                                    <td class="px-6 py-3">
                                                        <span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold">Shipped</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="px-6 py-3 font-mono font-bold text-primary">MN-400-S</td>
                                                    <td class="px-6 py-3">UltraWide Monitor 34"</td>
                                                    <td class="px-6 py-3 font-mono text-xs">B-08-01</td>
                                                    <td class="px-6 py-3 font-mono text-xs">RCV-01</td>
                                                    <td class="px-6 py-3 text-right font-bold">12</td>
                                                    <td class="px-6 py-3">
                                                        <span class="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold">Shipped</span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm">
                                    <h3 class="font-bold text-slate-900 mb-4">Timeline</h3>
                                    <div class="space-y-4">
                                        <div class="flex gap-4">
                                            <div class="flex flex-col items-center">
                                                <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center">
                                                    <span class="material-symbols-outlined text-white text-[18px]">check</span>
                                                </div>
                                                <div class="flex-1 w-0.5 bg-emerald-500 my-1"></div>
                                            </div>
                                            <div class="flex-1 pb-4">
                                                <div class="font-bold text-slate-900">Transfer Created</div>
                                                <div class="text-xs text-slate-500">Oct 23, 2023 at 2:15 PM by Alex Morgan</div>
                                            </div>
                                        </div>

                                        <div class="flex gap-4">
                                            <div class="flex flex-col items-center">
                                                <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center">
                                                    <span class="material-symbols-outlined text-white text-[18px]">check</span>
                                                </div>
                                                <div class="flex-1 w-0.5 bg-emerald-500 my-1"></div>
                                            </div>
                                            <div class="flex-1 pb-4">
                                                <div class="font-bold text-slate-900">Items Picked</div>
                                                <div class="text-xs text-slate-500">Oct 23, 2023 at 3:45 PM by John Tan</div>
                                            </div>
                                        </div>

                                        <div class="flex gap-4">
                                            <div class="flex flex-col items-center">
                                                <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center animate-pulse">
                                                    <span class="material-symbols-outlined text-white text-[18px]">local_shipping</span>
                                                </div>
                                                <div class="flex-1 w-0.5 bg-slate-200 my-1"></div>
                                            </div>
                                            <div class="flex-1 pb-4">
                                                <div class="font-bold text-slate-900">In Transit</div>
                                                <div class="text-xs text-slate-500">Oct 23, 2023 at 5:00 PM • ETA: Oct 25, 2023</div>
                                            </div>
                                        </div>

                                        <div class="flex gap-4">
                                            <div class="flex flex-col items-center">
                                                <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center">
                                                    <span class="material-symbols-outlined text-slate-400 text-[18px]">check_circle</span>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="font-medium text-slate-400">Receive at Destination</div>
                                                <div class="text-xs text-slate-400">Pending</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div class="bg-white border border-slate-200 rounded-xl p-5 shadow-sm">
                                    <h3 class="font-bold text-slate-900 mb-4">Transfer Details</h3>
                                    <div class="space-y-3 text-sm">
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Transfer #</p>
                                            <p class="font-mono font-bold text-slate-900">TR-2023-221</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Created Date</p>
                                            <p class="text-slate-900">Oct 23, 2023</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Expected Delivery</p>
                                            <p class="text-slate-900">Oct 25, 2023</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Reason</p>
                                            <p class="text-slate-900">Stock Rebalancing</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Created By</p>
                                            <p class="text-slate-900">Alex Morgan</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white border border-slate-200 rounded-xl p-5 shadow-sm">
                                    <h3 class="font-bold text-slate-900 mb-4">Summary</h3>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span class="text-slate-500">Total Items</span>
                                            <span class="font-bold text-slate-900">2</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-slate-500">Total Quantity</span>
                                            <span class="font-bold text-slate-900">62</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-slate-500">Est. Value</span>
                                            <span class="font-bold text-slate-900">$6,918</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                    <div class="flex items-start gap-2">
                                        <span class="material-symbols-outlined text-blue-600 text-[20px]">info</span>
                                        <div>
                                            <p class="text-xs font-bold text-blue-900 mb-1">Tracking Info</p>
                                            <p class="text-xs text-blue-700 mb-2">Carrier: DHL Express<br/>Tracking: DHL8820449201</p>
                                            <a href="#" class="text-xs text-blue-700 font-bold hover:underline">Track Shipment →</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 23: Bin Detail -->
            <div id="bin-detail" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1400px] mx-auto flex flex-col gap-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <button onclick="navigateTo('warehouse-detail')" class="text-sm text-slate-500 hover:text-primary mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">arrow_back</span>
                                    Back to Warehouse
                                </button>
                                <div class="flex items-center gap-3">
                                    <h1 class="text-3xl font-bold text-slate-900">Bin A-12-04</h1>
                                    <span class="bg-orange-100 text-orange-700 px-3 py-1 rounded text-sm font-bold">87% Full</span>
                                </div>
                                <p class="text-slate-500 text-sm mt-1">Singapore HQ • Zone A • Shelf 12 • Position 04</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    Print Label
                                </button>
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    Edit Bin
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Capacity Used</span>
                                    <span class="material-symbols-outlined text-orange-500">inventory_2</span>
                                </div>
                                <div class="text-3xl font-bold text-orange-600 mb-2">87%</div>
                                <div class="w-full bg-slate-100 rounded-full h-2">
                                    <div class="bg-orange-500 h-2 rounded-full" style="width: 87%"></div>
                                </div>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">SKUs</span>
                                    <span class="material-symbols-outlined text-blue-500">category</span>
                                </div>
                                <div class="text-3xl font-bold text-slate-900">4</div>
                                <p class="text-xs text-slate-500 mt-1">Different items</p>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Total Units</span>
                                    <span class="material-symbols-outlined text-slate-300">package</span>
                                </div>
                                <div class="text-3xl font-bold text-slate-900">142</div>
                                <p class="text-xs text-slate-500 mt-1">Physical count</p>
                            </div>

                            <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase">Last Count</span>
                                    <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                </div>
                                <div class="text-lg font-bold text-slate-900">Oct 22, 2023</div>
                                <p class="text-xs text-emerald-600 mt-1">Verified ✓</p>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm">
                            <div class="px-6 py-4 border-b border-slate-200">
                                <h3 class="font-bold text-slate-900">Items in Bin</h3>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full text-left text-sm">
                                    <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                        <tr>
                                            <th class="px-6 py-3">SKU</th>
                                            <th class="px-6 py-3">Item Name</th>
                                            <th class="px-6 py-3">Category</th>
                                            <th class="px-6 py-3 text-right">Qty in Bin</th>
                                            <th class="px-6 py-3 text-right">Unit Size</th>
                                            <th class="px-6 py-3">Last Movement</th>
                                            <th class="px-6 py-3">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-slate-100">
                                        <tr class="hover:bg-slate-50">
                                            <td class="px-6 py-4 font-mono font-bold text-primary hover:underline cursor-pointer" onclick="navigateTo('sku-detail')">KB-204-X</td>
                                            <td class="px-6 py-4">
                                                <div class="font-bold text-slate-900">Wireless Mech Keyboard</div>
                                                <div class="text-xs text-slate-500">Electronics</div>
                                            </td>
                                            <td class="px-6 py-4">Peripherals</td>
                                            <td class="px-6 py-4 text-right font-bold text-slate-900">100</td>
                                            <td class="px-6 py-4 text-right text-slate-600">0.02 m³</td>
                                            <td class="px-6 py-4 text-slate-600">2h ago</td>
                                            <td class="px-6 py-4">
                                                <button onclick="showCreateTransferModal()" class="text-primary hover:underline text-xs font-semibold">Move</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-slate-50">
                                            <td class="px-6 py-4 font-mono font-bold text-primary hover:underline cursor-pointer">MS-ERG-01</td>
                                            <td class="px-6 py-4">
                                                <div class="font-bold text-slate-900">Ergo Mouse Pro</div>
                                                <div class="text-xs text-slate-500">Electronics</div>
                                            </td>
                                            <td class="px-6 py-4">Peripherals</td>
                                            <td class="px-6 py-4 text-right font-bold text-slate-900">42</td>
                                            <td class="px-6 py-4 text-right text-slate-600">0.005 m³</td>
                                            <td class="px-6 py-4 text-slate-600">1d ago</td>
                                            <td class="px-6 py-4">
                                                <button onclick="showCreateTransferModal()" class="text-primary hover:underline text-xs font-semibold">Move</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Bin Properties</h3>
                                <div class="space-y-3 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-slate-500">Max Capacity</span>
                                        <span class="font-bold text-slate-900">2.5 m³</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-500">Used Capacity</span>
                                        <span class="font-bold text-orange-600">2.17 m³</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-500">Weight Limit</span>
                                        <span class="font-bold text-slate-900">500 kg</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-500">Current Weight</span>
                                        <span class="font-bold text-slate-900">285 kg</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-500">Zone Type</span>
                                        <span class="font-bold text-slate-900">High Velocity</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-500">Access Level</span>
                                        <span class="font-bold text-slate-900">Ground Floor</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Recent Activity</h3>
                                <div class="space-y-3">
                                    <div class="flex items-start gap-3">
                                        <span class="w-2 h-2 rounded-full bg-emerald-500 mt-1.5"></span>
                                        <div class="flex-1">
                                            <p class="text-sm font-bold text-slate-900">Putaway</p>
                                            <p class="text-xs text-slate-500">50 units KB-204-X added • 2h ago</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-3">
                                        <span class="w-2 h-2 rounded-full bg-orange-500 mt-1.5"></span>
                                        <div class="flex-1">
                                            <p class="text-sm font-bold text-slate-900">Pick</p>
                                            <p class="text-xs text-slate-500">8 units MS-ERG-01 removed • 1d ago</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-3">
                                        <span class="w-2 h-2 rounded-full bg-purple-500 mt-1.5"></span>
                                        <div class="flex-1">
                                            <p class="text-sm font-bold text-slate-900">Cycle Count</p>
                                            <p class="text-xs text-slate-500">Count verified • 2d ago</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 24: Review & Post -->
            <div id="review-post" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 lg:px-8 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-xl font-bold text-slate-900">Review & Post Stock Update</h1>
                                <p class="text-xs text-slate-500 mt-1">Final validation before posting to inventory ledger.</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigateTo('upload-document')" class="px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 rounded-lg">Back</button>
                                <button onclick="showNotification('Draft saved successfully!', 'success')" class="px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 shadow-sm">Save Draft</button>
                                <button onclick="showNotification('Stock update posted to ledger successfully!', 'success')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Post to Ledger</button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-6xl mx-auto">
                            <div class="flex items-center justify-center mb-8">
                                <div class="flex items-center gap-8">
                                    <div class="flex items-center gap-3">
                                        <div class="size-8 rounded-full bg-emerald-500 text-white flex items-center justify-center font-bold">
                                            <span class="material-symbols-outlined text-[18px]">check</span>
                                        </div>
                                        <span class="font-bold text-sm text-emerald-600">Step 1: Upload</span>
                                    </div>
                                    <div class="w-20 h-0.5 bg-emerald-500"></div>
                                    <div class="flex items-center gap-3">
                                        <div class="size-8 rounded-full bg-emerald-500 text-white flex items-center justify-center font-bold">
                                            <span class="material-symbols-outlined text-[18px]">check</span>
                                        </div>
                                        <span class="font-bold text-sm text-emerald-600">Step 2: Mapping</span>
                                    </div>
                                    <div class="w-20 h-0.5 bg-emerald-500"></div>
                                    <div class="flex items-center gap-3">
                                        <div class="size-8 rounded-full bg-primary text-white flex items-center justify-center font-bold">3</div>
                                        <span class="font-bold text-sm text-primary">Step 3: Review</span>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                <div class="lg:col-span-2 space-y-6">
                                    <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-emerald-600 text-[24px]">check_circle</span>
                                            <div>
                                                <p class="text-sm font-bold text-emerald-900 mb-1">Validation Complete</p>
                                                <p class="text-sm text-emerald-700">All 245 records validated successfully. Ready to post to inventory ledger.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-white border border-slate-200 rounded-lg p-6">
                                        <h3 class="font-bold text-slate-900 mb-4">Update Summary</h3>
                                        <div class="space-y-4">
                                            <div>
                                                <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Target Warehouse</label>
                                                <div class="px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium text-slate-900">
                                                    Singapore HQ (WH-01)
                                                </div>
                                            </div>
                                            <div>
                                                <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Update Type</label>
                                                <div class="px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium text-slate-900">
                                                    Stock Receipt
                                                </div>
                                            </div>
                                            <div>
                                                <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Reference Document</label>
                                                <div class="px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-medium text-slate-900">
                                                    VendorStock_Jan.xlsx
                                                </div>
                                            </div>
                                            <div>
                                                <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Posting Date</label>
                                                <input type="date" value="2023-10-24" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                            </div>
                                            <div>
                                                <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Internal Notes</label>
                                                <textarea rows="3" placeholder="Optional notes for audit trail..." class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"></textarea>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-white border border-slate-200 rounded-lg overflow-hidden">
                                        <div class="px-6 py-4 bg-slate-50 border-b border-slate-200 font-bold text-sm text-slate-900">
                                            Items to Post (Showing 5 of 245)
                                        </div>
                                        <div class="overflow-x-auto">
                                            <table class="w-full text-left text-xs">
                                                <thead class="bg-slate-50 border-b border-slate-200">
                                                    <tr>
                                                        <th class="px-4 py-3 text-left font-bold text-slate-500">SKU</th>
                                                        <th class="px-4 py-3 text-left font-bold text-slate-500">ITEM</th>
                                                        <th class="px-4 py-3 text-left font-bold text-slate-500">BIN</th>
                                                        <th class="px-4 py-3 text-right font-bold text-slate-500">QTY</th>
                                                        <th class="px-4 py-3 text-center font-bold text-slate-500">STATUS</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="divide-y divide-slate-100">
                                                    <tr>
                                                        <td class="px-4 py-3 font-mono font-bold">MX-990-BL</td>
                                                        <td class="px-4 py-3">MaxTrak Pro</td>
                                                        <td class="px-4 py-3 font-mono">A-12-04</td>
                                                        <td class="px-4 py-3 text-right font-bold">1,200</td>
                                                        <td class="px-4 py-3 text-center"><span class="bg-emerald-50 text-emerald-700 px-2 py-0.5 rounded font-bold">Valid</span></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="px-4 py-3 font-mono font-bold">CB-112-RD</td>
                                                        <td class="px-4 py-3">CoreBelt 112mm</td>
                                                        <td class="px-4 py-3 font-mono">B-08-01</td>
                                                        <td class="px-4 py-3 text-right font-bold">450</td>
                                                        <td class="px-4 py-3 text-center"><span class="bg-emerald-50 text-emerald-700 px-2 py-0.5 rounded font-bold">Valid</span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="px-4 py-3 bg-slate-50 border-t border-slate-200 text-center">
                                            <button onclick="showNotification('Loading all 245 records...', 'info')" class="text-xs text-primary font-semibold hover:underline">View All 245 Records →</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="space-y-4">
                                    <div class="bg-white border border-slate-200 rounded-lg p-5">
                                        <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                                            <span class="material-symbols-outlined text-primary text-[20px]">analytics</span>
                                            Impact Analysis
                                        </h3>
                                        <div class="space-y-3">
                                            <div class="text-center p-4 bg-emerald-50 rounded-lg">
                                                <div class="text-3xl font-bold text-emerald-600 mb-1">245</div>
                                                <p class="text-xs font-bold text-emerald-900 uppercase">SKUs to Update</p>
                                            </div>
                                            <div class="text-center p-4 bg-blue-50 rounded-lg">
                                                <div class="text-3xl font-bold text-blue-600 mb-1">+15,420</div>
                                                <p class="text-xs font-bold text-blue-900 uppercase">Net Quantity Change</p>
                                            </div>
                                            <div class="p-3 bg-slate-50 rounded-lg">
                                                <p class="text-xs font-bold text-slate-700 mb-1">Estimated Value Impact</p>
                                                <p class="text-2xl font-bold text-slate-900">$245,890</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-white border border-slate-200 rounded-lg p-5">
                                        <h3 class="font-bold text-slate-900 mb-3 text-sm">Pre-Post Checklist</h3>
                                        <div class="space-y-2">
                                            <div class="flex items-center gap-2">
                                                <span class="material-symbols-outlined text-emerald-500 text-[18px]">check_circle</span>
                                                <span class="text-xs text-slate-700">All records validated</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <span class="material-symbols-outlined text-emerald-500 text-[18px]">check_circle</span>
                                                <span class="text-xs text-slate-700">Warehouse confirmed</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <span class="material-symbols-outlined text-emerald-500 text-[18px]">check_circle</span>
                                                <span class="text-xs text-slate-700">Bin locations verified</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <span class="material-symbols-outlined text-emerald-500 text-[18px]">check_circle</span>
                                                <span class="text-xs text-slate-700">No duplicate entries</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <span class="material-symbols-outlined text-orange-500 text-[18px]">info</span>
                                                <span class="text-xs text-slate-700">Manager approval: Pending</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                                        <div class="flex items-start gap-2">
                                            <span class="material-symbols-outlined text-orange-600 text-[20px]">warning</span>
                                            <div>
                                                <p class="text-xs font-bold text-orange-900 mb-1">Important</p>
                                                <p class="text-xs text-orange-700">This action will create 245 ledger entries and cannot be undone. Verify all data before posting.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 25: Approval (Adjustment) -->
            <div id="approval-adjustment" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <button onclick="navigateTo('adjustments')" class="text-sm text-slate-500 hover:text-primary mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">arrow_back</span>
                                    Back to Adjustments
                                </button>
                                <div class="flex items-center gap-3">
                                    <h1 class="text-xl font-bold text-slate-900">Adjustment #ADJ-2023-887</h1>
                                    <span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded text-sm font-bold">Pending Approval</span>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-red-300 text-red-700 rounded-lg text-sm font-semibold shadow-sm hover:bg-red-50">
                                    Reject
                                </button>
                                <button class="px-5 py-2 bg-emerald-600 text-white text-sm font-bold rounded-lg hover:bg-emerald-700 shadow-sm">
                                    Approve & Post
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-5xl mx-auto space-y-6">
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                                <div class="flex items-start gap-3">
                                    <span class="material-symbols-outlined text-yellow-600 text-[24px]">pending</span>
                                    <div>
                                        <p class="text-sm font-bold text-yellow-900 mb-1">Approval Required</p>
                                        <p class="text-sm text-yellow-700">This adjustment requires manager approval before posting to ledger. Review the details below and approve or reject.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-white border border-slate-200 rounded-lg p-6">
                                    <h3 class="font-bold text-slate-900 mb-4">Adjustment Details</h3>
                                    <div class="space-y-3 text-sm">
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Adjustment #</p>
                                            <p class="font-mono font-bold text-slate-900">ADJ-2023-887</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Date</p>
                                            <p class="text-slate-900">Oct 21, 2023</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Warehouse</p>
                                            <p class="text-slate-900">Singapore HQ (WH-01)</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Reason</p>
                                            <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs font-bold">System Error</span>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Created By</p>
                                            <p class="text-slate-900">System (Auto-Generated)</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white border border-slate-200 rounded-lg p-6">
                                    <h3 class="font-bold text-slate-900 mb-4">Impact Summary</h3>
                                    <div class="space-y-3">
                                        <div class="p-3 bg-emerald-50 rounded-lg">
                                            <p class="text-xs font-bold text-emerald-900 mb-1">Net Change</p>
                                            <p class="text-2xl font-bold text-emerald-600">+8 units</p>
                                        </div>
                                        <div class="space-y-2 text-sm">
                                            <div class="flex justify-between">
                                                <span class="text-slate-500">Items Affected</span>
                                                <span class="font-bold text-slate-900">2</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-slate-500">Est. Value</span>
                                                <span class="font-bold text-slate-900">$420</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg overflow-hidden">
                                <div class="px-6 py-4 bg-slate-50 border-b border-slate-200 font-bold text-slate-900">
                                    Adjustment Items
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                            <tr>
                                                <th class="px-6 py-3">SKU</th>
                                                <th class="px-6 py-3">Item Name</th>
                                                <th class="px-6 py-3 text-right">Current Qty</th>
                                                <th class="px-6 py-3 text-right">Adjusted Qty</th>
                                                <th class="px-6 py-3 text-right">Change</th>
                                                <th class="px-6 py-3">Reason</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr>
                                                <td class="px-6 py-4 font-mono font-bold text-primary">KB-204-X</td>
                                                <td class="px-6 py-4">Wireless Mech Keyboard</td>
                                                <td class="px-6 py-4 text-right font-bold">142</td>
                                                <td class="px-6 py-4 text-right font-bold">147</td>
                                                <td class="px-6 py-4 text-right font-bold text-emerald-600">+5</td>
                                                <td class="px-6 py-4 text-xs">Duplicate entry correction</td>
                                            </tr>
                                            <tr>
                                                <td class="px-6 py-4 font-mono font-bold text-primary">MN-400-S</td>
                                                <td class="px-6 py-4">UltraWide Monitor 34"</td>
                                                <td class="px-6 py-4 text-right font-bold">8</td>
                                                <td class="px-6 py-4 text-right font-bold">11</td>
                                                <td class="px-6 py-4 text-right font-bold text-emerald-600">+3</td>
                                                <td class="px-6 py-4 text-xs">Missing ledger entries found</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <h3 class="font-bold text-slate-900 mb-4">System Notes</h3>
                                <div class="space-y-3">
                                    <div class="p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                        <p class="text-xs font-bold text-blue-900 mb-1">Automated Detection</p>
                                        <p class="text-xs text-blue-700">System detected discrepancy during nightly reconciliation process. Two ledger entries were missing for shipments processed on Oct 20, 2023.</p>
                                    </div>
                                    <div class="p-3 bg-purple-50 rounded-lg border-l-4 border-purple-500">
                                        <p class="text-xs font-bold text-purple-900 mb-1">Root Cause Analysis</p>
                                        <p class="text-xs text-purple-700">Network timeout during shipment processing caused ledger write failure. Items were physically shipped but system stock was not decremented. This adjustment corrects the discrepancy.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Approval Action</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Approval Comments</label>
                                        <textarea rows="4" placeholder="Add comments for audit trail (optional)..." class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"></textarea>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <input type="checkbox" id="confirm-approval" class="rounded border-slate-300 text-primary focus:ring-primary scale-125"/>
                                        <label for="confirm-approval" class="text-sm text-slate-700">I have reviewed all details and approve this adjustment</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 26: Receiving Detail -->
            <div id="receiving-detail" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <button onclick="navigateTo('receiving')" class="text-sm text-slate-500 hover:text-primary mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">arrow_back</span>
                                    Back to GRN List
                                </button>
                                <div class="flex items-center gap-3">
                                    <h1 class="text-xl font-bold text-slate-900">GRN #GRN-4920</h1>
                                    <span class="bg-emerald-50 text-emerald-700 px-3 py-1 rounded text-sm font-bold">Putaway Complete</span>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    Print GRN
                                </button>
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    View PO
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2 space-y-6">
                                <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm">
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="font-bold text-slate-900">PO vs Received</h3>
                                        <span class="text-xs bg-emerald-50 text-emerald-700 px-2 py-1 rounded font-bold">100% Match</span>
                                    </div>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-left text-sm">
                                            <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                                <tr>
                                                    <th class="px-4 py-3">SKU</th>
                                                    <th class="px-4 py-3">Item</th>
                                                    <th class="px-4 py-3 text-right">PO Qty</th>
                                                    <th class="px-4 py-3 text-right">Received</th>
                                                    <th class="px-4 py-3">Bin</th>
                                                    <th class="px-4 py-3">Status</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-slate-100">
                                                <tr>
                                                    <td class="px-4 py-3 font-mono font-bold text-primary">KB-204-X</td>
                                                    <td class="px-4 py-3">Wireless Keyboard</td>
                                                    <td class="px-4 py-3 text-right font-bold">50</td>
                                                    <td class="px-4 py-3 text-right font-bold text-emerald-600">50</td>
                                                    <td class="px-4 py-3 font-mono text-xs">A-12-04</td>
                                                    <td class="px-4 py-3">
                                                        <span class="bg-emerald-50 text-emerald-700 px-2 py-0.5 rounded text-xs font-bold">✓ Match</span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm">
                                    <h3 class="font-bold text-slate-900 mb-4">Timeline</h3>
                                    <div class="space-y-4">
                                        <div class="flex gap-4">
                                            <div class="flex flex-col items-center">
                                                <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center">
                                                    <span class="material-symbols-outlined text-white text-[18px]">check</span>
                                                </div>
                                                <div class="flex-1 w-0.5 bg-emerald-500 my-1"></div>
                                            </div>
                                            <div class="flex-1 pb-4">
                                                <div class="font-bold text-slate-900">Goods Received</div>
                                                <div class="text-xs text-slate-500">Oct 24, 2023 at 9:30 AM</div>
                                            </div>
                                        </div>

                                        <div class="flex gap-4">
                                            <div class="flex flex-col items-center">
                                                <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center">
                                                    <span class="material-symbols-outlined text-white text-[18px]">check</span>
                                                </div>
                                                <div class="flex-1 w-0.5 bg-emerald-500 my-1"></div>
                                            </div>
                                            <div class="flex-1 pb-4">
                                                <div class="font-bold text-slate-900">QC Passed</div>
                                                <div class="text-xs text-slate-500">Oct 24, 2023 at 10:15 AM</div>
                                            </div>
                                        </div>

                                        <div class="flex gap-4">
                                            <div class="flex flex-col items-center">
                                                <div class="w-8 h-8 rounded-full bg-emerald-500 flex items-center justify-center">
                                                    <span class="material-symbols-outlined text-white text-[18px]">check</span>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="font-bold text-slate-900">Putaway Complete</div>
                                                <div class="text-xs text-slate-500">Oct 24, 2023 at 11:00 AM by John Tan</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div class="bg-white border border-slate-200 rounded-xl p-5 shadow-sm">
                                    <h3 class="font-bold text-slate-900 mb-4">GRN Details</h3>
                                    <div class="space-y-3 text-sm">
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">GRN #</p>
                                            <p class="font-mono font-bold text-slate-900">GRN-4920</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">PO Reference</p>
                                            <p class="text-blue-600 hover:underline cursor-pointer font-bold">PO-2023-001</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Supplier</p>
                                            <p class="text-slate-900">Acme Supplies Ltd</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Receipt Date</p>
                                            <p class="text-slate-900">Oct 24, 2023</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Warehouse</p>
                                            <p class="text-slate-900">Singapore HQ</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Received By</p>
                                            <p class="text-slate-900">Sarah Chen</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white border border-slate-200 rounded-xl p-5 shadow-sm">
                                    <h3 class="font-bold text-slate-900 mb-4">Summary</h3>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span class="text-slate-500">Total Items</span>
                                            <span class="font-bold text-slate-900">8</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-slate-500">Total Quantity</span>
                                            <span class="font-bold text-slate-900">450</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-slate-500">PO Value</span>
                                            <span class="font-bold text-slate-900">$8,450</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                                    <div class="flex items-start gap-2">
                                        <span class="material-symbols-outlined text-emerald-600 text-[20px]">check_circle</span>
                                        <div>
                                            <p class="text-xs font-bold text-emerald-900 mb-1">All Complete</p>
                                            <p class="text-xs text-emerald-700">All items received, quality checked, and put away. Stock ledger updated.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 27: Picking Detail -->
            <div id="picking-detail" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <button onclick="navigateTo('picking')" class="text-sm text-slate-500 hover:text-primary mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">arrow_back</span>
                                    Back to Pick Lists
                                </button>
                                <div class="flex items-center gap-3">
                                    <h1 class="text-xl font-bold text-slate-900">Pick List #PICK-2023-892</h1>
                                    <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm font-bold flex items-center gap-1">
                                        <span class="material-symbols-outlined text-[16px]">shopping_cart</span>
                                        In Progress
                                    </span>
                                    <span class="bg-red-100 text-red-700 px-3 py-1 rounded text-sm font-bold flex items-center gap-1">
                                        <span class="material-symbols-outlined text-[16px]">error</span>
                                        Urgent
                                    </span>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    Print List
                                </button>
                                <button class="px-4 py-2 bg-primary text-white rounded-lg text-sm font-bold shadow-sm hover:bg-primary-hover">
                                    Complete Pick
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-hidden flex">
                        <!-- Left: Pick Items -->
                        <div class="flex-1 flex flex-col overflow-hidden">
                            <div class="px-6 py-3 bg-slate-50 border-b border-slate-200">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-bold text-slate-900">Items to Pick</h3>
                                    <span class="text-sm text-slate-500">Progress: <strong class="text-primary">5/8</strong></span>
                                </div>
                            </div>

                            <div class="flex-1 overflow-y-auto p-6 custom-scrollbar">
                                <div class="space-y-4">
                                    <div class="bg-emerald-50 border-2 border-emerald-500 rounded-lg p-4">
                                        <div class="flex items-start justify-between mb-3">
                                            <div class="flex-1">
                                                <div class="font-mono font-bold text-emerald-900">KB-204-X</div>
                                                <div class="text-sm text-emerald-800 mt-1">Wireless Mech Keyboard</div>
                                            </div>
                                            <span class="material-symbols-outlined text-emerald-600 text-[32px]">check_circle</span>
                                        </div>
                                        <div class="grid grid-cols-3 gap-3 text-sm">
                                            <div>
                                                <p class="text-xs text-emerald-700 uppercase font-bold mb-1">Bin Location</p>
                                                <p class="font-mono font-bold text-emerald-900">A-12-04</p>
                                            </div>
                                            <div>
                                                <p class="text-xs text-emerald-700 uppercase font-bold mb-1">Qty to Pick</p>
                                                <p class="font-bold text-emerald-900">8</p>
                                            </div>
                                            <div>
                                                <p class="text-xs text-emerald-700 uppercase font-bold mb-1">Status</p>
                                                <p class="font-bold text-emerald-900">✓ Picked</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="bg-blue-50 border-2 border-blue-500 rounded-lg p-4">
                                        <div class="flex items-start justify-between mb-3">
                                            <div class="flex-1">
                                                <div class="font-mono font-bold text-blue-900">MN-400-S</div>
                                                <div class="text-sm text-blue-800 mt-1">UltraWide Monitor 34"</div>
                                            </div>
                                            <span class="material-symbols-outlined text-blue-600 text-[32px] animate-pulse">radio_button_checked</span>
                                        </div>
                                        <div class="grid grid-cols-3 gap-3 text-sm">
                                            <div>
                                                <p class="text-xs text-blue-700 uppercase font-bold mb-1">Bin Location</p>
                                                <p class="font-mono font-bold text-blue-900">B-08-01</p>
                                            </div>
                                            <div>
                                                <p class="text-xs text-blue-700 uppercase font-bold mb-1">Qty to Pick</p>
                                                <p class="font-bold text-blue-900">2</p>
                                            </div>
                                            <div>
                                                <p class="text-xs text-blue-700 uppercase font-bold mb-1">Status</p>
                                                <p class="font-bold text-blue-900">→ Current</p>
                                            </div>
                                        </div>
                                        <button class="mt-3 w-full px-4 py-2 bg-primary text-white rounded-lg font-bold hover:bg-primary-hover">
                                            Mark as Picked
                                        </button>
                                    </div>

                                    <div class="bg-white border border-slate-200 rounded-lg p-4 opacity-50">
                                        <div class="flex items-start justify-between mb-3">
                                            <div class="flex-1">
                                                <div class="font-mono font-bold text-slate-700">MS-ERG-01</div>
                                                <div class="text-sm text-slate-600 mt-1">Ergo Mouse Pro</div>
                                            </div>
                                            <span class="material-symbols-outlined text-slate-300 text-[32px]">radio_button_unchecked</span>
                                        </div>
                                        <div class="grid grid-cols-3 gap-3 text-sm">
                                            <div>
                                                <p class="text-xs text-slate-500 uppercase font-bold mb-1">Bin Location</p>
                                                <p class="font-mono font-bold text-slate-700">C-01-02</p>
                                            </div>
                                            <div>
                                                <p class="text-xs text-slate-500 uppercase font-bold mb-1">Qty to Pick</p>
                                                <p class="font-bold text-slate-700">12</p>
                                            </div>
                                            <div>
                                                <p class="text-xs text-slate-500 uppercase font-bold mb-1">Status</p>
                                                <p class="font-bold text-slate-500">Pending</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right: Details -->
                        <div class="w-96 border-l border-slate-200 flex flex-col overflow-hidden bg-slate-50">
                            <div class="px-6 py-4 border-b border-slate-200 bg-white">
                                <h3 class="font-bold text-slate-900">Pick Details</h3>
                            </div>

                            <div class="flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar">
                                <div class="bg-white border border-slate-200 rounded-lg p-4">
                                    <h4 class="font-bold text-slate-900 mb-3 text-sm">Order Info</h4>
                                    <div class="space-y-2 text-sm">
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Customer</p>
                                            <p class="font-bold text-slate-900">Acme Corp</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Order #</p>
                                            <p class="text-blue-600 hover:underline cursor-pointer font-bold">SO-2023-449</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Shipping</p>
                                            <p class="text-red-600 font-bold">Express (Next Day)</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white border border-slate-200 rounded-lg p-4">
                                    <h4 class="font-bold text-slate-900 mb-3 text-sm">Picker Info</h4>
                                    <div class="space-y-2 text-sm">
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Assigned To</p>
                                            <p class="font-bold text-slate-900">John Tan</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Started</p>
                                            <p class="text-slate-900">Oct 24, 10:30 AM</p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-slate-500 uppercase font-bold mb-1">Est. Completion</p>
                                            <p class="text-slate-900">11:15 AM</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                                    <div class="flex items-start gap-2">
                                        <span class="material-symbols-outlined text-red-600 text-[20px]">schedule</span>
                                        <div>
                                            <p class="text-xs font-bold text-red-900 mb-1">Urgent Priority</p>
                                            <p class="text-xs text-red-700">Must ship today by 3:00 PM for next-day delivery.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 28: Create Cycle Count -->
            <div id="create-cycle-count" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-xl font-bold text-slate-900">Create Cycle Count</h1>
                                <p class="text-xs text-slate-500 mt-1">Schedule a new cycle count for inventory verification.</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigateTo('cycle-counts')" class="px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 rounded-lg">Cancel</button>
                                <button onclick="showNotification('Cycle count saved as draft', 'success')" class="px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 shadow-sm">Save as Draft</button>
                                <button onclick="showNotification('Cycle count started! Assigning to counter...', 'success'); navigateTo('cycle-counts')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Start Count</button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-4xl mx-auto space-y-6">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <div class="flex items-start gap-3">
                                    <span class="material-symbols-outlined text-blue-600 text-[24px]">info</span>
                                    <div>
                                        <p class="text-sm font-bold text-blue-900 mb-1">About Cycle Counting</p>
                                        <p class="text-sm text-blue-700">Cycle counts verify physical inventory without full shutdown. Use ABC analysis to prioritize high-value items, or random sampling for statistical verification.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Count Configuration</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Count Type *</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>ABC Analysis (High-value items)</option>
                                            <option>Random Sample</option>
                                            <option>Full Zone Count</option>
                                            <option>Specific SKUs</option>
                                        </select>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Warehouse *</label>
                                            <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                                <option>Singapore HQ (WH-01)</option>
                                                <option>Malaysia North (WH-02)</option>
                                                <option>Jakarta Hub (HUB-04)</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Zone</label>
                                            <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                                <option>All Zones</option>
                                                <option>Zone A</option>
                                                <option>Zone B</option>
                                                <option>Zone C</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Scheduled Date *</label>
                                            <input type="date" value="2023-10-25" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                        </div>
                                        <div>
                                            <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Assign To</label>
                                            <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                                <option>Unassigned</option>
                                                <option>John Tan</option>
                                                <option>Sarah Chen</option>
                                                <option>Mike Wong</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Sample Size</label>
                                        <div class="flex items-center gap-3">
                                            <input type="range" min="10" max="100" value="50" class="flex-1"/>
                                            <span class="text-sm font-bold text-slate-900 w-16">50 items</span>
                                        </div>
                                        <p class="text-xs text-slate-500 mt-1">Number of items to count</p>
                                    </div>

                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Notes</label>
                                        <textarea rows="3" placeholder="Optional notes for counter..." class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"></textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Preview: Items to Count</h3>
                                    <button onclick="showNotification('Preview refreshed with latest data', 'info')" class="text-sm text-primary font-semibold hover:underline">Refresh Preview</button>
                                </div>
                                <div class="space-y-2">
                                    <div class="p-3 bg-slate-50 rounded-lg flex items-center justify-between">
                                        <div>
                                            <div class="font-mono font-bold text-sm text-slate-900">KB-204-X</div>
                                            <div class="text-xs text-slate-500">Wireless Mech Keyboard • Bin: A-12-04</div>
                                        </div>
                                        <div class="text-sm text-slate-600">Current: <strong>142</strong></div>
                                    </div>
                                    <div class="p-3 bg-slate-50 rounded-lg flex items-center justify-between">
                                        <div>
                                            <div class="font-mono font-bold text-sm text-slate-900">MN-400-S</div>
                                            <div class="text-xs text-slate-500">UltraWide Monitor 34" • Bin: B-08-01</div>
                                        </div>
                                        <div class="text-sm text-slate-600">Current: <strong>8</strong></div>
                                    </div>
                                    <div class="text-center py-2 text-xs text-slate-500">
                                        + 48 more items
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- SCREEN 29: Create GRN -->
            <div id="create-grn" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-xl font-bold text-slate-900">Create Goods Receipt Note (GRN)</h1>
                                <p class="text-xs text-slate-500 mt-1">Record incoming stock from purchase orders.</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigateTo('receiving')" class="px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 rounded-lg">Cancel</button>
                                <button onclick="showNotification('Draft saved successfully!', 'success')" class="px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 shadow-sm">Save Draft</button>
                                <button onclick="showNotification('GRN created successfully!', 'success'); navigateTo('receiving')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Create GRN</button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-4xl mx-auto space-y-6">
                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Basic Information</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Purchase Order Reference *</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>Select PO...</option>
                                            <option>PO-2023-001 - Acme Supplies Ltd</option>
                                            <option>PO-2023-002 - TechParts Inc</option>
                                            <option>PO-2023-003 - Global Parts Co</option>
                                        </select>
                                        <p class="text-xs text-slate-500 mt-1">Select the purchase order for this receipt</p>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Receipt Date *</label>
                                            <input type="date" value="2023-10-24" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                        </div>
                                        <div>
                                            <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Destination Warehouse *</label>
                                            <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                                <option>Singapore HQ (WH-01)</option>
                                                <option>Malaysia North (WH-02)</option>
                                                <option>Jakarta Hub (HUB-04)</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Supplier Invoice #</label>
                                        <input type="text" placeholder="Optional supplier invoice reference..." class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                    </div>

                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Notes</label>
                                        <textarea rows="3" placeholder="Delivery notes, inspection comments, etc..." class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"></textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Items to Receive</h3>
                                    <button onclick="showNotification('Add item row added', 'info')" class="px-3 py-1.5 bg-slate-100 text-slate-700 text-xs font-semibold rounded hover:bg-slate-200">+ Add Item</button>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                            <tr>
                                                <th class="px-4 py-3">SKU</th>
                                                <th class="px-4 py-3">Item</th>
                                                <th class="px-4 py-3 text-right">PO Qty</th>
                                                <th class="px-4 py-3 text-right">Receiving</th>
                                                <th class="px-4 py-3">Bin</th>
                                                <th class="px-4 py-3"></th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr>
                                                <td class="px-4 py-3 font-mono font-bold text-primary">KB-204-X</td>
                                                <td class="px-4 py-3">Wireless Mech Keyboard</td>
                                                <td class="px-4 py-3 text-right font-bold">50</td>
                                                <td class="px-4 py-3">
                                                    <input type="number" value="50" class="w-20 px-2 py-1 text-sm border border-slate-200 rounded text-right font-bold"/>
                                                </td>
                                                <td class="px-4 py-3">
                                                    <input type="text" value="A-12-04" class="w-24 px-2 py-1 text-sm border border-slate-200 rounded font-mono"/>
                                                </td>
                                                <td class="px-4 py-3">
                                                    <button class="text-red-500 hover:text-red-700">
                                                        <span class="material-symbols-outlined text-[20px]">delete</span>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <div class="flex items-center gap-3">
                                    <input type="checkbox" id="auto-putaway" checked class="rounded border-slate-300 text-primary focus:ring-primary scale-125"/>
                                    <label for="auto-putaway" class="text-sm text-blue-900">
                                        <span class="font-bold">Auto-assign bins using putaway rules</span>
                                        <span class="block text-xs text-blue-700 mt-0.5">System will automatically suggest optimal bin locations</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 30: Create Pick -->
            <div id="create-pick" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-xl font-bold text-slate-900">Create Pick List</h1>
                                <p class="text-xs text-slate-500 mt-1">Generate optimized picking route for order fulfillment.</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigateTo('picking')" class="px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 rounded-lg">Cancel</button>
                                <button onclick="showNotification('Draft saved successfully!', 'success')" class="px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 shadow-sm">Save Draft</button>
                                <button onclick="showNotification('Pick List created successfully!', 'success'); navigateTo('picking')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Create Pick List</button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-4xl mx-auto space-y-6">
                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Pick Configuration</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Select Sales Order(s) *</label>
                                        <select multiple class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white h-32">
                                            <option>SO-2023-449 - Acme Corp (8 items)</option>
                                            <option>SO-2023-448 - TechStore Inc (15 items)</option>
                                            <option>SO-2023-447 - Global Retail (3 items)</option>
                                        </select>
                                        <p class="text-xs text-slate-500 mt-1">Hold Ctrl/Cmd to select multiple orders for batch picking</p>
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Priority</label>
                                            <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                                <option>Normal</option>
                                                <option>High</option>
                                                <option>Urgent</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Assign Picker</label>
                                            <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                                <option>Unassigned</option>
                                                <option>John Tan</option>
                                                <option>Sarah Chen</option>
                                                <option>Mike Wong</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Picking Strategy</label>
                                        <div class="space-y-2">
                                            <div class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer">
                                                <input type="radio" name="strategy" id="zone-pick" checked class="text-primary focus:ring-primary"/>
                                                <label for="zone-pick" class="flex-1 cursor-pointer">
                                                    <div class="font-bold text-sm text-slate-900">Zone Picking (Recommended)</div>
                                                    <div class="text-xs text-slate-500">Optimized route by warehouse zones</div>
                                                </label>
                                            </div>
                                            <div class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer">
                                                <input type="radio" name="strategy" id="batch-pick" class="text-primary focus:ring-primary"/>
                                                <label for="batch-pick" class="flex-1 cursor-pointer">
                                                    <div class="font-bold text-sm text-slate-900">Batch Picking</div>
                                                    <div class="text-xs text-slate-500">Pick multiple orders simultaneously</div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                                <div class="flex items-start gap-3">
                                    <span class="material-symbols-outlined text-emerald-600 text-[24px]">route</span>
                                    <div>
                                        <p class="text-sm font-bold text-emerald-900 mb-1">Route Optimization Enabled</p>
                                        <p class="text-sm text-emerald-700">System will calculate the shortest path through warehouse. Estimated pick time: <strong>18 minutes</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 31: Create Transfer -->
            <div id="create-transfer" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-xl font-bold text-slate-900">Create Stock Transfer</h1>
                                <p class="text-xs text-slate-500 mt-1">Move inventory between warehouses or locations.</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="navigateTo('transfers')" class="px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50 rounded-lg">Cancel</button>
                                <button onclick="showNotification('Draft saved successfully!', 'success')" class="px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 shadow-sm">Save Draft</button>
                                <button onclick="showNotification('Transfer created successfully!', 'success'); navigateTo('transfers')" class="px-5 py-2 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm">Create Transfer</button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-4xl mx-auto space-y-6">
                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Transfer Route</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">From Warehouse *</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>Singapore HQ (WH-01)</option>
                                            <option>Malaysia North (WH-02)</option>
                                            <option>Jakarta Hub (HUB-04)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">To Warehouse *</label>
                                        <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                            <option>Malaysia North (WH-02)</option>
                                            <option>Singapore HQ (WH-01)</option>
                                            <option>Jakarta Hub (HUB-04)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Transfer Date *</label>
                                        <input type="date" value="2023-10-24" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                    </div>
                                    <div>
                                        <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Expected Delivery</label>
                                        <input type="date" value="2023-10-26" class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"/>
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Transfer Reason</label>
                                    <select class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white">
                                        <option>Stock Rebalancing</option>
                                        <option>Demand Shift</option>
                                        <option>Emergency Resupply</option>
                                        <option>Consolidation</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-lg p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Items to Transfer</h3>
                                    <button onclick="showNotification('Add item row added', 'info')" class="px-3 py-1.5 bg-slate-100 text-slate-700 text-xs font-semibold rounded hover:bg-slate-200">+ Add Item</button>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                            <tr>
                                                <th class="px-4 py-3">SKU</th>
                                                <th class="px-4 py-3">Item</th>
                                                <th class="px-4 py-3">From Bin</th>
                                                <th class="px-4 py-3">To Bin</th>
                                                <th class="px-4 py-3 text-right">Quantity</th>
                                                <th class="px-4 py-3"></th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr>
                                                <td class="px-4 py-3">
                                                    <input type="text" placeholder="Search SKU..." class="w-full px-2 py-1 text-sm border border-slate-200 rounded"/>
                                                </td>
                                                <td class="px-4 py-3 text-slate-400">-</td>
                                                <td class="px-4 py-3">
                                                    <input type="text" placeholder="Bin" class="w-20 px-2 py-1 text-sm border border-slate-200 rounded font-mono"/>
                                                </td>
                                                <td class="px-4 py-3">
                                                    <input type="text" placeholder="Bin" class="w-20 px-2 py-1 text-sm border border-slate-200 rounded font-mono"/>
                                                </td>
                                                <td class="px-4 py-3">
                                                    <input type="number" placeholder="0" class="w-20 px-2 py-1 text-sm border border-slate-200 rounded text-right"/>
                                                </td>
                                                <td class="px-4 py-3">
                                                    <button class="text-emerald-600 hover:text-emerald-700">
                                                        <span class="material-symbols-outlined text-[20px]">add</span>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div>
                                <label class="text-xs font-bold text-slate-500 uppercase block mb-2">Transfer Notes</label>
                                <textarea rows="3" placeholder="Add notes about this transfer..." class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg bg-white"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 32: Reports Hub -->
            <div id="reports" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-900">Reports & Analytics</h2>
                            <p class="text-slate-500 text-sm mt-1">Pre-built reports and custom analysis tools.</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="navigateTo('stock-valuation-report')">
                                <div class="flex items-start justify-between mb-4">
                                    <span class="material-symbols-outlined text-emerald-500 text-[32px]">paid</span>
                                    <span class="text-xs bg-emerald-50 text-emerald-700 px-2 py-1 rounded font-bold">FINANCIAL</span>
                                </div>
                                <h3 class="font-bold text-slate-900 mb-2">Stock Valuation Report</h3>
                                <p class="text-sm text-slate-600 mb-4">Total inventory value by category, warehouse, and item. Includes FIFO/LIFO/Avg costing.</p>
                                <button class="text-primary text-sm font-semibold hover:underline flex items-center gap-1">
                                    Generate Report
                                    <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
                                </button>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer">
                                <div class="flex items-start justify-between mb-4">
                                    <span class="material-symbols-outlined text-blue-500 text-[32px]">timeline</span>
                                    <span class="text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded font-bold">OPERATIONAL</span>
                                </div>
                                <h3 class="font-bold text-slate-900 mb-2">Inventory Turnover Analysis</h3>
                                <p class="text-sm text-slate-600 mb-4">Analyze stock velocity, slow-moving items, and turnover ratios by period.</p>
                                <button class="text-primary text-sm font-semibold hover:underline flex items-center gap-1">
                                    Generate Report
                                    <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
                                </button>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer">
                                <div class="flex items-start justify-between mb-4">
                                    <span class="material-symbols-outlined text-orange-500 text-[32px]">warning</span>
                                    <span class="text-xs bg-orange-50 text-orange-700 px-2 py-1 rounded font-bold">ALERTS</span>
                                </div>
                                <h3 class="font-bold text-slate-900 mb-2">Stock Exception Report</h3>
                                <p class="text-sm text-slate-600 mb-4">Low stock, overstock, negative inventory, and discrepancy alerts.</p>
                                <button class="text-primary text-sm font-semibold hover:underline flex items-center gap-1">
                                    Generate Report
                                    <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
                                </button>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer">
                                <div class="flex items-start justify-between mb-4">
                                    <span class="material-symbols-outlined text-purple-500 text-[32px]">inventory</span>
                                    <span class="text-xs bg-purple-50 text-purple-700 px-2 py-1 rounded font-bold">OPERATIONAL</span>
                                </div>
                                <h3 class="font-bold text-slate-900 mb-2">Movement History Report</h3>
                                <p class="text-sm text-slate-600 mb-4">Complete audit trail of all stock movements with filters by date, type, and SKU.</p>
                                <button class="text-primary text-sm font-semibold hover:underline flex items-center gap-1">
                                    Generate Report
                                    <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
                                </button>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer">
                                <div class="flex items-start justify-between mb-4">
                                    <span class="material-symbols-outlined text-red-500 text-[32px]">trending_down</span>
                                    <span class="text-xs bg-red-50 text-red-700 px-2 py-1 rounded font-bold">ANALYSIS</span>
                                </div>
                                <h3 class="font-bold text-slate-900 mb-2">Dead Stock Analysis</h3>
                                <p class="text-sm text-slate-600 mb-4">Identify obsolete, expired, or zero-movement items for liquidation.</p>
                                <button class="text-primary text-sm font-semibold hover:underline flex items-center gap-1">
                                    Generate Report
                                    <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
                                </button>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow cursor-pointer">
                                <div class="flex items-start justify-between mb-4">
                                    <span class="material-symbols-outlined text-slate-500 text-[32px]">calculate</span>
                                    <span class="text-xs bg-slate-100 text-slate-700 px-2 py-1 rounded font-bold">CUSTOM</span>
                                </div>
                                <h3 class="font-bold text-slate-900 mb-2">Custom Report Builder</h3>
                                <p class="text-sm text-slate-600 mb-4">Build your own reports with drag-and-drop fields, filters, and grouping.</p>
                                <button class="text-primary text-sm font-semibold hover:underline flex items-center gap-1">
                                    Create Custom
                                    <span class="material-symbols-outlined text-[18px]">arrow_forward</span>
                                </button>
                            </div>
                        </div>

                        <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm">
                            <h3 class="font-bold text-slate-900 mb-4">Scheduled Reports</h3>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-blue-500">schedule</span>
                                        <div>
                                            <div class="font-bold text-sm text-slate-900">Weekly Stock Valuation</div>
                                            <div class="text-xs text-slate-500">Every Monday at 9:00 AM • Sent to finance@company.com</div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="text-slate-400 hover:text-slate-600">
                                            <span class="material-symbols-outlined text-[20px]">edit</span>
                                        </button>
                                        <button class="text-slate-400 hover:text-red-600">
                                            <span class="material-symbols-outlined text-[20px]">delete</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                    <div class="flex items-center gap-3">
                                        <span class="material-symbols-outlined text-orange-500">schedule</span>
                                        <div>
                                            <div class="font-bold text-sm text-slate-900">Daily Low Stock Alert</div>
                                            <div class="text-xs text-slate-500">Every day at 8:00 AM • Sent to operations@company.com</div>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="text-slate-400 hover:text-slate-600">
                                            <span class="material-symbols-outlined text-[20px]">edit</span>
                                        </button>
                                        <button class="text-slate-400 hover:text-red-600">
                                            <span class="material-symbols-outlined text-[20px]">delete</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCREEN 33: Stock Valuation Report -->
            <div id="stock-valuation-report" class="view-section">
                <div class="flex-1 flex flex-col h-full bg-white">
                    <div class="px-6 py-4 border-b border-slate-200 shrink-0">
                        <div class="flex items-center justify-between">
                            <div>
                                <button onclick="navigateTo('reports')" class="text-sm text-slate-500 hover:text-primary mb-2 flex items-center gap-1">
                                    <span class="material-symbols-outlined text-[16px]">arrow_back</span>
                                    Back to Reports
                                </button>
                                <h1 class="text-xl font-bold text-slate-900">Stock Valuation Report</h1>
                                <p class="text-xs text-slate-500 mt-1">As of Oct 24, 2023 • All Warehouses</p>
                            </div>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">download</span>
                                    Export PDF
                                </button>
                                <button class="px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-semibold shadow-sm hover:bg-slate-50 flex items-center gap-2">
                                    <span class="material-symbols-outlined text-[18px]">table_view</span>
                                    Export Excel
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                        <div class="max-w-[1400px] mx-auto space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="bg-gradient-to-br from-emerald-500 to-emerald-600 text-white p-5 rounded-xl shadow-lg">
                                    <div class="text-sm font-bold uppercase mb-2 opacity-90">Total Inventory Value</div>
                                    <div class="text-3xl font-bold">$1,245,890</div>
                                </div>
                                <div class="bg-white border border-slate-200 p-5 rounded-xl shadow-sm">
                                    <div class="text-xs font-bold text-slate-500 uppercase mb-2">Total Units</div>
                                    <div class="text-3xl font-bold text-slate-900">15,420</div>
                                </div>
                                <div class="bg-white border border-slate-200 p-5 rounded-xl shadow-sm">
                                    <div class="text-xs font-bold text-slate-500 uppercase mb-2">Avg Unit Cost</div>
                                    <div class="text-3xl font-bold text-slate-900">$80.80</div>
                                </div>
                                <div class="bg-white border border-slate-200 p-5 rounded-xl shadow-sm">
                                    <div class="text-xs font-bold text-slate-500 uppercase mb-2">Active SKUs</div>
                                    <div class="text-3xl font-bold text-slate-900">890</div>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm">
                                <div class="px-6 py-4 bg-slate-50 border-b border-slate-200">
                                    <h3 class="font-bold text-slate-900">Valuation by Category</h3>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 text-xs uppercase text-slate-500 font-bold">
                                            <tr>
                                                <th class="px-6 py-3">Category</th>
                                                <th class="px-6 py-3 text-right">SKUs</th>
                                                <th class="px-6 py-3 text-right">Total Units</th>
                                                <th class="px-6 py-3 text-right">Avg Cost</th>
                                                <th class="px-6 py-3 text-right">Total Value</th>
                                                <th class="px-6 py-3 text-right">% of Total</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-bold text-slate-900">Electronics</td>
                                                <td class="px-6 py-4 text-right">245</td>
                                                <td class="px-6 py-4 text-right">4,820</td>
                                                <td class="px-6 py-4 text-right">$125.50</td>
                                                <td class="px-6 py-4 text-right font-bold text-emerald-600">$604,910</td>
                                                <td class="px-6 py-4 text-right font-bold">48.6%</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-bold text-slate-900">Mechanical</td>
                                                <td class="px-6 py-4 text-right">180</td>
                                                <td class="px-6 py-4 text-right">3,200</td>
                                                <td class="px-6 py-4 text-right">$95.20</td>
                                                <td class="px-6 py-4 text-right font-bold text-emerald-600">$304,640</td>
                                                <td class="px-6 py-4 text-right font-bold">24.5%</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-bold text-slate-900">Consumables</td>
                                                <td class="px-6 py-4 text-right">320</td>
                                                <td class="px-6 py-4 text-right">5,800</td>
                                                <td class="px-6 py-4 text-right">$42.10</td>
                                                <td class="px-6 py-4 text-right font-bold text-emerald-600">$244,180</td>
                                                <td class="px-6 py-4 text-right font-bold">19.6%</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-bold text-slate-900">Accessories</td>
                                                <td class="px-6 py-4 text-right">145</td>
                                                <td class="px-6 py-4 text-right">1,600</td>
                                                <td class="px-6 py-4 text-right">$57.50</td>
                                                <td class="px-6 py-4 text-right font-bold text-emerald-600">$92,000</td>
                                                <td class="px-6 py-4 text-right font-bold">7.4%</td>
                                            </tr>
                                        </tbody>
                                        <tfoot class="bg-slate-50 border-t-2 border-slate-300">
                                            <tr>
                                                <td class="px-6 py-4 font-bold text-slate-900">TOTAL</td>
                                                <td class="px-6 py-4 text-right font-bold">890</td>
                                                <td class="px-6 py-4 text-right font-bold">15,420</td>
                                                <td class="px-6 py-4 text-right font-bold">$80.80</td>
                                                <td class="px-6 py-4 text-right font-bold text-emerald-600 text-lg">$1,245,890</td>
                                                <td class="px-6 py-4 text-right font-bold">100%</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>

                            <div class="bg-white border border-slate-200 rounded-xl p-6 shadow-sm">
                                <h3 class="font-bold text-slate-900 mb-4">Valuation by Warehouse</h3>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div>
                                            <div class="font-bold text-slate-900">Singapore HQ (WH-01)</div>
                                            <div class="text-xs text-slate-500">450 SKUs • 8,200 units</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-emerald-600 text-lg">$698,450</div>
                                            <div class="text-xs text-slate-500">56.1% of total</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div>
                                            <div class="font-bold text-slate-900">Malaysia North (WH-02)</div>
                                            <div class="text-xs text-slate-500">320 SKUs • 5,100 units</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-emerald-600 text-lg">$412,340</div>
                                            <div class="text-xs text-slate-500">33.1% of total</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div>
                                            <div class="font-bold text-slate-900">Jakarta Hub (HUB-04)</div>
                                            <div class="text-xs text-slate-500">120 SKUs • 2,120 units</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold text-emerald-600 text-lg">$135,100</div>
                                            <div class="text-xs text-slate-500">10.8% of total</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ======================= PRODUCTION PLANNING SCREENS ======================= -->
            
            <!-- PP Overview Screen -->
            <div id="pp-overview" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex flex-col md:flex-row md:items-end justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900 tracking-tight">Production Planning Overview</h2>
                                <p class="text-slate-500 text-sm mt-1">Monitor production schedules, capacity, and work orders at a glance.</p>
                            </div>
                            <div class="flex items-center gap-3 flex-wrap">
                                <button onclick="showCreateWOModal()" class="flex items-center justify-center h-10 px-4 bg-primary text-white rounded-lg text-sm font-bold shadow-md hover:bg-primary-hover transition-all gap-2">
                                    <span class="material-symbols-outlined text-[20px]">add</span>
                                    <span>Create Work Order</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- KPI Cards -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4">
                            <div onclick="navigateTo('pp-work-orders')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Active WOs</span>
                                    <span class="material-symbols-outlined text-primary">assignment</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-slate-900">48</div>
                                    <div class="text-xs text-slate-500 mt-1.5">In Progress</div>
                                </div>
                            </div>

                            <div onclick="navigateTo('pp-planning')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Plan Adherence</span>
                                    <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-emerald-600">94%</div>
                                    <div class="flex items-center gap-1 mt-1.5 text-xs font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded w-fit">
                                        <span class="material-symbols-outlined text-[14px]">trending_up</span> +2.1%
                                    </div>
                                </div>
                            </div>

                            <div onclick="navigateTo('pp-capacity')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Capacity Used</span>
                                    <span class="material-symbols-outlined text-slate-300">speed</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-slate-900">78%</div>
                                    <div class="text-xs text-slate-500 mt-1.5">Avg. across work centers</div>
                                </div>
                            </div>

                            <div onclick="navigateTo('pp-shopfloor')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">On Shopfloor</span>
                                    <span class="material-symbols-outlined text-slate-300">factory</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-slate-900">12</div>
                                    <div class="text-xs text-slate-500 mt-1.5">Operations Running</div>
                                </div>
                            </div>

                            <div onclick="navigateTo('pp-materials')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-primary transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Material Ready</span>
                                    <span class="material-symbols-outlined text-slate-300">inventory_2</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-emerald-600">92%</div>
                                    <div class="text-xs text-slate-500 mt-1.5">BOM Coverage</div>
                                </div>
                            </div>

                            <div onclick="navigateTo('pp-quality')" class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-between cursor-pointer hover:border-red-500 border-l-4 border-l-red-500 transition-colors">
                                <div class="flex justify-between items-start mb-3">
                                    <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Open Issues</span>
                                    <span class="material-symbols-outlined text-red-500">warning</span>
                                </div>
                                <div>
                                    <div class="text-2xl font-bold text-red-600">6</div>
                                    <div class="text-xs text-red-600 mt-1.5">Requires Attention</div>
                                </div>
                            </div>
                        </div>

                        <!-- Main Content Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- Work Orders Summary -->
                            <div class="lg:col-span-2 bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-base font-bold text-slate-900">Active Work Orders</h3>
                                    <button onclick="navigateTo('pp-work-orders')" class="text-sm text-primary font-semibold hover:underline">View All →</button>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="border-b border-slate-200">
                                            <tr>
                                                <th class="pb-3 font-bold text-slate-500 text-xs uppercase">WO #</th>
                                                <th class="pb-3 font-bold text-slate-500 text-xs uppercase">Item</th>
                                                <th class="pb-3 font-bold text-slate-500 text-xs uppercase">Qty</th>
                                                <th class="pb-3 font-bold text-slate-500 text-xs uppercase">Due Date</th>
                                                <th class="pb-3 font-bold text-slate-500 text-xs uppercase">Status</th>
                                                <th class="pb-3 font-bold text-slate-500 text-xs uppercase">Progress</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr onclick="navigateTo('pp-work-orders')" class="hover:bg-slate-50 cursor-pointer">
                                                <td class="py-3 font-mono font-bold text-primary">WO-4592</td>
                                                <td class="py-3 font-medium text-slate-900">Industrial Pump V2</td>
                                                <td class="py-3">500</td>
                                                <td class="py-3 text-slate-600">Jul 28, 2024</td>
                                                <td class="py-3"><span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded">In Progress</span></td>
                                                <td class="py-3">
                                                    <div class="w-24 bg-slate-100 rounded-full h-2">
                                                        <div class="bg-blue-500 h-2 rounded-full" style="width: 65%"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-slate-50 cursor-pointer">
                                                <td class="py-3 font-mono font-bold text-primary">WO-4591</td>
                                                <td class="py-3 font-medium text-slate-900">Valve Assembly Kit</td>
                                                <td class="py-3">200</td>
                                                <td class="py-3 text-slate-600">Jul 25, 2024</td>
                                                <td class="py-3"><span class="px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded">Scheduled</span></td>
                                                <td class="py-3">
                                                    <div class="w-24 bg-slate-100 rounded-full h-2">
                                                        <div class="bg-emerald-500 h-2 rounded-full" style="width: 20%"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-slate-50 cursor-pointer">
                                                <td class="py-3 font-mono font-bold text-primary">WO-4590</td>
                                                <td class="py-3 font-medium text-slate-900">Control Unit Module</td>
                                                <td class="py-3">150</td>
                                                <td class="py-3 text-orange-600 font-semibold">Jul 24, 2024</td>
                                                <td class="py-3"><span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs font-bold rounded">At Risk</span></td>
                                                <td class="py-3">
                                                    <div class="w-24 bg-slate-100 rounded-full h-2">
                                                        <div class="bg-orange-500 h-2 rounded-full" style="width: 45%"></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Alerts Panel -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-base font-bold text-slate-900">Production Alerts</h3>
                                    <span class="bg-red-100 text-red-700 text-xs font-bold px-2 py-1 rounded">6 Active</span>
                                </div>
                                <div class="space-y-3">
                                    <div onclick="navigateTo('pp-capacity')" class="p-3 bg-red-50 rounded-lg border border-red-100 cursor-pointer hover:bg-red-100">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-red-500 text-[20px]">error</span>
                                            <div class="flex-1">
                                                <p class="text-xs font-bold text-red-900">Capacity Conflict</p>
                                                <p class="text-xs text-red-700 mt-0.5">Assembly Line A overloaded on Jul 26</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div onclick="navigateTo('pp-materials')" class="p-3 bg-orange-50 rounded-lg border border-orange-100 cursor-pointer hover:bg-orange-100">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-orange-500 text-[20px]">inventory_2</span>
                                            <div class="flex-1">
                                                <p class="text-xs font-bold text-orange-900">Material Shortage</p>
                                                <p class="text-xs text-orange-700 mt-0.5">Steel Tube 20mm - 50 units short</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div onclick="navigateTo('pp-shopfloor')" class="p-3 bg-blue-50 rounded-lg border border-blue-100 cursor-pointer hover:bg-blue-100">
                                        <div class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-blue-500 text-[20px]">build</span>
                                            <div class="flex-1">
                                                <p class="text-xs font-bold text-blue-900">Scheduled Maintenance</p>
                                                <p class="text-xs text-blue-700 mt-0.5">CNC-01 maintenance due tomorrow</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Capacity & Schedule Preview -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-base font-bold text-slate-900">Work Center Utilization</h3>
                                    <button onclick="navigateTo('pp-capacity')" class="text-sm text-primary font-semibold hover:underline">Details →</button>
                                </div>
                                <div class="space-y-4">
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-slate-700">Assembly Line A</span>
                                            <span class="text-sm font-bold text-red-600">92%</span>
                                        </div>
                                        <div class="w-full bg-slate-100 rounded-full h-3">
                                            <div class="bg-red-500 h-3 rounded-full" style="width: 92%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-slate-700">Assembly Line B</span>
                                            <span class="text-sm font-bold text-emerald-600">68%</span>
                                        </div>
                                        <div class="w-full bg-slate-100 rounded-full h-3">
                                            <div class="bg-emerald-500 h-3 rounded-full" style="width: 68%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-slate-700">CNC Machining</span>
                                            <span class="text-sm font-bold text-orange-600">85%</span>
                                        </div>
                                        <div class="w-full bg-slate-100 rounded-full h-3">
                                            <div class="bg-orange-500 h-3 rounded-full" style="width: 85%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm font-medium text-slate-700">QC Lab</span>
                                            <span class="text-sm font-bold text-emerald-600">45%</span>
                                        </div>
                                        <div class="w-full bg-slate-100 rounded-full h-3">
                                            <div class="bg-emerald-500 h-3 rounded-full" style="width: 45%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-base font-bold text-slate-900">Upcoming Deadlines</h3>
                                    <button onclick="navigateTo('pp-planning')" class="text-sm text-primary font-semibold hover:underline">MPS Board →</button>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div>
                                            <p class="text-sm font-bold text-slate-900">WO-4590 Due</p>
                                            <p class="text-xs text-slate-500">Control Unit Module</p>
                                        </div>
                                        <span class="text-sm font-bold text-orange-600">Tomorrow</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div>
                                            <p class="text-sm font-bold text-slate-900">WO-4591 Due</p>
                                            <p class="text-xs text-slate-500">Valve Assembly Kit</p>
                                        </div>
                                        <span class="text-sm font-bold text-slate-600">Jul 25</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div>
                                            <p class="text-sm font-bold text-slate-900">WO-4592 Due</p>
                                            <p class="text-xs text-slate-500">Industrial Pump V2</p>
                                        </div>
                                        <span class="text-sm font-bold text-slate-600">Jul 28</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ======================= CONSOLIDATED PRODUCTION SCREENS ======================= -->

            <!-- PP-PLANNING: Planning Screen (Versions, MPS, Analytics, Parameters) -->
            <div id="pp-planning" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex flex-col md:flex-row md:items-end justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900 tracking-tight">Planning</h2>
                                <p class="text-slate-500 text-sm mt-1">Manage planning versions, schedules, analytics and parameters.</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <button onclick="exportPlan()" class="flex items-center gap-2 h-10 px-4 bg-white border border-slate-200 rounded-lg text-slate-700 text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    <span class="material-symbols-outlined text-[18px]">download</span>
                                    Export Plan
                                </button>
                                <button onclick="createNewVersion()" class="flex items-center gap-2 h-10 px-4 bg-primary text-white rounded-lg text-sm font-bold shadow-md hover:bg-primary-hover">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    New Version
                                </button>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="flex items-center gap-1 border-b border-slate-200">
                            <button onclick="switchPlanningTab('versions')" id="tab-versions" class="px-4 py-3 text-sm font-semibold text-primary border-b-2 border-primary">Plan Versions</button>
                            <button onclick="switchPlanningTab('mps')" id="tab-mps" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">MPS Board</button>
                            <button onclick="switchPlanningTab('analytics')" id="tab-analytics" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Analytics</button>
                            <button onclick="switchPlanningTab('parameters')" id="tab-parameters" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Parameters</button>
                        </div>

                        <!-- Versions Tab Content -->
                        <div id="planning-tab-versions" class="space-y-6">
                            <!-- Version Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                                <div class="bg-white rounded-xl border-2 border-primary shadow-sm p-6 relative">
                                    <span class="absolute top-4 right-4 bg-primary text-white text-xs font-bold px-2 py-1 rounded">ACTIVE</span>
                                    <div class="flex items-center gap-3 mb-4">
                                        <div class="size-12 bg-primary/10 rounded-lg flex items-center justify-center">
                                            <span class="material-symbols-outlined text-primary text-2xl">schedule</span>
                                        </div>
                                        <div>
                                            <h3 class="font-bold text-slate-900">Q3 2024 - Base Plan</h3>
                                            <p class="text-xs text-slate-500">v1.2 • Updated Jul 20</p>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div class="bg-slate-50 p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Work Orders</p>
                                            <p class="text-lg font-bold text-slate-900">156</p>
                                        </div>
                                        <div class="bg-slate-50 p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Plan Horizon</p>
                                            <p class="text-lg font-bold text-slate-900">12 Weeks</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button onclick="viewPlanVersion('Base Plan')" class="flex-1 h-9 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-200">View</button>
                                        <button onclick="editPlanVersion()" class="flex-1 h-9 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-200">Edit</button>
                                    </div>
                                </div>

                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <div class="flex items-center gap-3 mb-4">
                                        <div class="size-12 bg-orange-50 rounded-lg flex items-center justify-center">
                                            <span class="material-symbols-outlined text-orange-500 text-2xl">science</span>
                                        </div>
                                        <div>
                                            <h3 class="font-bold text-slate-900">Q3 2024 - What-If: Rush</h3>
                                            <p class="text-xs text-slate-500">Draft • Created Jul 18</p>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div class="bg-slate-50 p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Work Orders</p>
                                            <p class="text-lg font-bold text-slate-900">168</p>
                                        </div>
                                        <div class="bg-slate-50 p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Plan Horizon</p>
                                            <p class="text-lg font-bold text-slate-900">8 Weeks</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-2">
                                        <button onclick="viewPlanVersion('Rush Scenario')" class="flex-1 h-9 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-200">View</button>
                                        <button onclick="activatePlanVersion()" class="flex-1 h-9 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Activate</button>
                                    </div>
                                </div>

                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6 opacity-60">
                                    <div class="flex items-center gap-3 mb-4">
                                        <div class="size-12 bg-slate-100 rounded-lg flex items-center justify-center">
                                            <span class="material-symbols-outlined text-slate-400 text-2xl">archive</span>
                                        </div>
                                        <div>
                                            <h3 class="font-bold text-slate-900">Q2 2024 - Final</h3>
                                            <p class="text-xs text-slate-500">Archived • Jun 30</p>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4 mb-4">
                                        <div class="bg-slate-50 p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Work Orders</p>
                                            <p class="text-lg font-bold text-slate-900">142</p>
                                        </div>
                                        <div class="bg-slate-50 p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Completion</p>
                                            <p class="text-lg font-bold text-emerald-600">98%</p>
                                        </div>
                                    </div>
                                    <button onclick="viewArchive()" class="w-full h-9 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-200">View Archive</button>
                                </div>
                            </div>

                            <!-- Version Comparison -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between">
                                    <h3 class="font-bold text-slate-900">Version Comparison</h3>
                                    <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                                        <option>Compare Base vs Rush</option>
                                        <option>Compare Base vs Archive</option>
                                    </select>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Metric</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Base Plan</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Rush Scenario</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Variance</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Total Work Orders</td>
                                                <td class="px-6 py-4">156</td>
                                                <td class="px-6 py-4">168</td>
                                                <td class="px-6 py-4 text-orange-600 font-bold">+12 (+7.7%)</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Avg Capacity Load</td>
                                                <td class="px-6 py-4">78%</td>
                                                <td class="px-6 py-4">92%</td>
                                                <td class="px-6 py-4 text-red-600 font-bold">+14%</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">On-Time Delivery Est.</td>
                                                <td class="px-6 py-4">94%</td>
                                                <td class="px-6 py-4">87%</td>
                                                <td class="px-6 py-4 text-red-600 font-bold">-7%</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- MPS Tab Content (Hidden by default) -->
                        <div id="planning-tab-mps" class="space-y-6 hidden">
                            <!-- Context Strip -->
                            <div class="bg-slate-50 border border-slate-200 rounded-xl p-4 flex flex-wrap items-center justify-between gap-4">
                                <div class="flex items-center gap-6">
                                    <div class="flex flex-col">
                                        <span class="text-xs font-medium text-slate-500 uppercase">Plan Version</span>
                                        <span class="text-sm font-bold text-slate-900">Q3 2024 - Base Plan</span>
                                    </div>
                                    <div class="w-px h-8 bg-slate-200"></div>
                                    <div class="flex flex-col">
                                        <span class="text-xs font-medium text-slate-500 uppercase">Freeze Window</span>
                                        <span class="text-sm font-bold text-slate-900">Jul 22-24 (Locked)</span>
                                    </div>
                                    <div class="w-px h-8 bg-slate-200"></div>
                                    <div class="flex flex-col">
                                        <span class="text-xs font-medium text-slate-500 uppercase">Capacity Status</span>
                                        <span class="text-sm font-bold text-orange-600">2 Conflicts</span>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg font-medium">
                                        <option>Week 30 (Jul 22-28)</option>
                                        <option>Week 31 (Jul 29-Aug 4)</option>
                                    </select>
                                    <button onclick="autoSchedule()" class="h-9 px-4 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Auto-Schedule</button>
                                </div>
                            </div>

                            <!-- Schedule Grid -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm min-w-[1000px]">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-4 py-3 font-bold text-slate-500 text-xs uppercase w-48">Work Center</th>
                                                <th class="px-4 py-3 font-bold text-slate-500 text-xs uppercase text-center bg-blue-50">Mon 22</th>
                                                <th class="px-4 py-3 font-bold text-slate-500 text-xs uppercase text-center bg-blue-50">Tue 23</th>
                                                <th class="px-4 py-3 font-bold text-slate-500 text-xs uppercase text-center">Wed 24</th>
                                                <th class="px-4 py-3 font-bold text-slate-500 text-xs uppercase text-center">Thu 25</th>
                                                <th class="px-4 py-3 font-bold text-slate-500 text-xs uppercase text-center">Fri 26</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-4 py-4 font-bold text-slate-900">Assembly Line A</td>
                                                <td class="px-2 py-2 bg-blue-50">
                                                    <div class="bg-blue-100 border-l-4 border-blue-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-blue-900">WO-4592</p>
                                                        <p class="text-blue-700">Pump V2 • 8h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2 bg-blue-50">
                                                    <div class="bg-blue-100 border-l-4 border-blue-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-blue-900">WO-4592</p>
                                                        <p class="text-blue-700">Pump V2 • 8h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="bg-emerald-100 border-l-4 border-emerald-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-emerald-900">WO-4591</p>
                                                        <p class="text-emerald-700">Valve Kit • 6h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="bg-emerald-100 border-l-4 border-emerald-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-emerald-900">WO-4591</p>
                                                        <p class="text-emerald-700">Valve Kit • 8h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="bg-red-100 border-l-4 border-red-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-red-900">⚠ OVERLOAD</p>
                                                        <p class="text-red-700">12h scheduled</p>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-4 py-4 font-bold text-slate-900">Assembly Line B</td>
                                                <td class="px-2 py-2 bg-blue-50">
                                                    <div class="bg-orange-100 border-l-4 border-orange-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-orange-900">WO-4590</p>
                                                        <p class="text-orange-700">Control Unit • 6h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2 bg-blue-50">
                                                    <div class="bg-orange-100 border-l-4 border-orange-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-orange-900">WO-4590</p>
                                                        <p class="text-orange-700">Control Unit • 4h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="border-2 border-dashed border-slate-300 p-3 rounded text-xs text-center text-slate-400">
                                                        Drop WO here
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="bg-purple-100 border-l-4 border-purple-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-purple-900">WO-4593</p>
                                                        <p class="text-purple-700">Sensor Pack • 8h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="bg-purple-100 border-l-4 border-purple-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-purple-900">WO-4593</p>
                                                        <p class="text-purple-700">Sensor Pack • 4h</p>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-4 py-4 font-bold text-slate-900">CNC Machining</td>
                                                <td class="px-2 py-2 bg-blue-50">
                                                    <div class="bg-blue-100 border-l-4 border-blue-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-blue-900">WO-4592</p>
                                                        <p class="text-blue-700">Cutting • 4h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2 bg-blue-50">
                                                    <div class="bg-slate-200 p-2 rounded text-xs text-center">
                                                        <p class="font-bold text-slate-600">🔧 Maintenance</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="bg-emerald-100 border-l-4 border-emerald-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-emerald-900">WO-4591</p>
                                                        <p class="text-emerald-700">Prep • 6h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="bg-purple-100 border-l-4 border-purple-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-purple-900">WO-4593</p>
                                                        <p class="text-purple-700">Cutting • 8h</p>
                                                    </div>
                                                </td>
                                                <td class="px-2 py-2">
                                                    <div class="bg-purple-100 border-l-4 border-purple-500 p-2 rounded text-xs">
                                                        <p class="font-bold text-purple-900">WO-4593</p>
                                                        <p class="text-purple-700">Finishing • 6h</p>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Unscheduled Work Orders -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Unscheduled Work Orders</h3>
                                    <span class="bg-orange-100 text-orange-700 text-xs font-bold px-2 py-1 rounded">3 Pending</span>
                                </div>
                                <div class="flex gap-4 overflow-x-auto pb-2">
                                    <div class="min-w-[200px] bg-orange-50 border border-orange-200 rounded-lg p-4 cursor-grab hover:shadow-md transition-shadow">
                                        <p class="font-bold text-slate-900">WO-4594</p>
                                        <p class="text-sm text-slate-600">Bearing Housing</p>
                                        <p class="text-xs text-orange-600 mt-2">Due: Aug 2 • 12h est.</p>
                                    </div>
                                    <div class="min-w-[200px] bg-orange-50 border border-orange-200 rounded-lg p-4 cursor-grab hover:shadow-md transition-shadow">
                                        <p class="font-bold text-slate-900">WO-4595</p>
                                        <p class="text-sm text-slate-600">Shaft Assembly</p>
                                        <p class="text-xs text-orange-600 mt-2">Due: Aug 5 • 8h est.</p>
                                    </div>
                                    <div class="min-w-[200px] bg-orange-50 border border-orange-200 rounded-lg p-4 cursor-grab hover:shadow-md transition-shadow">
                                        <p class="font-bold text-slate-900">WO-4596</p>
                                        <p class="text-sm text-slate-600">Gasket Set</p>
                                        <p class="text-xs text-orange-600 mt-2">Due: Aug 8 • 4h est.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Analytics Tab Content (Hidden by default) -->
                        <div id="planning-tab-analytics" class="space-y-6 hidden">
                            <!-- KPI Cards -->
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Plan Adherence</span>
                                        <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                    </div>
                                    <div class="text-3xl font-bold text-emerald-600">94%</div>
                                    <div class="flex items-center gap-1 mt-2 text-xs font-bold text-emerald-600">
                                        <span class="material-symbols-outlined text-[14px]">trending_up</span> +2.1% vs last period
                                    </div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">OTIF Rate</span>
                                        <span class="material-symbols-outlined text-blue-500">local_shipping</span>
                                    </div>
                                    <div class="text-3xl font-bold text-blue-600">87%</div>
                                    <div class="flex items-center gap-1 mt-2 text-xs font-bold text-orange-600">
                                        <span class="material-symbols-outlined text-[14px]">trending_down</span> -1.5% vs target
                                    </div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Capacity Utilization</span>
                                        <span class="material-symbols-outlined text-slate-400">speed</span>
                                    </div>
                                    <div class="text-3xl font-bold text-slate-900">78%</div>
                                    <div class="text-xs text-slate-500 mt-2">Target: 85%</div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Schedule Variance</span>
                                        <span class="material-symbols-outlined text-orange-500">schedule</span>
                                    </div>
                                    <div class="text-3xl font-bold text-orange-600">+2.4 days</div>
                                    <div class="text-xs text-slate-500 mt-2">Avg. delay per WO</div>
                                </div>
                            </div>

                            <!-- Charts -->
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="font-bold text-slate-900 mb-4">Production Output Trend</h3>
                                    <div class="h-64 flex items-center justify-center bg-slate-50 rounded-lg">
                                        <div class="text-center text-slate-400">
                                            <span class="material-symbols-outlined text-5xl mb-2">bar_chart</span>
                                            <p class="text-sm">Weekly production output chart</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="font-bold text-slate-900 mb-4">Work Order Completion Rate</h3>
                                    <div class="h-64 flex items-center justify-center bg-slate-50 rounded-lg">
                                        <div class="text-center text-slate-400">
                                            <span class="material-symbols-outlined text-5xl mb-2">pie_chart</span>
                                            <p class="text-sm">On-time vs delayed breakdown</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Parameters Tab Content (Hidden by default) -->
                        <div id="planning-tab-parameters" class="hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- General Settings -->
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                                        <span class="material-symbols-outlined text-primary">settings</span>
                                        General Settings
                                    </h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Planning Horizon (Weeks)</label>
                                            <input type="number" value="12" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Freeze Window (Days)</label>
                                            <input type="number" value="3" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Default Lead Time Buffer (%)</label>
                                            <input type="number" value="10" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                                        </div>
                                    </div>
                                </div>

                                <!-- Scheduling Rules -->
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                                        <span class="material-symbols-outlined text-primary">calendar_month</span>
                                        Scheduling Rules
                                    </h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Scheduling Method</label>
                                            <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                                                <option>Forward Scheduling</option>
                                                <option>Backward Scheduling</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Priority Algorithm</label>
                                            <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                                                <option>Earliest Due Date</option>
                                                <option>Critical Ratio</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-slate-700 mb-1">Max Overtime per Week (Hours)</label>
                                            <input type="number" value="20" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end">
                                <button onclick="savePlanningParameters()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PP-CAPACITY: Capacity Screen (Utilization, Load, Shifts, Conflicts, Simulation) -->
            <div id="pp-capacity" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex flex-col md:flex-row md:items-end justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900 tracking-tight">Capacity Management</h2>
                                <p class="text-slate-500 text-sm mt-1">Work center utilization, load analysis, and capacity planning.</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <select class="h-10 px-3 text-sm bg-white border border-slate-200 rounded-lg font-medium">
                                    <option>This Week</option>
                                    <option>Next 2 Weeks</option>
                                    <option>This Month</option>
                                </select>
                                <button class="flex items-center gap-2 h-10 px-4 bg-white border border-slate-200 rounded-lg text-slate-700 text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    <span class="material-symbols-outlined text-[18px]">science</span>
                                    Run Simulation
                                </button>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="flex items-center gap-1 border-b border-slate-200">
                            <button onclick="switchCapacityTab('utilization')" id="cap-tab-utilization" class="px-4 py-3 text-sm font-semibold text-primary border-b-2 border-primary">Utilization</button>
                            <button onclick="switchCapacityTab('load')" id="cap-tab-load" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Work Center Load</button>
                            <button onclick="switchCapacityTab('shifts')" id="cap-tab-shifts" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Shifts & Calendar</button>
                            <button onclick="switchCapacityTab('conflicts')" id="cap-tab-conflicts" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent flex items-center gap-2">
                                Conflicts
                                <span class="bg-red-100 text-red-700 text-xs px-1.5 py-0.5 rounded font-bold">2</span>
                            </button>
                        </div>

                        <!-- Utilization Tab -->
                        <div id="capacity-tab-utilization" class="space-y-6">
                            <!-- Heatmap -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Load Heatmap</h3>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-sm">
                                        <thead>
                                            <tr>
                                                <th class="text-left py-2 px-3 font-bold text-slate-500 text-xs uppercase">Work Center</th>
                                                <th class="py-2 px-3 font-bold text-slate-500 text-xs uppercase text-center">Mon</th>
                                                <th class="py-2 px-3 font-bold text-slate-500 text-xs uppercase text-center">Tue</th>
                                                <th class="py-2 px-3 font-bold text-slate-500 text-xs uppercase text-center">Wed</th>
                                                <th class="py-2 px-3 font-bold text-slate-500 text-xs uppercase text-center">Thu</th>
                                                <th class="py-2 px-3 font-bold text-slate-500 text-xs uppercase text-center">Fri</th>
                                                <th class="py-2 px-3 font-bold text-slate-500 text-xs uppercase text-center">Avg</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr>
                                                <td class="py-3 px-3 font-medium text-slate-900">Assembly Line A</td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-red-100 text-red-700">95%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-red-100 text-red-700">92%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-orange-100 text-orange-700">88%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-orange-100 text-orange-700">85%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-red-500 text-white">105%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="font-bold text-red-600">93%</span></td>
                                            </tr>
                                            <tr>
                                                <td class="py-3 px-3 font-medium text-slate-900">Assembly Line B</td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-emerald-100 text-emerald-700">65%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-emerald-100 text-emerald-700">70%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-slate-100 text-slate-600">40%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-emerald-100 text-emerald-700">75%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-emerald-100 text-emerald-700">68%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="font-bold text-emerald-600">64%</span></td>
                                            </tr>
                                            <tr>
                                                <td class="py-3 px-3 font-medium text-slate-900">CNC Machining</td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-orange-100 text-orange-700">82%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-slate-200 text-slate-500">0%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-red-100 text-red-700">90%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-red-100 text-red-700">95%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-orange-100 text-orange-700">88%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="font-bold text-orange-600">71%</span></td>
                                            </tr>
                                            <tr>
                                                <td class="py-3 px-3 font-medium text-slate-900">QC Lab</td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-slate-100 text-slate-600">45%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-slate-100 text-slate-600">50%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-slate-100 text-slate-600">40%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-slate-100 text-slate-600">55%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="inline-block w-12 py-1 rounded text-xs font-bold bg-emerald-100 text-emerald-700">60%</span></td>
                                                <td class="py-2 px-2 text-center"><span class="font-bold text-emerald-600">50%</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="mt-4 flex items-center gap-4 text-xs">
                                    <span class="flex items-center gap-1"><span class="w-4 h-4 bg-slate-100 rounded"></span> Under 60%</span>
                                    <span class="flex items-center gap-1"><span class="w-4 h-4 bg-emerald-100 rounded"></span> 60-80%</span>
                                    <span class="flex items-center gap-1"><span class="w-4 h-4 bg-orange-100 rounded"></span> 80-90%</span>
                                    <span class="flex items-center gap-1"><span class="w-4 h-4 bg-red-100 rounded"></span> 90-100%</span>
                                    <span class="flex items-center gap-1"><span class="w-4 h-4 bg-red-500 rounded"></span> Over 100%</span>
                                </div>
                            </div>

                            <!-- Summary -->
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="font-bold text-slate-900 mb-4">Capacity Summary</h3>
                                    <div class="space-y-4">
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm text-slate-700">Total Available Hours</span>
                                            <span class="text-sm font-bold text-slate-900">480 hrs</span>
                                        </div>
                                        <div>
                                            <div class="flex justify-between mb-1">
                                                <span class="text-sm text-slate-700">Scheduled Hours</span>
                                                <span class="text-sm font-bold text-slate-900">374 hrs (78%)</span>
                                            </div>
                                            <div class="w-full bg-slate-100 rounded-full h-2">
                                                <div class="bg-primary h-2 rounded-full" style="width: 78%"></div>
                                            </div>
                                        </div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm text-slate-700">Overtime Planned</span>
                                            <span class="text-sm font-bold text-orange-600">12 hrs</span>
                                        </div>
                                        <div class="flex justify-between mb-1">
                                            <span class="text-sm text-slate-700">Remaining Capacity</span>
                                            <span class="text-sm font-bold text-emerald-600">106 hrs</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="font-bold text-slate-900 mb-4">Active Conflicts</h3>
                                    <div class="space-y-3">
                                        <div class="p-3 bg-red-50 rounded-lg border border-red-100">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-bold text-red-900">Assembly Line A - Friday</p>
                                                    <p class="text-xs text-red-700">105% load - 1 hour over capacity</p>
                                                </div>
                                                <button onclick="resolveConflict('Assembly Line A')" class="px-3 py-1.5 bg-red-600 text-white text-xs font-bold rounded hover:bg-red-700">Resolve</button>
                                            </div>
                                        </div>
                                        <div class="p-3 bg-orange-50 rounded-lg border border-orange-100">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="text-sm font-bold text-orange-900">CNC Machining - Thursday</p>
                                                    <p class="text-xs text-orange-700">95% load - Near capacity</p>
                                                </div>
                                                <button onclick="reviewCapacity('CNC Machining')" class="px-3 py-1.5 bg-white border border-orange-300 text-orange-700 text-xs font-bold rounded hover:bg-orange-50">Review</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Work Center Load Tab (Hidden by default) -->
                        <div id="capacity-tab-load" class="space-y-6 hidden">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Work Center Load by Day</h3>
                                <div class="h-64 flex items-center justify-center bg-slate-50 rounded-lg">
                                    <div class="text-center text-slate-400">
                                        <span class="material-symbols-outlined text-5xl mb-2">stacked_bar_chart</span>
                                        <p class="text-sm">Work center load stacked bar chart</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                <div class="px-6 py-4 border-b border-slate-200">
                                    <h3 class="font-bold text-slate-900">Work Center Performance</h3>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Work Center</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Utilization</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Efficiency</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">WOs Completed</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Downtime</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Assembly Line A</td>
                                                <td class="px-6 py-4"><span class="font-bold text-red-600">92%</span></td>
                                                <td class="px-6 py-4"><span class="font-bold text-emerald-600">96%</span></td>
                                                <td class="px-6 py-4">24</td>
                                                <td class="px-6 py-4">4.5 hrs</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Assembly Line B</td>
                                                <td class="px-6 py-4"><span class="font-bold text-emerald-600">68%</span></td>
                                                <td class="px-6 py-4"><span class="font-bold text-emerald-600">91%</span></td>
                                                <td class="px-6 py-4">18</td>
                                                <td class="px-6 py-4">2.1 hrs</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">CNC Machining</td>
                                                <td class="px-6 py-4"><span class="font-bold text-orange-600">85%</span></td>
                                                <td class="px-6 py-4"><span class="font-bold text-orange-600">82%</span></td>
                                                <td class="px-6 py-4">32</td>
                                                <td class="px-6 py-4">8.2 hrs</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">QC Lab</td>
                                                <td class="px-6 py-4"><span class="font-bold text-emerald-600">45%</span></td>
                                                <td class="px-6 py-4"><span class="font-bold text-emerald-600">98%</span></td>
                                                <td class="px-6 py-4">56</td>
                                                <td class="px-6 py-4">0.8 hrs</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Shifts Tab (Hidden by default) -->
                        <div id="capacity-tab-shifts" class="space-y-6 hidden">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Shift Calendar</h3>
                                    <button onclick="addShift()" class="h-9 px-4 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Add Shift</button>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="border border-slate-200 rounded-lg p-4">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-bold text-slate-900">Morning Shift</span>
                                            <span class="bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded">Active</span>
                                        </div>
                                        <p class="text-sm text-slate-600">06:00 - 14:00</p>
                                        <p class="text-xs text-slate-500 mt-1">All work centers</p>
                                    </div>
                                    <div class="border border-slate-200 rounded-lg p-4">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-bold text-slate-900">Afternoon Shift</span>
                                            <span class="bg-emerald-100 text-emerald-700 text-xs px-2 py-1 rounded">Active</span>
                                        </div>
                                        <p class="text-sm text-slate-600">14:00 - 22:00</p>
                                        <p class="text-xs text-slate-500 mt-1">All work centers</p>
                                    </div>
                                    <div class="border border-slate-200 rounded-lg p-4">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-bold text-slate-900">Night Shift</span>
                                            <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded">CNC Only</span>
                                        </div>
                                        <p class="text-sm text-slate-600">22:00 - 06:00</p>
                                        <p class="text-xs text-slate-500 mt-1">CNC Machining only</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Upcoming Holidays & Downtime</h3>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div>
                                            <p class="text-sm font-bold text-slate-900">CNC-01 Scheduled Maintenance</p>
                                            <p class="text-xs text-slate-500">Jul 23, 2024 • Full Day</p>
                                        </div>
                                        <span class="bg-orange-100 text-orange-700 text-xs px-2 py-1 rounded font-bold">Maintenance</span>
                                    </div>
                                    <div class="flex items-center justify-between p-3 bg-slate-50 rounded-lg">
                                        <div>
                                            <p class="text-sm font-bold text-slate-900">National Holiday</p>
                                            <p class="text-xs text-slate-500">Aug 9, 2024 • Full Day</p>
                                        </div>
                                        <span class="bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded font-bold">Holiday</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Conflicts Tab (Hidden by default) -->
                        <div id="capacity-tab-conflicts" class="space-y-6 hidden">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Active Capacity Conflicts</h3>
                                <div class="space-y-4">
                                    <div class="p-4 bg-red-50 rounded-lg border border-red-200">
                                        <div class="flex items-start justify-between">
                                            <div class="flex-1">
                                                <div class="flex items-center gap-2 mb-2">
                                                    <span class="material-symbols-outlined text-red-500">error</span>
                                                    <span class="font-bold text-red-900">Assembly Line A - Friday Jul 26</span>
                                                </div>
                                                <p class="text-sm text-red-700 mb-2">12 hours scheduled against 8 hour capacity (105% utilization)</p>
                                                <div class="flex gap-2">
                                                    <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded">WO-4591</span>
                                                    <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded">WO-4592</span>
                                                </div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button onclick="rescheduleWork('WO-4591')" class="px-4 py-2 bg-white border border-red-300 text-red-700 text-sm font-semibold rounded-lg hover:bg-red-50">Reschedule</button>
                                                <button onclick="addOvertime('Assembly Line A')" class="px-4 py-2 bg-red-600 text-white text-sm font-bold rounded-lg hover:bg-red-700">Add Overtime</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-4 bg-orange-50 rounded-lg border border-orange-200">
                                        <div class="flex items-start justify-between">
                                            <div class="flex-1">
                                                <div class="flex items-center gap-2 mb-2">
                                                    <span class="material-symbols-outlined text-orange-500">warning</span>
                                                    <span class="font-bold text-orange-900">CNC Machining - Thursday Jul 25</span>
                                                </div>
                                                <p class="text-sm text-orange-700 mb-2">95% capacity utilization - potential delay risk</p>
                                                <div class="flex gap-2">
                                                    <span class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded">WO-4593</span>
                                                </div>
                                            </div>
                                            <div class="flex gap-2">
                                                <button onclick="reviewCapacity('CNC Machining')" class="px-4 py-2 bg-white border border-orange-300 text-orange-700 text-sm font-semibold rounded-lg hover:bg-orange-50">Review</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PP-MATERIALS: Materials & MRP Screen -->
            <div id="pp-materials" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex flex-col md:flex-row md:items-end justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900 tracking-tight">Materials & MRP</h2>
                                <p class="text-slate-500 text-sm mt-1">Bill of materials, MRP requirements, and material issue tracking.</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <button onclick="runMRP()" class="flex items-center gap-2 h-10 px-4 bg-white border border-slate-200 rounded-lg text-slate-700 text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    <span class="material-symbols-outlined text-[18px]">sync</span>
                                    Run MRP
                                </button>
                                <button onclick="createPurchaseRequest()" class="flex items-center gap-2 h-10 px-4 bg-primary text-white rounded-lg text-sm font-bold shadow-md hover:bg-primary-hover">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    Create Purchase Request
                                </button>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="flex items-center gap-1 border-b border-slate-200">
                            <button onclick="switchMaterialsTab('overview')" id="mat-tab-overview" class="px-4 py-3 text-sm font-semibold text-primary border-b-2 border-primary">Overview</button>
                            <button onclick="switchMaterialsTab('bom')" id="mat-tab-bom" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">BOM Explorer</button>
                            <button onclick="switchMaterialsTab('requirements')" id="mat-tab-requirements" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Net Requirements</button>
                            <button onclick="switchMaterialsTab('issues')" id="mat-tab-issues" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Material Issues</button>
                        </div>

                        <!-- Overview Tab -->
                        <div id="materials-tab-overview" class="space-y-6">
                            <!-- Status Cards -->
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">BOM Coverage</span>
                                        <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                    </div>
                                    <div class="text-3xl font-bold text-emerald-600">92%</div>
                                    <div class="text-xs text-slate-500 mt-2">Materials available for active WOs</div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Pending PRs</span>
                                        <span class="material-symbols-outlined text-blue-500">shopping_cart</span>
                                    </div>
                                    <div class="text-3xl font-bold text-blue-600">8</div>
                                    <div class="text-xs text-slate-500 mt-2">Awaiting approval</div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Shortages</span>
                                        <span class="material-symbols-outlined text-red-500">warning</span>
                                    </div>
                                    <div class="text-3xl font-bold text-red-600">3</div>
                                    <div class="text-xs text-red-600 mt-2">Items below safety stock</div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Issues Today</span>
                                        <span class="material-symbols-outlined text-slate-400">inventory_2</span>
                                    </div>
                                    <div class="text-3xl font-bold text-slate-900">12</div>
                                    <div class="text-xs text-slate-500 mt-2">Material transactions</div>
                                </div>
                            </div>

                            <!-- Shortage Alerts -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Material Shortages</h3>
                                    <span class="bg-red-100 text-red-700 text-xs font-bold px-2 py-1 rounded">3 Critical</span>
                                </div>
                                <div class="space-y-3">
                                    <div class="p-4 bg-red-50 rounded-lg border border-red-200 flex items-center justify-between">
                                        <div>
                                            <p class="font-bold text-red-900">Steel Tube 20mm (MAT-4521)</p>
                                            <p class="text-sm text-red-700">Required: 150 | Available: 100 | Short: 50 units</p>
                                            <p class="text-xs text-red-600 mt-1">Affects: WO-4592, WO-4593</p>
                                        </div>
                                        <button onclick="createPurchaseRequest('Steel Tube 20mm')" class="px-4 py-2 bg-red-600 text-white text-sm font-bold rounded-lg hover:bg-red-700">Create PR</button>
                                    </div>
                                    <div class="p-4 bg-orange-50 rounded-lg border border-orange-200 flex items-center justify-between">
                                        <div>
                                            <p class="font-bold text-orange-900">Copper Wire 2mm (MAT-3892)</p>
                                            <p class="text-sm text-orange-700">Required: 200 | Available: 180 | Short: 20 units</p>
                                            <p class="text-xs text-orange-600 mt-1">Affects: WO-4590</p>
                                        </div>
                                        <button onclick="reviewCapacity('Copper Wire 2mm')" class="px-4 py-2 bg-white border border-orange-300 text-orange-700 text-sm font-semibold rounded-lg hover:bg-orange-50">Review</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Recent Issues -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                <div class="px-6 py-4 border-b border-slate-200">
                                    <h3 class="font-bold text-slate-900">Recent Material Issues</h3>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Issue ID</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Work Order</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Material</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Qty Issued</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Issued By</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Time</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">MI-1024</td>
                                                <td class="px-6 py-4 font-mono text-primary">WO-4592</td>
                                                <td class="px-6 py-4">Steel Tube 20mm</td>
                                                <td class="px-6 py-4">50 units</td>
                                                <td class="px-6 py-4">John Smith</td>
                                                <td class="px-6 py-4">Today, 10:30</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">MI-1023</td>
                                                <td class="px-6 py-4 font-mono text-primary">WO-4591</td>
                                                <td class="px-6 py-4">Valve Body Cast Iron</td>
                                                <td class="px-6 py-4">100 units</td>
                                                <td class="px-6 py-4">Sarah Wilson</td>
                                                <td class="px-6 py-4">Today, 09:15</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- BOM Explorer Tab (Hidden by default) -->
                        <div id="materials-tab-bom" class="space-y-6 hidden">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center gap-4 mb-6">
                                    <div class="relative flex-1">
                                        <span class="material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-[20px]">search</span>
                                        <input type="text" id="bom-search-input" placeholder="Search by product, SKU, or BOM ID..." class="w-full h-10 pl-10 pr-4 border border-slate-200 rounded-lg text-sm"/>
                                    </div>
                                    <button onclick="searchBOM()" class="h-10 px-4 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Search</button>
                                </div>
                                <div class="border border-slate-200 rounded-lg p-4">
                                    <div class="flex items-center gap-3 mb-4">
                                        <span class="material-symbols-outlined text-primary">account_tree</span>
                                        <div>
                                            <p class="font-bold text-slate-900">Industrial Pump V2 (FG-1082)</p>
                                            <p class="text-xs text-slate-500">BOM-2024-082 • 3 Levels • 24 Components</p>
                                        </div>
                                    </div>
                                    <div class="ml-6 space-y-2">
                                        <div class="flex items-center gap-2 p-2 bg-slate-50 rounded">
                                            <span class="material-symbols-outlined text-slate-400 text-[18px]">subdirectory_arrow_right</span>
                                            <span class="text-sm font-medium">Pump Housing Assembly (SA-4521)</span>
                                            <span class="text-xs text-slate-500 ml-auto">x1</span>
                                        </div>
                                        <div class="flex items-center gap-2 p-2 bg-slate-50 rounded ml-6">
                                            <span class="material-symbols-outlined text-slate-400 text-[18px]">subdirectory_arrow_right</span>
                                            <span class="text-sm">Steel Tube 20mm (MAT-4521)</span>
                                            <span class="text-xs text-red-600 ml-2 bg-red-100 px-2 py-0.5 rounded">Shortage</span>
                                            <span class="text-xs text-slate-500 ml-auto">x3</span>
                                        </div>
                                        <div class="flex items-center gap-2 p-2 bg-slate-50 rounded ml-6">
                                            <span class="material-symbols-outlined text-slate-400 text-[18px]">subdirectory_arrow_right</span>
                                            <span class="text-sm">Cast Iron Flange (MAT-4522)</span>
                                            <span class="text-xs text-slate-500 ml-auto">x2</span>
                                        </div>
                                        <div class="flex items-center gap-2 p-2 bg-slate-50 rounded">
                                            <span class="material-symbols-outlined text-slate-400 text-[18px]">subdirectory_arrow_right</span>
                                            <span class="text-sm font-medium">Motor Unit (SA-4522)</span>
                                            <span class="text-xs text-slate-500 ml-auto">x1</span>
                                        </div>
                                        <div class="flex items-center gap-2 p-2 bg-slate-50 rounded">
                                            <span class="material-symbols-outlined text-slate-400 text-[18px]">subdirectory_arrow_right</span>
                                            <span class="text-sm font-medium">Control Panel (SA-4523)</span>
                                            <span class="text-xs text-slate-500 ml-auto">x1</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Net Requirements Tab (Hidden by default) -->
                        <div id="materials-tab-requirements" class="space-y-6 hidden">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between">
                                    <h3 class="font-bold text-slate-900">MRP Net Requirements</h3>
                                    <div class="flex items-center gap-2">
                                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                                            <option>Next 4 Weeks</option>
                                            <option>Next 8 Weeks</option>
                                            <option>Next 12 Weeks</option>
                                        </select>
                                        <button onclick="generatePRs()" class="h-9 px-4 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Generate PRs</button>
                                    </div>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Material</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">On Hand</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Gross Req</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Scheduled</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Net Req</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="hover:bg-slate-50 bg-red-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Steel Tube 20mm</td>
                                                <td class="px-6 py-4">100</td>
                                                <td class="px-6 py-4">150</td>
                                                <td class="px-6 py-4">0</td>
                                                <td class="px-6 py-4 font-bold text-red-600">-50</td>
                                                <td class="px-6 py-4">
                                                    <button onclick="createPurchaseRequest('Steel Tube 20mm')" class="px-3 py-1 bg-red-600 text-white text-xs font-bold rounded">Create PR</button>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Cast Iron Flange</td>
                                                <td class="px-6 py-4">200</td>
                                                <td class="px-6 py-4">180</td>
                                                <td class="px-6 py-4">0</td>
                                                <td class="px-6 py-4 font-bold text-emerald-600">+20</td>
                                                <td class="px-6 py-4 text-slate-400">-</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Motor 3HP</td>
                                                <td class="px-6 py-4">50</td>
                                                <td class="px-6 py-4">45</td>
                                                <td class="px-6 py-4">20</td>
                                                <td class="px-6 py-4 font-bold text-emerald-600">+25</td>
                                                <td class="px-6 py-4 text-slate-400">-</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Material Issues Tab (Hidden by default) -->
                        <div id="materials-tab-issues" class="space-y-6 hidden">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">Issue Material to Work Order</h3>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Work Order</label>
                                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                                            <option>Select work order...</option>
                                            <option>WO-4592 - Industrial Pump V2</option>
                                            <option>WO-4591 - Valve Assembly Kit</option>
                                            <option>WO-4590 - Control Unit Module</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Material</label>
                                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                                            <option>Select material...</option>
                                            <option>Steel Tube 20mm (MAT-4521)</option>
                                            <option>Cast Iron Flange (MAT-4522)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-700 mb-1">Quantity</label>
                                        <div class="flex gap-2">
                                            <input type="number" placeholder="Enter quantity" class="flex-1 h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                                            <button onclick="issueMaterial()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Issue</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PP-WORK-ORDERS: Work Orders Screen -->
            <div id="pp-work-orders" class="view-section">
                <div class="flex-1 overflow-y-auto custom-scrollbar">
                    <div class="px-6 py-4 border-b border-slate-200 flex flex-col md:flex-row justify-between items-start md:items-center gap-3 bg-white sticky top-0 z-10">
                        <div>
                            <h1 class="text-xl font-bold text-slate-900">Work Orders</h1>
                            <p class="text-xs text-slate-500 mt-0.5">Manage production work orders and track progress</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="openFilters()" class="h-9 px-3 text-sm font-semibold border border-slate-200 bg-white rounded-lg hover:bg-slate-50 flex items-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">filter_list</span>
                                Filters
                            </button>
                            <button onclick="showCreateWOModal()" class="h-9 px-4 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover shadow-sm flex items-center gap-2">
                                <span class="material-symbols-outlined text-[18px]">add</span>
                                Create Work Order
                            </button>
                        </div>
                    </div>

                    <div class="px-6 py-3 bg-slate-50 border-b border-slate-200 flex flex-wrap gap-2 items-center">
                        <div class="relative">
                            <span class="material-symbols-outlined absolute left-2.5 top-2 text-slate-400 text-[18px]">search</span>
                            <input type="text" placeholder="Search WO #, Item..." class="w-64 h-9 pl-9 pr-3 text-sm bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary"/>
                        </div>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Status: All</option>
                            <option>Draft</option>
                            <option>Released</option>
                            <option>In Progress</option>
                            <option>Completed</option>
                        </select>
                        <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                            <option>Priority: All</option>
                            <option>High</option>
                            <option>Medium</option>
                            <option>Low</option>
                        </select>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b border-slate-200 text-xs uppercase text-slate-500 font-bold">
                                <tr>
                                    <th class="px-6 py-3"><input type="checkbox" class="rounded border-slate-300 text-primary"/></th>
                                    <th class="px-6 py-3">WO #</th>
                                    <th class="px-6 py-3">Item</th>
                                    <th class="px-6 py-3">Quantity</th>
                                    <th class="px-6 py-3">Due Date</th>
                                    <th class="px-6 py-3">Work Center</th>
                                    <th class="px-6 py-3">Priority</th>
                                    <th class="px-6 py-3">Status</th>
                                    <th class="px-6 py-3">Progress</th>
                                    <th class="px-6 py-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 text-sm bg-white">
                                <tr onclick="showWODetailPanel()" class="hover:bg-slate-50 cursor-pointer">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded border-slate-300 text-primary" onclick="event.stopPropagation()"/></td>
                                    <td class="px-6 py-4 font-mono font-bold text-primary">WO-4592</td>
                                    <td class="px-6 py-4">
                                        <div class="font-bold text-slate-900">Industrial Pump V2</div>
                                        <div class="text-xs text-slate-500">FG-1082</div>
                                    </td>
                                    <td class="px-6 py-4">500</td>
                                    <td class="px-6 py-4">Jul 28, 2024</td>
                                    <td class="px-6 py-4">Assembly-A</td>
                                    <td class="px-6 py-4"><span class="px-2 py-1 bg-red-100 text-red-700 text-xs font-bold rounded">High</span></td>
                                    <td class="px-6 py-4"><span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded">In Progress</span></td>
                                    <td class="px-6 py-4">
                                        <div class="w-20 bg-slate-100 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 65%"></div>
                                        </div>
                                        <span class="text-xs text-slate-500">65%</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button class="text-slate-400 hover:text-primary">
                                            <span class="material-symbols-outlined">more_vert</span>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 cursor-pointer">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded border-slate-300 text-primary" onclick="event.stopPropagation()"/></td>
                                    <td class="px-6 py-4 font-mono font-bold text-primary">WO-4591</td>
                                    <td class="px-6 py-4">
                                        <div class="font-bold text-slate-900">Valve Assembly Kit</div>
                                        <div class="text-xs text-slate-500">FG-1045</div>
                                    </td>
                                    <td class="px-6 py-4">200</td>
                                    <td class="px-6 py-4">Jul 25, 2024</td>
                                    <td class="px-6 py-4">Assembly-A</td>
                                    <td class="px-6 py-4"><span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs font-bold rounded">Medium</span></td>
                                    <td class="px-6 py-4"><span class="px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded">Scheduled</span></td>
                                    <td class="px-6 py-4">
                                        <div class="w-20 bg-slate-100 rounded-full h-2">
                                            <div class="bg-emerald-500 h-2 rounded-full" style="width: 20%"></div>
                                        </div>
                                        <span class="text-xs text-slate-500">20%</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button class="text-slate-400 hover:text-primary">
                                            <span class="material-symbols-outlined">more_vert</span>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 cursor-pointer bg-orange-50">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded border-slate-300 text-primary" onclick="event.stopPropagation()"/></td>
                                    <td class="px-6 py-4 font-mono font-bold text-primary">WO-4590</td>
                                    <td class="px-6 py-4">
                                        <div class="font-bold text-slate-900">Control Unit Module</div>
                                        <div class="text-xs text-slate-500">FG-1098</div>
                                    </td>
                                    <td class="px-6 py-4">150</td>
                                    <td class="px-6 py-4 text-orange-600 font-bold">Jul 24, 2024 ⚠</td>
                                    <td class="px-6 py-4">Assembly-B</td>
                                    <td class="px-6 py-4"><span class="px-2 py-1 bg-red-100 text-red-700 text-xs font-bold rounded">High</span></td>
                                    <td class="px-6 py-4"><span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs font-bold rounded">At Risk</span></td>
                                    <td class="px-6 py-4">
                                        <div class="w-20 bg-slate-100 rounded-full h-2">
                                            <div class="bg-orange-500 h-2 rounded-full" style="width: 45%"></div>
                                        </div>
                                        <span class="text-xs text-slate-500">45%</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button class="text-slate-400 hover:text-primary">
                                            <span class="material-symbols-outlined">more_vert</span>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-slate-50 cursor-pointer">
                                    <td class="px-6 py-4"><input type="checkbox" class="rounded border-slate-300 text-primary" onclick="event.stopPropagation()"/></td>
                                    <td class="px-6 py-4 font-mono font-bold text-primary">WO-4589</td>
                                    <td class="px-6 py-4">
                                        <div class="font-bold text-slate-900">Bearing Housing</div>
                                        <div class="text-xs text-slate-500">FG-1032</div>
                                    </td>
                                    <td class="px-6 py-4">300</td>
                                    <td class="px-6 py-4">Jul 22, 2024</td>
                                    <td class="px-6 py-4">CNC-01</td>
                                    <td class="px-6 py-4"><span class="px-2 py-1 bg-slate-100 text-slate-700 text-xs font-bold rounded">Low</span></td>
                                    <td class="px-6 py-4"><span class="px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded">Completed</span></td>
                                    <td class="px-6 py-4">
                                        <div class="w-20 bg-slate-100 rounded-full h-2">
                                            <div class="bg-emerald-500 h-2 rounded-full" style="width: 100%"></div>
                                        </div>
                                        <span class="text-xs text-slate-500">100%</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button class="text-slate-400 hover:text-primary">
                                            <span class="material-symbols-outlined">more_vert</span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- PP-SHOPFLOOR: Shopfloor Screen -->
            <div id="pp-shopfloor" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex flex-col md:flex-row md:items-end justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900 tracking-tight">Shopfloor</h2>
                                <p class="text-slate-500 text-sm mt-1">Dispatch board, operation execution, and machine monitoring.</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <select class="h-10 px-3 text-sm bg-white border border-slate-200 rounded-lg font-medium">
                                    <option>All Work Centers</option>
                                    <option>Assembly Line A</option>
                                    <option>Assembly Line B</option>
                                    <option>CNC Machining</option>
                                </select>
                                <button onclick="refreshShopfloor()" class="flex items-center gap-2 h-10 px-4 bg-white border border-slate-200 rounded-lg text-slate-700 text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    <span class="material-symbols-outlined text-[18px]">refresh</span>
                                    Refresh
                                </button>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="flex items-center gap-1 border-b border-slate-200">
                            <button onclick="switchShopfloorTab('dispatch')" id="sf-tab-dispatch" class="px-4 py-3 text-sm font-semibold text-primary border-b-2 border-primary">Dispatch Board</button>
                            <button onclick="switchShopfloorTab('execution')" id="sf-tab-execution" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Operation Execution</button>
                            <button onclick="switchShopfloorTab('downtime')" id="sf-tab-downtime" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Machine Downtime</button>
                        </div>

                        <!-- Dispatch Tab -->
                        <div id="shopfloor-tab-dispatch" class="space-y-6">
                            <!-- Status Summary -->
                            <div class="grid grid-cols-1 sm:grid-cols-4 gap-4">
                                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 text-center">
                                    <p class="text-2xl font-bold text-blue-700">8</p>
                                    <p class="text-xs font-medium text-blue-600">Ready to Start</p>
                                </div>
                                <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-4 text-center">
                                    <p class="text-2xl font-bold text-emerald-700">12</p>
                                    <p class="text-xs font-medium text-emerald-600">In Progress</p>
                                </div>
                                <div class="bg-orange-50 border border-orange-200 rounded-xl p-4 text-center">
                                    <p class="text-2xl font-bold text-orange-700">3</p>
                                    <p class="text-xs font-medium text-orange-600">On Hold</p>
                                </div>
                                <div class="bg-slate-50 border border-slate-200 rounded-xl p-4 text-center">
                                    <p class="text-2xl font-bold text-slate-700">5</p>
                                    <p class="text-xs font-medium text-slate-600">Completed Today</p>
                                </div>
                            </div>

                            <!-- Operations Queue -->
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between">
                                    <h3 class="font-bold text-slate-900">Operations Queue</h3>
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs text-slate-500">Sort by:</span>
                                        <select class="h-8 px-2 text-xs bg-white border border-slate-200 rounded-lg">
                                            <option>Priority</option>
                                            <option>Due Date</option>
                                            <option>Work Center</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Operation</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Work Order</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Item</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Work Center</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Qty</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Est. Time</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Status</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">020 - Sub-Assembly</td>
                                                <td class="px-6 py-4 font-mono text-primary">WO-4592</td>
                                                <td class="px-6 py-4">Industrial Pump V2</td>
                                                <td class="px-6 py-4">Assembly-A</td>
                                                <td class="px-6 py-4">200</td>
                                                <td class="px-6 py-4">4h 00m</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded flex items-center gap-1 w-fit"><span class="w-2 h-2 rounded-full bg-blue-500 animate-pulse"></span> Running</span></td>
                                                <td class="px-6 py-4">
                                                    <button onclick="viewOperation('020 - Sub-Assembly')" class="px-3 py-1.5 bg-slate-100 text-slate-700 text-xs font-semibold rounded hover:bg-slate-200">View</button>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">010 - Cutting</td>
                                                <td class="px-6 py-4 font-mono text-primary">WO-4591</td>
                                                <td class="px-6 py-4">Valve Assembly Kit</td>
                                                <td class="px-6 py-4">CNC-01</td>
                                                <td class="px-6 py-4">200</td>
                                                <td class="px-6 py-4">2h 30m</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded">Ready</span></td>
                                                <td class="px-6 py-4">
                                                    <button onclick="startOperation('010 - Cutting')" class="px-3 py-1.5 bg-primary text-white text-xs font-bold rounded hover:bg-primary-hover">Start</button>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-slate-50 bg-orange-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">030 - Testing</td>
                                                <td class="px-6 py-4 font-mono text-primary">WO-4590</td>
                                                <td class="px-6 py-4">Control Unit Module</td>
                                                <td class="px-6 py-4">QC Lab</td>
                                                <td class="px-6 py-4">75</td>
                                                <td class="px-6 py-4">1h 00m</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs font-bold rounded">On Hold</span></td>
                                                <td class="px-6 py-4">
                                                    <button onclick="resumeOperation('030 - Testing')" class="px-3 py-1.5 bg-orange-500 text-white text-xs font-bold rounded hover:bg-orange-600">Resume</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Execution Tab (Hidden by default) -->
                        <div id="shopfloor-tab-execution" class="space-y-6 hidden">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Current Operation</h3>
                                <div class="border-2 border-blue-500 rounded-xl p-6 bg-blue-50">
                                    <div class="flex items-start justify-between mb-4">
                                        <div>
                                            <p class="text-lg font-bold text-slate-900">020 - Sub-Assembly</p>
                                            <p class="text-sm text-slate-600">WO-4592 • Industrial Pump V2</p>
                                        </div>
                                        <span class="px-3 py-1 bg-blue-600 text-white text-sm font-bold rounded-full flex items-center gap-2">
                                            <span class="w-2 h-2 rounded-full bg-white animate-pulse"></span>
                                            In Progress
                                        </span>
                                    </div>
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                        <div class="bg-white p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Target Qty</p>
                                            <p class="text-lg font-bold text-slate-900">200 units</p>
                                        </div>
                                        <div class="bg-white p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Completed</p>
                                            <p class="text-lg font-bold text-emerald-600">130 units</p>
                                        </div>
                                        <div class="bg-white p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Time Elapsed</p>
                                            <p class="text-lg font-bold text-slate-900">2h 35m</p>
                                        </div>
                                        <div class="bg-white p-3 rounded-lg">
                                            <p class="text-xs text-slate-500">Est. Remaining</p>
                                            <p class="text-lg font-bold text-slate-900">1h 25m</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <button onclick="pauseOperation()" class="flex-1 h-12 bg-orange-500 text-white text-sm font-bold rounded-lg hover:bg-orange-600 flex items-center justify-center gap-2">
                                            <span class="material-symbols-outlined">pause</span>
                                            Pause Operation
                                        </button>
                                        <button onclick="completeOperation()" class="flex-1 h-12 bg-emerald-500 text-white text-sm font-bold rounded-lg hover:bg-emerald-600 flex items-center justify-center gap-2">
                                            <span class="material-symbols-outlined">check_circle</span>
                                            Complete Operation
                                        </button>
                                        <button onclick="reportIssue()" class="h-12 px-6 bg-red-500 text-white text-sm font-bold rounded-lg hover:bg-red-600 flex items-center justify-center gap-2">
                                            <span class="material-symbols-outlined">report_problem</span>
                                            Report Issue
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Downtime Tab (Hidden by default) -->
                        <div id="shopfloor-tab-downtime" class="space-y-6 hidden">
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Total Downtime Today</span>
                                        <span class="material-symbols-outlined text-red-500">timer_off</span>
                                    </div>
                                    <div class="text-3xl font-bold text-red-600">4.5 hrs</div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Machines Online</span>
                                        <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                    </div>
                                    <div class="text-3xl font-bold text-emerald-600">8/10</div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Scheduled Maintenance</span>
                                        <span class="material-symbols-outlined text-orange-500">build</span>
                                    </div>
                                    <div class="text-3xl font-bold text-orange-600">2</div>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between">
                                    <h3 class="font-bold text-slate-900">Machine Status</h3>
                                    <button onclick="logDowntime()" class="h-9 px-4 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Log Downtime</button>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Machine</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Status</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Current Operation</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Last Downtime</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Next Maintenance</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Assembly Line A</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded flex items-center gap-1 w-fit"><span class="w-2 h-2 rounded-full bg-emerald-500"></span> Online</span></td>
                                                <td class="px-6 py-4">WO-4592</td>
                                                <td class="px-6 py-4">Jul 20 - 2.5 hrs</td>
                                                <td class="px-6 py-4">Aug 1, 2024</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50 bg-orange-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">CNC-01</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs font-bold rounded flex items-center gap-1 w-fit"><span class="w-2 h-2 rounded-full bg-orange-500"></span> Maintenance</span></td>
                                                <td class="px-6 py-4">-</td>
                                                <td class="px-6 py-4">Today - Ongoing</td>
                                                <td class="px-6 py-4">Today (Scheduled)</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50">
                                                <td class="px-6 py-4 font-medium text-slate-900">Assembly Line B</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-slate-100 text-slate-600 text-xs font-bold rounded flex items-center gap-1 w-fit"><span class="w-2 h-2 rounded-full bg-slate-400"></span> Idle</span></td>
                                                <td class="px-6 py-4">-</td>
                                                <td class="px-6 py-4">Jul 18 - 1.0 hr</td>
                                                <td class="px-6 py-4">Aug 5, 2024</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PP-QUALITY: Quality Screen -->
            <div id="pp-quality" class="view-section">
                <div class="flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar">
                    <div class="max-w-[1600px] mx-auto flex flex-col gap-6">
                        <div class="flex flex-col md:flex-row md:items-end justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-900 tracking-tight">Quality</h2>
                                <p class="text-slate-500 text-sm mt-1">Quality checks, scrap/rework tracking, and failure analysis.</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <button onclick="exportQualityReport()" class="flex items-center gap-2 h-10 px-4 bg-white border border-slate-200 rounded-lg text-slate-700 text-sm font-semibold shadow-sm hover:bg-slate-50">
                                    <span class="material-symbols-outlined text-[18px]">download</span>
                                    Export Report
                                </button>
                                <button onclick="createQualityCheck()" class="flex items-center gap-2 h-10 px-4 bg-primary text-white rounded-lg text-sm font-bold shadow-md hover:bg-primary-hover">
                                    <span class="material-symbols-outlined text-[18px]">add</span>
                                    Create Quality Check
                                </button>
                            </div>
                        </div>

                        <!-- Context Bar -->
                        <div class="bg-slate-50 border border-slate-200 rounded-xl p-4 flex flex-wrap items-center justify-between gap-4">
                            <div class="flex items-center gap-6">
                                <div class="flex flex-col">
                                    <span class="text-xs font-medium text-slate-500 uppercase">Open Issues</span>
                                    <span class="text-lg font-bold text-slate-900">6</span>
                                </div>
                                <div class="w-px h-8 bg-slate-200"></div>
                                <div class="flex flex-col">
                                    <span class="text-xs font-medium text-slate-500 uppercase">Scrap Rate</span>
                                    <span class="text-lg font-bold text-orange-600">2.3%</span>
                                </div>
                                <div class="w-px h-8 bg-slate-200"></div>
                                <div class="flex flex-col">
                                    <span class="text-xs font-medium text-red-600 uppercase flex items-center gap-1">Critical Blocks</span>
                                    <span class="text-lg font-bold text-red-600">2</span>
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <select class="h-9 px-3 text-sm bg-white border border-slate-200 rounded-lg">
                                    <option>Last 7 Days</option>
                                    <option>Last 30 Days</option>
                                </select>
                            </div>
                        </div>

                        <!-- Tabs -->
                        <div class="flex items-center gap-1 border-b border-slate-200">
                            <button onclick="switchQualityTab('checks')" id="q-tab-checks" class="px-4 py-3 text-sm font-semibold text-primary border-b-2 border-primary">Quality Checks</button>
                            <button onclick="switchQualityTab('scrap')" id="q-tab-scrap" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent flex items-center gap-2">
                                Scrap & Rework
                                <span class="bg-slate-100 text-slate-600 text-xs px-1.5 py-0.5 rounded font-bold">12</span>
                            </button>
                            <button onclick="switchQualityTab('templates')" id="q-tab-templates" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">QC Templates</button>
                            <button onclick="switchQualityTab('analysis')" id="q-tab-analysis" class="px-4 py-3 text-sm font-medium text-slate-500 hover:text-slate-800 border-b-2 border-transparent">Failure Analysis</button>
                        </div>

                        <!-- Quality Checks Tab -->
                        <div id="quality-tab-checks" class="space-y-6">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                                <div class="px-6 py-4 border-b border-slate-200 flex items-center justify-between">
                                    <h3 class="font-bold text-slate-900">Recent Quality Checks</h3>
                                    <button onclick="showNotification('Showing all quality checks', 'info')" class="text-sm text-primary font-semibold hover:underline">View All</button>
                                </div>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left text-sm">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Check ID</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Work Order</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Item</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Type</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Result</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Inspector</th>
                                                <th class="px-6 py-3 font-bold text-slate-500 text-xs uppercase">Date</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            <tr class="bg-red-50 hover:bg-red-100 cursor-pointer border-l-4 border-red-500">
                                                <td class="px-6 py-4 font-bold text-slate-900">QC-502</td>
                                                <td class="px-6 py-4 font-mono text-primary">WO-4592</td>
                                                <td class="px-6 py-4">Industrial Pump V2</td>
                                                <td class="px-6 py-4">Dimensional</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-red-100 text-red-700 text-xs font-bold rounded">Fail</span></td>
                                                <td class="px-6 py-4">John Smith</td>
                                                <td class="px-6 py-4">Today, 09:15</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50 cursor-pointer">
                                                <td class="px-6 py-4 font-medium text-slate-900">QC-501</td>
                                                <td class="px-6 py-4 font-mono text-primary">WO-4591</td>
                                                <td class="px-6 py-4">Valve Assembly Kit</td>
                                                <td class="px-6 py-4">Visual</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-bold rounded">Pass</span></td>
                                                <td class="px-6 py-4">Sarah Wilson</td>
                                                <td class="px-6 py-4">Today, 08:45</td>
                                            </tr>
                                            <tr class="hover:bg-slate-50 cursor-pointer">
                                                <td class="px-6 py-4 font-medium text-slate-900">QC-500</td>
                                                <td class="px-6 py-4 font-mono text-primary">WO-4590</td>
                                                <td class="px-6 py-4">Control Unit Module</td>
                                                <td class="px-6 py-4">Function</td>
                                                <td class="px-6 py-4"><span class="px-2 py-1 bg-orange-100 text-orange-700 text-xs font-bold rounded">Warn</span></td>
                                                <td class="px-6 py-4">Mike Johnson</td>
                                                <td class="px-6 py-4">Yesterday</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Scrap & Rework Tab (Hidden by default) -->
                        <div id="quality-tab-scrap" class="space-y-6 hidden">
                            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Scrap This Week</span>
                                        <span class="material-symbols-outlined text-red-500">delete</span>
                                    </div>
                                    <div class="text-3xl font-bold text-red-600">48 units</div>
                                    <div class="text-xs text-slate-500 mt-2">$12,450 value</div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Pending Rework</span>
                                        <span class="material-symbols-outlined text-orange-500">autorenew</span>
                                    </div>
                                    <div class="text-3xl font-bold text-orange-600">12 units</div>
                                    <div class="text-xs text-slate-500 mt-2">3 work orders affected</div>
                                </div>
                                <div class="bg-white p-5 rounded-xl border border-slate-200 shadow-sm">
                                    <div class="flex justify-between items-start mb-3">
                                        <span class="text-slate-500 text-xs font-bold uppercase tracking-wide">Rework Completed</span>
                                        <span class="material-symbols-outlined text-emerald-500">check_circle</span>
                                    </div>
                                    <div class="text-3xl font-bold text-emerald-600">8 units</div>
                                    <div class="text-xs text-slate-500 mt-2">This week</div>
                                </div>
                            </div>
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <h3 class="font-bold text-slate-900 mb-4">Recent Scrap/Rework Entries</h3>
                                <div class="space-y-3">
                                    <div class="p-4 bg-red-50 rounded-lg border border-red-200 flex items-center justify-between">
                                        <div>
                                            <p class="font-bold text-red-900">5 units scrapped - WO-4592</p>
                                            <p class="text-sm text-red-700">Dimensional tolerance failure</p>
                                            <p class="text-xs text-red-600 mt-1">Logged by John Smith • Today, 09:30</p>
                                        </div>
                                        <span class="px-3 py-1 bg-red-600 text-white text-xs font-bold rounded">Scrap</span>
                                    </div>
                                    <div class="p-4 bg-orange-50 rounded-lg border border-orange-200 flex items-center justify-between">
                                        <div>
                                            <p class="font-bold text-orange-900">8 units for rework - WO-4590</p>
                                            <p class="text-sm text-orange-700">Surface finish defect</p>
                                            <p class="text-xs text-orange-600 mt-1">Logged by Mike Johnson • Yesterday</p>
                                        </div>
                                        <span class="px-3 py-1 bg-orange-600 text-white text-xs font-bold rounded">Rework</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- QC Templates Tab (Hidden by default) -->
                        <div id="quality-tab-templates" class="space-y-6 hidden">
                            <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="font-bold text-slate-900">QC Check Templates</h3>
                                    <button onclick="createQCTemplate()" class="h-9 px-4 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create Template</button>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    <div class="border border-slate-200 rounded-lg p-4 hover:border-primary cursor-pointer transition-colors">
                                        <div class="flex items-center gap-3 mb-2">
                                            <span class="material-symbols-outlined text-primary">straighten</span>
                                            <span class="font-bold text-slate-900">Dimensional Check</span>
                                        </div>
                                        <p class="text-sm text-slate-600 mb-2">Standard dimensional tolerance verification</p>
                                        <p class="text-xs text-slate-500">12 checkpoints • Used 156 times</p>
                                    </div>
                                    <div class="border border-slate-200 rounded-lg p-4 hover:border-primary cursor-pointer transition-colors">
                                        <div class="flex items-center gap-3 mb-2">
                                            <span class="material-symbols-outlined text-primary">visibility</span>
                                            <span class="font-bold text-slate-900">Visual Inspection</span>
                                        </div>
                                        <p class="text-sm text-slate-600 mb-2">Surface quality and cosmetic defects</p>
                                        <p class="text-xs text-slate-500">8 checkpoints • Used 243 times</p>
                                    </div>
                                    <div class="border border-slate-200 rounded-lg p-4 hover:border-primary cursor-pointer transition-colors">
                                        <div class="flex items-center gap-3 mb-2">
                                            <span class="material-symbols-outlined text-primary">bolt</span>
                                            <span class="font-bold text-slate-900">Functional Test</span>
                                        </div>
                                        <p class="text-sm text-slate-600 mb-2">Performance and operational testing</p>
                                        <p class="text-xs text-slate-500">15 checkpoints • Used 89 times</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Failure Analysis Tab (Hidden by default) -->
                        <div id="quality-tab-analysis" class="space-y-6 hidden">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="font-bold text-slate-900 mb-4">Top Failure Reasons (This Month)</h3>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-slate-700">Dimensional Tolerance</span>
                                            <div class="flex items-center gap-2">
                                                <div class="w-32 bg-slate-100 rounded-full h-2">
                                                    <div class="bg-red-500 h-2 rounded-full" style="width: 45%"></div>
                                                </div>
                                                <span class="text-sm font-bold text-slate-900">45%</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-slate-700">Surface Defects</span>
                                            <div class="flex items-center gap-2">
                                                <div class="w-32 bg-slate-100 rounded-full h-2">
                                                    <div class="bg-orange-500 h-2 rounded-full" style="width: 28%"></div>
                                                </div>
                                                <span class="text-sm font-bold text-slate-900">28%</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-slate-700">Material Defects</span>
                                            <div class="flex items-center gap-2">
                                                <div class="w-32 bg-slate-100 rounded-full h-2">
                                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 15%"></div>
                                                </div>
                                                <span class="text-sm font-bold text-slate-900">15%</span>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-slate-700">Assembly Errors</span>
                                            <div class="flex items-center gap-2">
                                                <div class="w-32 bg-slate-100 rounded-full h-2">
                                                    <div class="bg-blue-500 h-2 rounded-full" style="width: 12%"></div>
                                                </div>
                                                <span class="text-sm font-bold text-slate-900">12%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-6">
                                    <h3 class="font-bold text-slate-900 mb-4">Defect Trend</h3>
                                    <div class="h-48 flex items-center justify-center bg-slate-50 rounded-lg">
                                        <div class="text-center text-slate-400">
                                            <span class="material-symbols-outlined text-5xl mb-2">show_chart</span>
                                            <p class="text-sm">Weekly defect rate trend chart</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- ======================= MODALS ======================= -->
    
    <!-- Create Work Order Modal -->
    <div id="create-wo-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-wo-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Work Order</h2>
                <button onclick="closeModal('create-wo-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Item / Product *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select item...</option>
                        <option>Industrial Pump V2 (FG-1082)</option>
                        <option>Valve Assembly Kit (FG-1045)</option>
                        <option>Control Unit Module (FG-1023)</option>
                        <option>Motor Assembly (FG-1098)</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Quantity *</label>
                        <input type="number" placeholder="Enter quantity" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm" value="100"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Unit</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>Units</option>
                            <option>Pieces</option>
                            <option>Sets</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Start Date *</label>
                        <input type="date" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Due Date *</label>
                        <input type="date" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Work Center</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Auto-assign based on routing</option>
                        <option>Assembly Line A</option>
                        <option>Assembly Line B</option>
                        <option>CNC Machining</option>
                        <option>QC Lab</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Priority</label>
                    <div class="flex gap-2">
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Low</button>
                        <button type="button" class="flex-1 h-10 border-2 border-primary bg-primary/5 text-primary rounded-lg text-sm font-bold">Medium</button>
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">High</button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Add any special instructions..." class="w-full h-20 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-wo-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitCreateWO()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create Work Order</button>
            </div>
        </div>
    </div>

    <!-- New Plan Version Modal -->
    <div id="new-version-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('new-version-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Plan Version</h2>
                <button onclick="closeModal('new-version-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Version Name *</label>
                    <input type="text" placeholder="e.g., Q1 2026 - Rush Order Scenario" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Base Version</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Q3 2024 - Base Plan (Active)</option>
                        <option>Q3 2024 - What-If: Rush</option>
                        <option>Start from scratch</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Planning Horizon</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>4 Weeks</option>
                        <option selected>8 Weeks</option>
                        <option>12 Weeks</option>
                        <option>16 Weeks</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Description</label>
                    <textarea placeholder="Describe the purpose of this plan version..." class="w-full h-20 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('new-version-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitNewVersion()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create Version</button>
            </div>
        </div>
    </div>

    <!-- Plan Version Detail Modal -->
    <div id="view-version-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('view-version-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[800px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-bold text-slate-900" id="version-detail-title">Q3 2024 - Base Plan</h2>
                    <p class="text-sm text-slate-500">Active Version • Last modified Jul 20, 2024</p>
                </div>
                <button onclick="closeModal('view-version-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-6">
                <div class="grid grid-cols-4 gap-4">
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-xs text-slate-500 mb-1">Work Orders</p>
                        <p class="text-2xl font-bold text-slate-900">156</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-xs text-slate-500 mb-1">Plan Horizon</p>
                        <p class="text-2xl font-bold text-slate-900">8 Weeks</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-xs text-slate-500 mb-1">Capacity Util.</p>
                        <p class="text-2xl font-bold text-emerald-600">78%</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-xs text-slate-500 mb-1">Conflicts</p>
                        <p class="text-2xl font-bold text-orange-600">3</p>
                    </div>
                </div>
                <div>
                    <h3 class="font-bold text-slate-900 mb-3">Scheduled Work Orders</h3>
                    <div class="border border-slate-200 rounded-lg overflow-hidden">
                        <table class="w-full text-left text-sm">
                            <thead class="bg-slate-50 border-b border-slate-200">
                                <tr>
                                    <th class="px-4 py-2 font-bold text-slate-500 text-xs uppercase">WO #</th>
                                    <th class="px-4 py-2 font-bold text-slate-500 text-xs uppercase">Item</th>
                                    <th class="px-4 py-2 font-bold text-slate-500 text-xs uppercase">Qty</th>
                                    <th class="px-4 py-2 font-bold text-slate-500 text-xs uppercase">Scheduled</th>
                                    <th class="px-4 py-2 font-bold text-slate-500 text-xs uppercase">Work Center</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr><td class="px-4 py-2 font-mono text-primary">WO-4592</td><td class="px-4 py-2">Industrial Pump V2</td><td class="px-4 py-2">500</td><td class="px-4 py-2">Jul 22-28</td><td class="px-4 py-2">Assembly-A</td></tr>
                                <tr><td class="px-4 py-2 font-mono text-primary">WO-4591</td><td class="px-4 py-2">Valve Assembly Kit</td><td class="px-4 py-2">200</td><td class="px-4 py-2">Jul 23-25</td><td class="px-4 py-2">CNC-01</td></tr>
                                <tr><td class="px-4 py-2 font-mono text-primary">WO-4590</td><td class="px-4 py-2">Control Unit Module</td><td class="px-4 py-2">150</td><td class="px-4 py-2">Jul 22-24</td><td class="px-4 py-2">Assembly-B</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('view-version-modal'); editPlanVersion();" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50 flex items-center gap-2">
                    <span class="material-symbols-outlined text-[18px]">edit</span> Edit Version
                </button>
                <div class="flex gap-3">
                    <button onclick="closeModal('view-version-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Close</button>
                    <button onclick="submitActivateVersion()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Activate This Version</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auto-Schedule Modal -->
    <div id="auto-schedule-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('auto-schedule-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Auto-Schedule Options</h2>
                <button onclick="closeModal('auto-schedule-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Scheduling Strategy</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="strategy" checked class="text-primary"/>
                            <div>
                                <p class="font-medium text-slate-900">Forward Scheduling</p>
                                <p class="text-xs text-slate-500">Schedule from start date forward</p>
                            </div>
                        </label>
                        <label class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="strategy" class="text-primary"/>
                            <div>
                                <p class="font-medium text-slate-900">Backward Scheduling</p>
                                <p class="text-xs text-slate-500">Schedule from due date backward</p>
                            </div>
                        </label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Priority Rules</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Due Date (Earliest first)</option>
                        <option>Priority Level (High first)</option>
                        <option>Shortest Processing Time</option>
                        <option>Customer Priority</option>
                    </select>
                </div>
                <div class="flex items-center gap-3">
                    <input type="checkbox" id="respect-constraints" checked class="rounded text-primary"/>
                    <label for="respect-constraints" class="text-sm text-slate-700">Respect capacity constraints</label>
                </div>
                <div class="flex items-center gap-3">
                    <input type="checkbox" id="minimize-changeover" class="rounded text-primary"/>
                    <label for="minimize-changeover" class="text-sm text-slate-700">Minimize machine changeover</label>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('auto-schedule-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="runAutoSchedule()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Run Auto-Schedule</button>
            </div>
        </div>
    </div>

    <!-- Run Simulation Modal -->
    <div id="simulation-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('simulation-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Capacity Simulation</h2>
                <button onclick="closeModal('simulation-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-blue-500">info</span>
                        <p class="text-sm text-blue-800">Simulation will analyze capacity impact without making actual changes.</p>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Simulation Scenario</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Current Plan - What-If Analysis</option>
                        <option>Add 20% Rush Orders</option>
                        <option>Remove Night Shift</option>
                        <option>Machine Breakdown Scenario</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Time Period</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>Next 2 Weeks</option>
                            <option selected>Next 4 Weeks</option>
                            <option>Next 8 Weeks</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Work Centers</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>All Work Centers</option>
                            <option>Assembly Lines Only</option>
                            <option>CNC Machining Only</option>
                        </select>
                    </div>
                </div>
                <div id="simulation-results" class="hidden">
                    <h3 class="font-bold text-slate-900 mb-3">Simulation Results</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-4">
                            <p class="text-xs text-emerald-600 mb-1">Avg. Utilization</p>
                            <p class="text-2xl font-bold text-emerald-700">82%</p>
                        </div>
                        <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                            <p class="text-xs text-orange-600 mb-1">Potential Conflicts</p>
                            <p class="text-2xl font-bold text-orange-700">5</p>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-slate-50 rounded-lg">
                        <p class="text-sm font-medium text-slate-700 mb-2">Key Findings:</p>
                        <ul class="text-sm text-slate-600 space-y-1">
                            <li>• Assembly Line A will exceed capacity on 3 days</li>
                            <li>• CNC-01 has 15% spare capacity available</li>
                            <li>• Consider shifting 2 WOs to Line B</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('simulation-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Close</button>
                <button onclick="executeSimulation()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Run Simulation</button>
            </div>
        </div>
    </div>

    <!-- Resolve Conflict Modal -->
    <div id="resolve-conflict-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('resolve-conflict-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[550px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Resolve Capacity Conflict</h2>
                <button onclick="closeModal('resolve-conflict-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    <div class="flex items-center gap-3 mb-2">
                        <span class="material-symbols-outlined text-red-500">error</span>
                        <span class="font-bold text-red-900" id="conflict-title">Assembly Line A - Friday Jul 26</span>
                    </div>
                    <p class="text-sm text-red-700">12 hours scheduled against 8 hour capacity (150% utilization)</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Resolution Options</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="resolution" checked class="text-primary"/>
                            <div class="flex-1">
                                <p class="font-medium text-slate-900">Add Overtime</p>
                                <p class="text-xs text-slate-500">Extend shift by 4 hours (+$240 labor cost)</p>
                            </div>
                        </label>
                        <label class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="resolution" class="text-primary"/>
                            <div class="flex-1">
                                <p class="font-medium text-slate-900">Reschedule to Next Day</p>
                                <p class="text-xs text-slate-500">Move WO-4591 to Saturday (may affect due date)</p>
                            </div>
                        </label>
                        <label class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="resolution" class="text-primary"/>
                            <div class="flex-1">
                                <p class="font-medium text-slate-900">Split Across Work Centers</p>
                                <p class="text-xs text-slate-500">Move 50% to Assembly Line B</p>
                            </div>
                        </label>
                        <label class="flex items-center gap-3 p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="radio" name="resolution" class="text-primary"/>
                            <div class="flex-1">
                                <p class="font-medium text-slate-900">Reduce Batch Size</p>
                                <p class="text-xs text-slate-500">Produce 80% now, remainder next week</p>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('resolve-conflict-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="applyConflictResolution()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Apply Resolution</button>
            </div>
        </div>
    </div>

    <!-- Add Shift Modal -->
    <div id="add-shift-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('add-shift-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Add New Shift</h2>
                <button onclick="closeModal('add-shift-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Shift Name *</label>
                    <input type="text" placeholder="e.g., Weekend Shift" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Start Time</label>
                        <input type="time" value="06:00" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">End Time</label>
                        <input type="time" value="14:00" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Work Centers</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2"><input type="checkbox" checked class="rounded text-primary"/> Assembly Line A</label>
                        <label class="flex items-center gap-2"><input type="checkbox" checked class="rounded text-primary"/> Assembly Line B</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="rounded text-primary"/> CNC Machining</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="rounded text-primary"/> QC Lab</label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Days Active</label>
                    <div class="flex flex-wrap gap-2">
                        <button type="button" class="px-3 py-1.5 border-2 border-primary bg-primary/5 text-primary text-sm font-bold rounded-lg">Mon</button>
                        <button type="button" class="px-3 py-1.5 border-2 border-primary bg-primary/5 text-primary text-sm font-bold rounded-lg">Tue</button>
                        <button type="button" class="px-3 py-1.5 border-2 border-primary bg-primary/5 text-primary text-sm font-bold rounded-lg">Wed</button>
                        <button type="button" class="px-3 py-1.5 border-2 border-primary bg-primary/5 text-primary text-sm font-bold rounded-lg">Thu</button>
                        <button type="button" class="px-3 py-1.5 border-2 border-primary bg-primary/5 text-primary text-sm font-bold rounded-lg">Fri</button>
                        <button type="button" class="px-3 py-1.5 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50">Sat</button>
                        <button type="button" class="px-3 py-1.5 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50">Sun</button>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('add-shift-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitAddShift()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Add Shift</button>
            </div>
        </div>
    </div>

    <!-- Create Purchase Request Modal -->
    <div id="create-pr-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-pr-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[550px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Purchase Request</h2>
                <button onclick="closeModal('create-pr-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Material *</label>
                    <select id="pr-material" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select material...</option>
                        <option>Steel Tube 20mm (MAT-4521)</option>
                        <option>Copper Wire 2mm (MAT-3892)</option>
                        <option>Cast Iron Flange (MAT-4522)</option>
                        <option>Motor 3HP (MAT-2156)</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Quantity *</label>
                        <input type="number" id="pr-qty" placeholder="Enter quantity" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm" value="50"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Unit</label>
                        <input type="text" value="units" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm bg-slate-50" readonly/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Required By</label>
                    <input type="date" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Preferred Vendor</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Auto-select based on price</option>
                        <option>Steel Corp Inc.</option>
                        <option>Metal Supplies Ltd.</option>
                        <option>Industrial Materials Co.</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Add procurement notes..." class="w-full h-16 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-3">
                    <p class="text-sm text-orange-800"><strong>Shortage Alert:</strong> Current stock is 100 units. 50 units short for planned production.</p>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-pr-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitPurchaseRequest()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create PR</button>
            </div>
        </div>
    </div>

    <!-- Run MRP Modal -->
    <div id="run-mrp-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('run-mrp-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Run MRP Calculation</h2>
                <button onclick="closeModal('run-mrp-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Planning Horizon</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Next 4 Weeks</option>
                        <option selected>Next 8 Weeks</option>
                        <option>Next 12 Weeks</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Include</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2"><input type="checkbox" checked class="rounded text-primary"/> Released Work Orders</label>
                        <label class="flex items-center gap-2"><input type="checkbox" checked class="rounded text-primary"/> Planned Work Orders</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="rounded text-primary"/> Forecast Demand</label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Options</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2"><input type="checkbox" checked class="rounded text-primary"/> Consider safety stock</label>
                        <label class="flex items-center gap-2"><input type="checkbox" checked class="rounded text-primary"/> Include scheduled receipts</label>
                        <label class="flex items-center gap-2"><input type="checkbox" class="rounded text-primary"/> Auto-generate purchase requests</label>
                    </div>
                </div>
                <div id="mrp-progress" class="hidden">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
                            <span class="font-medium text-blue-800">Running MRP calculation...</span>
                        </div>
                        <div class="w-full bg-blue-200 rounded-full h-2">
                            <div class="bg-blue-500 h-2 rounded-full transition-all" style="width: 0%" id="mrp-progress-bar"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('run-mrp-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="executeMRP()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Run MRP</button>
            </div>
        </div>
    </div>

    <!-- Operation Detail Modal -->
    <div id="operation-detail-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('operation-detail-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[650px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <div>
                    <h2 class="text-lg font-bold text-slate-900" id="operation-detail-title">020 - Sub-Assembly</h2>
                    <p class="text-sm text-slate-500">WO-4592 • Industrial Pump V2</p>
                </div>
                <button onclick="closeModal('operation-detail-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="flex items-center gap-3 mb-4">
                    <span class="px-3 py-1 bg-blue-600 text-white text-sm font-bold rounded-full flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full bg-white animate-pulse"></span>
                        In Progress
                    </span>
                    <span class="text-sm text-slate-500">Started: Today, 08:00</span>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-xs text-slate-500 mb-1">Target Qty</p>
                        <p class="text-xl font-bold text-slate-900">200 units</p>
                    </div>
                    <div class="bg-emerald-50 p-4 rounded-lg">
                        <p class="text-xs text-emerald-600 mb-1">Completed</p>
                        <p class="text-xl font-bold text-emerald-700">130 units</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-xs text-slate-500 mb-1">Time Elapsed</p>
                        <p class="text-xl font-bold text-slate-900">2h 35m</p>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <p class="text-xs text-slate-500 mb-1">Efficiency</p>
                        <p class="text-xl font-bold text-emerald-600">96%</p>
                    </div>
                </div>
                <div>
                    <p class="text-sm font-medium text-slate-700 mb-2">Progress</p>
                    <div class="w-full bg-slate-100 rounded-full h-4">
                        <div class="bg-blue-500 h-4 rounded-full flex items-center justify-end pr-2" style="width: 65%">
                            <span class="text-xs text-white font-bold">65%</span>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <p class="text-sm font-medium text-slate-700 mb-2">Operation Details</p>
                        <div class="bg-slate-50 rounded-lg p-3 space-y-2 text-sm">
                            <div class="flex justify-between"><span class="text-slate-500">Work Center:</span><span class="font-medium">Assembly Line A</span></div>
                            <div class="flex justify-between"><span class="text-slate-500">Operator:</span><span class="font-medium">John Smith</span></div>
                            <div class="flex justify-between"><span class="text-slate-500">Machine:</span><span class="font-medium">ASM-01</span></div>
                            <div class="flex justify-between"><span class="text-slate-500">Setup Time:</span><span class="font-medium">30 min</span></div>
                        </div>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-slate-700 mb-2">Materials Used</p>
                        <div class="bg-slate-50 rounded-lg p-3 space-y-2 text-sm">
                            <div class="flex justify-between"><span class="text-slate-500">Pump Housing:</span><span class="font-medium">130 / 200</span></div>
                            <div class="flex justify-between"><span class="text-slate-500">Motor Unit:</span><span class="font-medium">130 / 200</span></div>
                            <div class="flex justify-between"><span class="text-slate-500">Control Panel:</span><span class="font-medium">130 / 200</span></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between px-6 py-4 border-t border-slate-200">
                <button onclick="reportIssue()" class="h-10 px-4 border border-red-200 text-red-600 text-sm font-semibold rounded-lg hover:bg-red-50 flex items-center gap-2">
                    <span class="material-symbols-outlined text-[18px]">report_problem</span> Report Issue
                </button>
                <div class="flex gap-3">
                    <button onclick="closeModal('operation-detail-modal'); pauseOperation();" class="h-10 px-4 bg-orange-500 text-white text-sm font-bold rounded-lg hover:bg-orange-600">Pause</button>
                    <button onclick="closeModal('operation-detail-modal'); completeOperation();" class="h-10 px-4 bg-emerald-500 text-white text-sm font-bold rounded-lg hover:bg-emerald-600">Complete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Report Issue Modal -->
    <div id="report-issue-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('report-issue-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Report Production Issue</h2>
                <button onclick="closeModal('report-issue-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Issue Type *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select issue type...</option>
                        <option>Machine Breakdown</option>
                        <option>Material Defect</option>
                        <option>Quality Issue</option>
                        <option>Tool Failure</option>
                        <option>Operator Error</option>
                        <option>Other</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Severity</label>
                    <div class="flex gap-2">
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Low</button>
                        <button type="button" class="flex-1 h-10 border-2 border-orange-500 bg-orange-50 text-orange-700 rounded-lg text-sm font-bold">Medium</button>
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">High</button>
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Critical</button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Description *</label>
                    <textarea placeholder="Describe the issue in detail..." class="w-full h-24 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Affected Quantity</label>
                    <input type="number" placeholder="Number of units affected" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div class="flex items-center gap-3">
                    <input type="checkbox" id="stop-production" class="rounded text-primary"/>
                    <label for="stop-production" class="text-sm text-slate-700">Stop production until resolved</label>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('report-issue-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitIssueReport()" class="h-10 px-6 bg-red-600 text-white text-sm font-bold rounded-lg hover:bg-red-700">Report Issue</button>
            </div>
        </div>
    </div>

    <!-- Log Downtime Modal -->
    <div id="log-downtime-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('log-downtime-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Log Machine Downtime</h2>
                <button onclick="closeModal('log-downtime-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Machine / Work Center *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select machine...</option>
                        <option>Assembly Line A - ASM-01</option>
                        <option>Assembly Line B - ASM-02</option>
                        <option>CNC Machining - CNC-01</option>
                        <option>CNC Machining - CNC-02</option>
                        <option>QC Lab - QC-01</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Downtime Reason *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select reason...</option>
                        <option>Scheduled Maintenance</option>
                        <option>Unplanned Breakdown</option>
                        <option>Tool Change</option>
                        <option>Material Shortage</option>
                        <option>Operator Unavailable</option>
                        <option>Setup/Changeover</option>
                        <option>Other</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Start Time</label>
                        <input type="datetime-local" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">End Time</label>
                        <input type="datetime-local" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Additional details about the downtime..." class="w-full h-20 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('log-downtime-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitDowntimeLog()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Log Downtime</button>
            </div>
        </div>
    </div>

    <!-- Create Quality Check Modal -->
    <div id="create-qc-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-qc-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[550px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Quality Check</h2>
                <button onclick="closeModal('create-qc-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Work Order *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select work order...</option>
                        <option>WO-4592 - Industrial Pump V2</option>
                        <option>WO-4591 - Valve Assembly Kit</option>
                        <option>WO-4590 - Control Unit Module</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Check Type *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select check type...</option>
                        <option>Dimensional Check</option>
                        <option>Visual Inspection</option>
                        <option>Functional Test</option>
                        <option>Material Verification</option>
                        <option>Final Inspection</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Sample Size</label>
                        <input type="number" value="10" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Inspector</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>Self</option>
                            <option>John Smith</option>
                            <option>Sarah Wilson</option>
                            <option>Mike Johnson</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">QC Template</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button type="button" class="p-3 border-2 border-primary bg-primary/5 rounded-lg text-center">
                            <span class="material-symbols-outlined text-primary">straighten</span>
                            <p class="text-xs font-medium text-primary mt-1">Dimensional</p>
                        </button>
                        <button type="button" class="p-3 border border-slate-200 rounded-lg text-center hover:bg-slate-50">
                            <span class="material-symbols-outlined text-slate-400">visibility</span>
                            <p class="text-xs font-medium text-slate-600 mt-1">Visual</p>
                        </button>
                        <button type="button" class="p-3 border border-slate-200 rounded-lg text-center hover:bg-slate-50">
                            <span class="material-symbols-outlined text-slate-400">bolt</span>
                            <p class="text-xs font-medium text-slate-600 mt-1">Functional</p>
                        </button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Additional inspection notes..." class="w-full h-16 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-qc-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitQualityCheck()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create Check</button>
            </div>
        </div>
    </div>

    <!-- Create QC Template Modal -->
    <div id="create-template-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-template-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create QC Template</h2>
                <button onclick="closeModal('create-template-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Template Name *</label>
                    <input type="text" placeholder="e.g., Pump Assembly Final Check" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Check Type</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Dimensional</option>
                        <option>Visual</option>
                        <option>Functional</option>
                        <option>Material</option>
                        <option>Combined</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Checkpoints</label>
                    <div class="space-y-2" id="checkpoint-list">
                        <div class="flex items-center gap-2 p-3 bg-slate-50 rounded-lg">
                            <span class="text-sm text-slate-600">1.</span>
                            <input type="text" placeholder="Enter checkpoint description" class="flex-1 h-8 px-2 border border-slate-200 rounded text-sm" value="Verify outer dimensions within ±0.5mm"/>
                            <button class="p-1 text-slate-400 hover:text-red-500"><span class="material-symbols-outlined text-[18px]">delete</span></button>
                        </div>
                        <div class="flex items-center gap-2 p-3 bg-slate-50 rounded-lg">
                            <span class="text-sm text-slate-600">2.</span>
                            <input type="text" placeholder="Enter checkpoint description" class="flex-1 h-8 px-2 border border-slate-200 rounded text-sm" value="Check surface finish for defects"/>
                            <button class="p-1 text-slate-400 hover:text-red-500"><span class="material-symbols-outlined text-[18px]">delete</span></button>
                        </div>
                        <div class="flex items-center gap-2 p-3 bg-slate-50 rounded-lg">
                            <span class="text-sm text-slate-600">3.</span>
                            <input type="text" placeholder="Enter checkpoint description" class="flex-1 h-8 px-2 border border-slate-200 rounded text-sm" value="Verify thread pitch accuracy"/>
                            <button class="p-1 text-slate-400 hover:text-red-500"><span class="material-symbols-outlined text-[18px]">delete</span></button>
                        </div>
                    </div>
                    <button onclick="addCheckpoint()" class="mt-2 text-sm text-primary font-semibold hover:underline flex items-center gap-1">
                        <span class="material-symbols-outlined text-[18px]">add</span> Add Checkpoint
                    </button>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Applicable Products</label>
                    <select multiple class="w-full h-24 px-3 py-2 border border-slate-200 rounded-lg text-sm">
                        <option selected>Industrial Pump V2</option>
                        <option selected>Industrial Pump V3</option>
                        <option>Valve Assembly Kit</option>
                        <option>Control Unit Module</option>
                    </select>
                    <p class="text-xs text-slate-500 mt-1">Hold Ctrl/Cmd to select multiple</p>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-template-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitQCTemplate()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create Template</button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="export-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('export-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[400px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900" id="export-modal-title">Export</h2>
                <button onclick="closeModal('export-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Export Format</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button type="button" class="p-3 border-2 border-primary bg-primary/5 rounded-lg text-center">
                            <span class="material-symbols-outlined text-primary">table_chart</span>
                            <p class="text-xs font-medium text-primary mt-1">Excel</p>
                        </button>
                        <button type="button" class="p-3 border border-slate-200 rounded-lg text-center hover:bg-slate-50">
                            <span class="material-symbols-outlined text-slate-400">picture_as_pdf</span>
                            <p class="text-xs font-medium text-slate-600 mt-1">PDF</p>
                        </button>
                        <button type="button" class="p-3 border border-slate-200 rounded-lg text-center hover:bg-slate-50">
                            <span class="material-symbols-outlined text-slate-400">data_object</span>
                            <p class="text-xs font-medium text-slate-600 mt-1">CSV</p>
                        </button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Date Range</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Last 7 days</option>
                        <option selected>Last 30 days</option>
                        <option>This month</option>
                        <option>Custom range</option>
                    </select>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('export-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="executeExport()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Export</button>
            </div>
        </div>
    </div>

    <!-- Filters Modal -->
    <div id="filters-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('filters-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[450px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Filter Work Orders</h2>
                <button onclick="closeModal('filters-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Status</label>
                    <div class="flex flex-wrap gap-2">
                        <label class="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="checkbox" checked class="rounded text-primary"/> Draft
                        </label>
                        <label class="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="checkbox" checked class="rounded text-primary"/> Released
                        </label>
                        <label class="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="checkbox" checked class="rounded text-primary"/> In Progress
                        </label>
                        <label class="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="checkbox" class="rounded text-primary"/> Completed
                        </label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Priority</label>
                    <div class="flex gap-2">
                        <label class="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="checkbox" checked class="rounded text-primary"/> High
                        </label>
                        <label class="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="checkbox" checked class="rounded text-primary"/> Medium
                        </label>
                        <label class="flex items-center gap-2 px-3 py-1.5 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50">
                            <input type="checkbox" checked class="rounded text-primary"/> Low
                        </label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Work Center</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>All Work Centers</option>
                        <option>Assembly Line A</option>
                        <option>Assembly Line B</option>
                        <option>CNC Machining</option>
                        <option>QC Lab</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Due Date Range</label>
                    <div class="grid grid-cols-2 gap-2">
                        <input type="date" class="h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                        <input type="date" class="h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-between px-6 py-4 border-t border-slate-200">
                <button onclick="resetFilters()" class="text-sm text-primary font-semibold hover:underline">Reset Filters</button>
                <div class="flex gap-3">
                    <button onclick="closeModal('filters-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                    <button onclick="applyFilters()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Apply Filters</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Issue Material Modal -->
    <div id="issue-material-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('issue-material-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Issue Material</h2>
                <button onclick="closeModal('issue-material-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Work Order *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select work order...</option>
                        <option>WO-4592 - Industrial Pump V2</option>
                        <option>WO-4591 - Valve Assembly Kit</option>
                        <option>WO-4590 - Control Unit Module</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Material *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select material...</option>
                        <option>Steel Tube 20mm (MAT-4521) - 100 available</option>
                        <option>Cast Iron Flange (MAT-4522) - 200 available</option>
                        <option>Motor 3HP (MAT-2156) - 50 available</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Quantity *</label>
                        <input type="number" placeholder="Enter quantity" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Storage Location</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>WH-A-01</option>
                            <option>WH-A-02</option>
                            <option>WH-B-01</option>
                        </select>
                    </div>
                </div>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                    <p class="text-sm text-blue-800"><strong>BOM Requirement:</strong> 50 units per finished product</p>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('issue-material-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitMaterialIssue()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Issue Material</button>
            </div>
        </div>
    </div>

    <!-- ======================= INVENTORY MODALS ======================= -->

    <!-- Create Transfer Modal -->
    <div id="create-transfer-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-transfer-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Stock Transfer</h2>
                <button onclick="closeModal('create-transfer-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">From Warehouse *</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option value="">Select source...</option>
                            <option>Main Warehouse (WH-001)</option>
                            <option>Secondary Storage (WH-002)</option>
                            <option>Distribution Center (WH-003)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">To Warehouse *</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option value="">Select destination...</option>
                            <option>Main Warehouse (WH-001)</option>
                            <option>Secondary Storage (WH-002)</option>
                            <option>Distribution Center (WH-003)</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Transfer Type</label>
                    <div class="flex gap-2">
                        <button type="button" class="flex-1 h-10 border-2 border-primary bg-primary/5 text-primary rounded-lg text-sm font-bold">Standard</button>
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Urgent</button>
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Scheduled</button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Items to Transfer</label>
                    <div class="border border-slate-200 rounded-lg divide-y divide-slate-100">
                        <div class="p-3 flex items-center gap-3">
                            <select class="flex-1 h-9 px-3 border border-slate-200 rounded-lg text-sm">
                                <option>Select item...</option>
                                <option>SKU-001 - Industrial Pump V2</option>
                                <option>SKU-002 - Valve Assembly Kit</option>
                                <option>SKU-003 - Control Unit Module</option>
                            </select>
                            <input type="number" placeholder="Qty" class="w-24 h-9 px-3 border border-slate-200 rounded-lg text-sm"/>
                            <button class="p-2 text-slate-400 hover:text-red-500"><span class="material-symbols-outlined text-[18px]">delete</span></button>
                        </div>
                    </div>
                    <button onclick="addTransferItem()" class="mt-2 text-sm text-primary font-semibold hover:underline flex items-center gap-1">
                        <span class="material-symbols-outlined text-[18px]">add</span> Add Item
                    </button>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Scheduled Date</label>
                    <input type="date" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Add transfer notes..." class="w-full h-16 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-transfer-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitTransfer()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create Transfer</button>
            </div>
        </div>
    </div>

    <!-- Create Adjustment Modal -->
    <div id="create-adjustment-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-adjustment-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[550px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Stock Adjustment</h2>
                <button onclick="closeModal('create-adjustment-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Adjustment Type *</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button type="button" class="h-12 border-2 border-emerald-500 bg-emerald-50 text-emerald-700 rounded-lg text-sm font-bold flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined">add_circle</span> Increase
                        </button>
                        <button type="button" class="h-12 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50 flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined">remove_circle</span> Decrease
                        </button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Item / SKU *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select item...</option>
                        <option>SKU-001 - Industrial Pump V2 (Current: 150)</option>
                        <option>SKU-002 - Valve Assembly Kit (Current: 320)</option>
                        <option>SKU-003 - Control Unit Module (Current: 85)</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Quantity *</label>
                        <input type="number" placeholder="Enter quantity" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm" value="10"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Warehouse</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>Main Warehouse (WH-001)</option>
                            <option>Secondary Storage (WH-002)</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Reason *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select reason...</option>
                        <option>Cycle Count Correction</option>
                        <option>Damaged Goods</option>
                        <option>Expired Stock</option>
                        <option>Found Stock</option>
                        <option>Theft/Loss</option>
                        <option>System Error Correction</option>
                        <option>Other</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Reference Document</label>
                    <input type="text" placeholder="e.g., CC-2024-001, Audit Report #123" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Provide additional details for this adjustment..." class="w-full h-20 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-adjustment-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitAdjustment()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Submit Adjustment</button>
            </div>
        </div>
    </div>

    <!-- Create GRN Modal -->
    <div id="create-grn-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-grn-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[650px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Record Goods Receipt (GRN)</h2>
                <button onclick="closeModal('create-grn-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Purchase Order *</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option value="">Select PO...</option>
                            <option>PO-2024-0892 - Steel Corp Inc.</option>
                            <option>PO-2024-0891 - Metal Supplies Ltd.</option>
                            <option>PO-2024-0890 - Industrial Materials</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Supplier Delivery Note</label>
                        <input type="text" placeholder="DN-XXXXX" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Receiving Warehouse *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Main Warehouse (WH-001)</option>
                        <option>Secondary Storage (WH-002)</option>
                        <option>Receiving Dock (WH-RCV)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Items Received</label>
                    <div class="border border-slate-200 rounded-lg overflow-hidden">
                        <table class="w-full text-sm">
                            <thead class="bg-slate-50 border-b border-slate-200">
                                <tr>
                                    <th class="px-3 py-2 text-left font-medium text-slate-600">Item</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Ordered</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Received</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Condition</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr>
                                    <td class="px-3 py-2">Steel Tube 20mm</td>
                                    <td class="px-3 py-2 text-center">100</td>
                                    <td class="px-3 py-2 text-center"><input type="number" value="100" class="w-16 h-8 px-2 border border-slate-200 rounded text-center text-sm"/></td>
                                    <td class="px-3 py-2 text-center">
                                        <select class="h-8 px-2 border border-slate-200 rounded text-sm">
                                            <option>Good</option>
                                            <option>Damaged</option>
                                            <option>Partial</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2">Cast Iron Flange</td>
                                    <td class="px-3 py-2 text-center">50</td>
                                    <td class="px-3 py-2 text-center"><input type="number" value="48" class="w-16 h-8 px-2 border border-slate-200 rounded text-center text-sm"/></td>
                                    <td class="px-3 py-2 text-center">
                                        <select class="h-8 px-2 border border-slate-200 rounded text-sm">
                                            <option>Good</option>
                                            <option selected>Partial</option>
                                            <option>Damaged</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <input type="checkbox" id="qc-required" class="rounded text-primary"/>
                    <label for="qc-required" class="text-sm text-slate-700">Quality check required before putaway</label>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Add receiving notes..." class="w-full h-16 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-grn-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitGRN()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Record GRN</button>
            </div>
        </div>
    </div>

    <!-- Create Pick List Modal -->
    <div id="create-pick-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-pick-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Pick List</h2>
                <button onclick="closeModal('create-pick-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Pick Type *</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button type="button" class="h-10 border-2 border-primary bg-primary/5 text-primary rounded-lg text-sm font-bold">Sales Order</button>
                        <button type="button" class="h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Work Order</button>
                        <button type="button" class="h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Transfer</button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Reference Order *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select order...</option>
                        <option>SO-2024-1542 - Customer ABC Corp</option>
                        <option>SO-2024-1541 - Customer XYZ Ltd</option>
                        <option>SO-2024-1540 - Customer 123 Inc</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Warehouse</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Main Warehouse (WH-001)</option>
                        <option>Secondary Storage (WH-002)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Items to Pick</label>
                    <div class="border border-slate-200 rounded-lg overflow-hidden">
                        <table class="w-full text-sm">
                            <thead class="bg-slate-50 border-b border-slate-200">
                                <tr>
                                    <th class="px-3 py-2 text-left font-medium text-slate-600">Item</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Required</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Available</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Location</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr>
                                    <td class="px-3 py-2">Industrial Pump V2</td>
                                    <td class="px-3 py-2 text-center font-medium">10</td>
                                    <td class="px-3 py-2 text-center text-emerald-600 font-medium">150</td>
                                    <td class="px-3 py-2 text-center text-slate-500">A-01-02</td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2">Valve Assembly Kit</td>
                                    <td class="px-3 py-2 text-center font-medium">5</td>
                                    <td class="px-3 py-2 text-center text-emerald-600 font-medium">320</td>
                                    <td class="px-3 py-2 text-center text-slate-500">B-03-01</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Assign to Picker</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Auto-assign</option>
                        <option>John Smith</option>
                        <option>Sarah Wilson</option>
                        <option>Mike Johnson</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Priority</label>
                    <div class="flex gap-2">
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Low</button>
                        <button type="button" class="flex-1 h-10 border-2 border-primary bg-primary/5 text-primary rounded-lg text-sm font-bold">Normal</button>
                        <button type="button" class="flex-1 h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Urgent</button>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-pick-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitPickList()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create Pick List</button>
            </div>
        </div>
    </div>

    <!-- Create Cycle Count Modal -->
    <div id="create-cycle-count-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-cycle-count-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[550px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Cycle Count</h2>
                <button onclick="closeModal('create-cycle-count-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Count Type *</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button type="button" class="h-12 border-2 border-primary bg-primary/5 text-primary rounded-lg text-sm font-bold">By Location</button>
                        <button type="button" class="h-12 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">By Item/SKU</button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Warehouse *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Main Warehouse (WH-001)</option>
                        <option>Secondary Storage (WH-002)</option>
                        <option>Distribution Center (WH-003)</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Locations / Items</label>
                    <select multiple class="w-full h-32 px-3 py-2 border border-slate-200 rounded-lg text-sm">
                        <option>Zone A - Row 1</option>
                        <option selected>Zone A - Row 2</option>
                        <option selected>Zone A - Row 3</option>
                        <option>Zone B - Row 1</option>
                        <option>Zone B - Row 2</option>
                        <option>Zone C - All</option>
                    </select>
                    <p class="text-xs text-slate-500 mt-1">Hold Ctrl/Cmd to select multiple</p>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Scheduled Date *</label>
                    <input type="date" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Assign to Counter</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Unassigned</option>
                        <option>John Smith</option>
                        <option>Sarah Wilson</option>
                        <option>Mike Johnson</option>
                    </select>
                </div>
                <div class="flex items-center gap-3">
                    <input type="checkbox" id="blind-count" class="rounded text-primary"/>
                    <label for="blind-count" class="text-sm text-slate-700">Blind count (hide expected quantities)</label>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-cycle-count-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitCycleCount()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create Count</button>
            </div>
        </div>
    </div>

    <!-- Add Item Modal -->
    <div id="add-item-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('add-item-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[650px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Add New Item</h2>
                <button onclick="closeModal('add-item-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">SKU *</label>
                        <input type="text" placeholder="e.g., SKU-001" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Barcode</label>
                        <input type="text" placeholder="Scan or enter barcode" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Item Name *</label>
                    <input type="text" placeholder="Enter item name" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Description</label>
                    <textarea placeholder="Item description..." class="w-full h-16 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Category *</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option value="">Select category...</option>
                            <option>Raw Materials</option>
                            <option>Finished Goods</option>
                            <option>Components</option>
                            <option>Consumables</option>
                            <option>Packaging</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Unit of Measure *</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>Each</option>
                            <option>Box</option>
                            <option>Kg</option>
                            <option>Liter</option>
                            <option>Meter</option>
                            <option>Pallet</option>
                        </select>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Unit Cost</label>
                        <div class="relative">
                            <span class="absolute left-3 top-2.5 text-slate-400 text-sm">$</span>
                            <input type="number" step="0.01" placeholder="0.00" class="w-full h-10 pl-7 pr-3 border border-slate-200 rounded-lg text-sm"/>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Reorder Point</label>
                        <input type="number" placeholder="Min qty" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Max Stock</label>
                        <input type="number" placeholder="Max qty" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Default Warehouse</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Main Warehouse (WH-001)</option>
                        <option>Secondary Storage (WH-002)</option>
                        <option>Distribution Center (WH-003)</option>
                    </select>
                </div>
                <div class="flex items-center gap-4">
                    <label class="flex items-center gap-2"><input type="checkbox" checked class="rounded text-primary"/> Track inventory</label>
                    <label class="flex items-center gap-2"><input type="checkbox" class="rounded text-primary"/> Serialized</label>
                    <label class="flex items-center gap-2"><input type="checkbox" class="rounded text-primary"/> Batch tracked</label>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('add-item-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitAddItem()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Add Item</button>
            </div>
        </div>
    </div>

    <!-- Update Stock Modal -->
    <div id="update-stock-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('update-stock-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Update Stock</h2>
                <button onclick="closeModal('update-stock-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Item / SKU *</label>
                    <div class="relative">
                        <span class="material-symbols-outlined absolute left-3 top-2.5 text-slate-400 text-[20px]">search</span>
                        <input type="text" placeholder="Search by SKU, name, or barcode..." class="w-full h-10 pl-10 pr-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                </div>
                <div class="bg-slate-50 border border-slate-200 rounded-lg p-4">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="w-12 h-12 bg-slate-200 rounded-lg flex items-center justify-center">
                            <span class="material-symbols-outlined text-slate-400">inventory_2</span>
                        </div>
                        <div>
                            <p class="font-bold text-slate-900">Industrial Pump V2</p>
                            <p class="text-xs text-slate-500">SKU-001 • Main Warehouse</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-3 text-center">
                        <div class="bg-white p-2 rounded">
                            <p class="text-xs text-slate-500">Current Stock</p>
                            <p class="text-lg font-bold text-slate-900">150</p>
                        </div>
                        <div class="bg-white p-2 rounded">
                            <p class="text-xs text-slate-500">Reserved</p>
                            <p class="text-lg font-bold text-orange-600">25</p>
                        </div>
                        <div class="bg-white p-2 rounded">
                            <p class="text-xs text-slate-500">Available</p>
                            <p class="text-lg font-bold text-emerald-600">125</p>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">New Quantity *</label>
                    <input type="number" value="150" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Reason for Update *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select reason...</option>
                        <option>Physical Count</option>
                        <option>Receiving</option>
                        <option>Damage/Loss</option>
                        <option>Return</option>
                        <option>Correction</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Optional notes..." class="w-full h-16 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('update-stock-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitUpdateStock()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Update Stock</button>
            </div>
        </div>
    </div>

    <!-- Import Items Modal -->
    <div id="import-items-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('import-items-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Import Items</h2>
                <button onclick="closeModal('import-items-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div class="border-2 border-dashed border-slate-300 rounded-xl p-8 text-center hover:border-primary transition-colors cursor-pointer">
                    <span class="material-symbols-outlined text-5xl text-slate-300 mb-2">cloud_upload</span>
                    <p class="font-medium text-slate-700">Drag & drop your file here</p>
                    <p class="text-sm text-slate-500 mt-1">or click to browse</p>
                    <p class="text-xs text-slate-400 mt-3">Supported formats: .xlsx, .csv</p>
                    <input type="file" class="hidden" accept=".xlsx,.csv"/>
                </div>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                    <div class="flex items-start gap-2">
                        <span class="material-symbols-outlined text-blue-500 text-[18px]">info</span>
                        <div class="text-sm text-blue-800">
                            <p class="font-medium">Template Required</p>
                            <p class="text-xs mt-1">Download our <a href="#" class="underline font-medium">import template</a> to ensure correct formatting.</p>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Import Options</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2"><input type="radio" name="import-mode" checked class="text-primary"/> Add new items only</label>
                        <label class="flex items-center gap-2"><input type="radio" name="import-mode" class="text-primary"/> Update existing items</label>
                        <label class="flex items-center gap-2"><input type="radio" name="import-mode" class="text-primary"/> Add new & update existing</label>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('import-items-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitImportItems()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Import</button>
            </div>
        </div>
    </div>

    <!-- Reorder Automation Modal -->
    <div id="reorder-automation-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('reorder-automation-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[550px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Reorder Automation Settings</h2>
                <button onclick="closeModal('reorder-automation-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="flex items-center justify-between p-4 bg-emerald-50 border border-emerald-200 rounded-lg">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-emerald-500">autorenew</span>
                        <div>
                            <p class="font-medium text-emerald-900">Auto-Reorder</p>
                            <p class="text-xs text-emerald-700">Automatically create POs when stock is low</p>
                        </div>
                    </div>
                    <button class="w-12 h-6 bg-emerald-500 rounded-full relative">
                        <span class="absolute right-1 top-1 w-4 h-4 bg-white rounded-full"></span>
                    </button>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Trigger Condition</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>When stock falls below reorder point</option>
                        <option>When stock falls below safety stock</option>
                        <option>Based on demand forecast</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Order Quantity Method</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Economic Order Quantity (EOQ)</option>
                        <option>Fixed quantity</option>
                        <option>Up to max stock level</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Approval Workflow</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2"><input type="radio" name="approval" class="text-primary"/> Auto-approve all</label>
                        <label class="flex items-center gap-2"><input type="radio" name="approval" checked class="text-primary"/> Require approval above $1,000</label>
                        <label class="flex items-center gap-2"><input type="radio" name="approval" class="text-primary"/> Always require approval</label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notification Recipients</label>
                    <select multiple class="w-full h-20 px-3 py-2 border border-slate-200 rounded-lg text-sm">
                        <option selected>Procurement Manager</option>
                        <option selected>Inventory Manager</option>
                        <option>Finance Team</option>
                    </select>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('reorder-automation-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitReorderSettings()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Manual Reserve Modal -->
    <div id="manual-reserve-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('manual-reserve-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[550px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Manual Stock Reservation</h2>
                <button onclick="closeModal('manual-reserve-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Item / SKU *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select item...</option>
                        <option>SKU-001 - Industrial Pump V2 (Available: 125)</option>
                        <option>SKU-002 - Valve Assembly Kit (Available: 280)</option>
                        <option>SKU-003 - Control Unit Module (Available: 60)</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Quantity to Reserve *</label>
                        <input type="number" placeholder="Enter quantity" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm" value="10"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Warehouse</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>Main Warehouse (WH-001)</option>
                            <option>Secondary Storage (WH-002)</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Reservation Type *</label>
                    <div class="grid grid-cols-3 gap-2">
                        <button type="button" class="h-10 border-2 border-primary bg-primary/5 text-primary rounded-lg text-sm font-bold">Sales Order</button>
                        <button type="button" class="h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Work Order</button>
                        <button type="button" class="h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Project</button>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Reference Order *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select order...</option>
                        <option>SO-2024-1542 - ABC Corp</option>
                        <option>SO-2024-1541 - XYZ Industries</option>
                        <option>SO-2024-1540 - 123 Manufacturing</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Reserved Until</label>
                    <input type="date" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Add reservation notes..." class="w-full h-16 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('manual-reserve-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitManualReserve()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Reserve Stock</button>
            </div>
        </div>
    </div>

    <!-- Bulk Release Modal -->
    <div id="bulk-release-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('bulk-release-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[500px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Bulk Release Reservations</h2>
                <button onclick="closeModal('bulk-release-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
                    <div class="flex items-start gap-2">
                        <span class="material-symbols-outlined text-orange-500 text-[18px]">warning</span>
                        <div class="text-sm text-orange-800">
                            <p class="font-medium">Are you sure?</p>
                            <p class="text-xs mt-1">This will release reservations and make stock available for other orders.</p>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Release Scope</label>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2"><input type="radio" name="release-scope" checked class="text-primary"/> Selected reservations only</label>
                        <label class="flex items-center gap-2"><input type="radio" name="release-scope" class="text-primary"/> All expired reservations</label>
                        <label class="flex items-center gap-2"><input type="radio" name="release-scope" class="text-primary"/> All pending reservations</label>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Reason for Release</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option>Order cancelled</option>
                        <option>Customer request</option>
                        <option>Reservation expired</option>
                        <option>Inventory reallocation</option>
                        <option>Other</option>
                    </select>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('bulk-release-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitBulkRelease()" class="h-10 px-6 bg-orange-500 text-white text-sm font-bold rounded-lg hover:bg-orange-600">Release Reservations</button>
            </div>
        </div>
    </div>

    <!-- Add Putaway Rule Modal -->
    <div id="add-putaway-rule-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('add-putaway-rule-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Add Putaway Rule</h2>
                <button onclick="closeModal('add-putaway-rule-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Rule Name *</label>
                        <input type="text" placeholder="e.g., High-Value Electronics" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Priority *</label>
                        <input type="number" placeholder="1-100" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm" value="10"/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Conditions</label>
                    <div class="border border-slate-200 rounded-lg p-3 space-y-3">
                        <div class="flex items-center gap-2">
                            <select class="h-9 px-3 border border-slate-200 rounded-lg text-sm">
                                <option>Item Category</option>
                                <option>Item Value</option>
                                <option>Item Size</option>
                                <option>Velocity Class</option>
                            </select>
                            <select class="h-9 px-3 border border-slate-200 rounded-lg text-sm">
                                <option>equals</option>
                                <option>contains</option>
                                <option>greater than</option>
                                <option>less than</option>
                            </select>
                            <input type="text" placeholder="Value" class="flex-1 h-9 px-3 border border-slate-200 rounded-lg text-sm"/>
                            <button class="p-1 text-slate-400 hover:text-red-500"><span class="material-symbols-outlined text-[18px]">delete</span></button>
                        </div>
                    </div>
                    <button class="mt-2 text-sm text-primary font-semibold hover:underline flex items-center gap-1">
                        <span class="material-symbols-outlined text-[18px]">add</span> Add Condition
                    </button>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Target Zone *</label>
                    <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                        <option value="">Select zone...</option>
                        <option>Zone A - High Security</option>
                        <option>Zone B - General Storage</option>
                        <option>Zone C - Bulk Items</option>
                        <option>Zone D - Cold Storage</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Bin Selection Strategy</label>
                    <div class="grid grid-cols-2 gap-2">
                        <button type="button" class="h-10 border-2 border-primary bg-primary/5 text-primary rounded-lg text-sm font-bold">Nearest Empty</button>
                        <button type="button" class="h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Same Item</button>
                        <button type="button" class="h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">FIFO Location</button>
                        <button type="button" class="h-10 border border-slate-200 rounded-lg text-sm font-medium hover:bg-slate-50">Fixed Bin</button>
                    </div>
                </div>
                <div class="flex items-center gap-3">
                    <input type="checkbox" id="rule-active" checked class="rounded text-primary"/>
                    <label for="rule-active" class="text-sm text-slate-700">Rule is active</label>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('add-putaway-rule-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitPutawayRule()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Add Rule</button>
            </div>
        </div>
    </div>

    <!-- Column Selector Modal -->
    <div id="column-selector-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('column-selector-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[400px] bg-white rounded-2xl shadow-2xl flex flex-col">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Customize Columns</h2>
                <button onclick="closeModal('column-selector-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 space-y-4">
                <p class="text-sm text-slate-500">Drag to reorder. Toggle visibility.</p>
                <div class="space-y-2">
                    <label class="flex items-center justify-between p-2 bg-slate-50 rounded-lg cursor-move">
                        <span class="flex items-center gap-2"><span class="material-symbols-outlined text-slate-400 text-[18px]">drag_indicator</span> SKU</span>
                        <input type="checkbox" checked class="rounded text-primary"/>
                    </label>
                    <label class="flex items-center justify-between p-2 bg-slate-50 rounded-lg cursor-move">
                        <span class="flex items-center gap-2"><span class="material-symbols-outlined text-slate-400 text-[18px]">drag_indicator</span> Item Name</span>
                        <input type="checkbox" checked class="rounded text-primary"/>
                    </label>
                    <label class="flex items-center justify-between p-2 bg-slate-50 rounded-lg cursor-move">
                        <span class="flex items-center gap-2"><span class="material-symbols-outlined text-slate-400 text-[18px]">drag_indicator</span> Category</span>
                        <input type="checkbox" checked class="rounded text-primary"/>
                    </label>
                    <label class="flex items-center justify-between p-2 bg-slate-50 rounded-lg cursor-move">
                        <span class="flex items-center gap-2"><span class="material-symbols-outlined text-slate-400 text-[18px]">drag_indicator</span> Quantity</span>
                        <input type="checkbox" checked class="rounded text-primary"/>
                    </label>
                    <label class="flex items-center justify-between p-2 bg-slate-50 rounded-lg cursor-move">
                        <span class="flex items-center gap-2"><span class="material-symbols-outlined text-slate-400 text-[18px]">drag_indicator</span> Unit Cost</span>
                        <input type="checkbox" class="rounded text-primary"/>
                    </label>
                    <label class="flex items-center justify-between p-2 bg-slate-50 rounded-lg cursor-move">
                        <span class="flex items-center gap-2"><span class="material-symbols-outlined text-slate-400 text-[18px]">drag_indicator</span> Location</span>
                        <input type="checkbox" checked class="rounded text-primary"/>
                    </label>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('column-selector-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="applyColumnSettings()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Apply</button>
            </div>
        </div>
    </div>

    <!-- Create Purchase Order Modal -->
    <div id="create-po-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeModal('create-po-modal')"></div>
        <div class="absolute inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-[600px] bg-white rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-200">
                <h2 class="text-lg font-bold text-slate-900">Create Purchase Order</h2>
                <button onclick="closeModal('create-po-modal')" class="p-2 hover:bg-slate-100 rounded-lg">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Supplier *</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option value="">Select supplier...</option>
                            <option>TechSupply Ltd</option>
                            <option>Global Parts Inc.</option>
                            <option>Industrial Supplies Co.</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">PO Number</label>
                        <input type="text" value="PO-2024-0893" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm bg-slate-50" readonly/>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Order Items</label>
                    <div class="border border-slate-200 rounded-lg overflow-hidden">
                        <table class="w-full text-sm">
                            <thead class="bg-slate-50 border-b border-slate-200">
                                <tr>
                                    <th class="px-3 py-2 text-left font-medium text-slate-600">Item</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Qty</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Unit Price</th>
                                    <th class="px-3 py-2 text-center font-medium text-slate-600">Total</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr>
                                    <td class="px-3 py-2">USB-C Adapter</td>
                                    <td class="px-3 py-2 text-center"><input type="number" value="200" class="w-16 h-8 px-2 border border-slate-200 rounded text-center text-sm"/></td>
                                    <td class="px-3 py-2 text-center">$7.20</td>
                                    <td class="px-3 py-2 text-center font-bold">$1,440</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <button class="mt-2 text-sm text-primary font-semibold hover:underline flex items-center gap-1">
                        <span class="material-symbols-outlined text-[18px]">add</span> Add Item
                    </button>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Delivery Date</label>
                        <input type="date" class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm"/>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">Delivery Location</label>
                        <select class="w-full h-10 px-3 border border-slate-200 rounded-lg text-sm">
                            <option>Main Warehouse (WH-001)</option>
                            <option>Secondary Storage (WH-002)</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea placeholder="Add order notes..." class="w-full h-16 px-3 py-2 border border-slate-200 rounded-lg text-sm resize-none"></textarea>
                </div>
                <div class="bg-slate-50 rounded-lg p-4 flex items-center justify-between">
                    <span class="font-medium text-slate-700">Order Total:</span>
                    <span class="text-xl font-bold text-slate-900">$1,440.00</span>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-200">
                <button onclick="closeModal('create-po-modal')" class="h-10 px-4 border border-slate-200 text-slate-700 text-sm font-semibold rounded-lg hover:bg-slate-50">Cancel</button>
                <button onclick="submitPurchaseOrder()" class="h-10 px-6 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-hover">Create PO</button>
            </div>
        </div>
    </div>

    <script>
        // Navigation system
        // Advanced Router with Hash Navigation
        const router = {
            routes: new Map(),
            currentRoute: null,
            
            register(routeName, screenId) {
                this.routes.set(routeName, screenId);
            },
            
            navigate(routeName) {
                const screenId = this.routes.get(routeName) || routeName;
                window.location.hash = `#${routeName}`;
                this.render(screenId, routeName);
            },
            
            render(screenId, routeName) {
                // Hide all sections
                document.querySelectorAll('.view-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show selected section
                const targetSection = document.getElementById(screenId);
                if (targetSection) {
                    targetSection.classList.add('active');
                    this.currentRoute = screenId;
                    
                    // Clear all sidebar active states
                    document.querySelectorAll('button').forEach(btn => {
                        btn.classList.remove('sidebar-sublink-active');
                        if (btn.classList.contains('sidebar-sublink') || btn.id?.startsWith('nav-')) {
                            btn.classList.remove('bg-primary/10');
                            btn.classList.remove('text-primary');
                            btn.classList.add('text-slate-500', 'hover:text-primary');
                        }
                    });
                    
                    // Mark appropriate sidebar item as active
                    const navItem = document.getElementById(`nav-${screenId}`);
                    if (navItem) {
                        navItem.classList.add('sidebar-sublink-active');
                        navItem.classList.add('bg-primary/10', 'text-primary');
                        navItem.classList.remove('text-slate-500');
                    }
                    
                    // Also mark the main category button if applicable
                    const mainNavItem = document.getElementById('nav-inventory-main');
                    if (mainNavItem && (screenId === 'overview' || screenId === 'stock-tracker' || screenId === 'ledger' || 
                        screenId === 'reservations' || screenId === 'discrepancies' || screenId === 'adjustments' || 
                        screenId === 'transfers' || screenId === 'receiving' || screenId === 'picking' || 
                        screenId === 'cycle-counts' || screenId === 'items' || screenId === 'putaway-rules')) {
                        mainNavItem.classList.add('bg-primary/10', 'text-primary');
                        mainNavItem.classList.remove('text-slate-600');
                    } else if (mainNavItem) {
                        mainNavItem.classList.remove('bg-primary/10', 'text-primary');
                        mainNavItem.classList.add('text-slate-600');
                    }
                    
                    // Mark dashboard button if on dashboard/overview
                    const dashboardBtn = document.getElementById('nav-dashboard');
                    if (dashboardBtn) {
                        if (screenId === 'overview') {
                            dashboardBtn.classList.add('bg-primary/10', 'text-primary');
                            dashboardBtn.classList.remove('text-slate-600');
                        } else {
                            dashboardBtn.classList.remove('bg-primary/10', 'text-primary');
                            dashboardBtn.classList.add('text-slate-600');
                        }
                    }
                    
                    // Close mobile sidebar
                    if (window.innerWidth < 1024) {
                        toggleSidebar();
                    }
                    
                    window.scrollTo(0, 0);
                } else {
                    console.warn(`Route not found: ${screenId}`);
                }
            },
            
            init() {
                // Handle hash change
                window.addEventListener('hashchange', () => {
                    const hash = window.location.hash.slice(1) || 'dashboard';
                    const screenId = this.routes.get(hash) || hash;
                    this.render(screenId, hash);
                });
                
                // Initialize with current hash or dashboard
                const initialHash = window.location.hash.slice(1) || 'dashboard';
                this.navigate(initialHash);
            }
        };
        
        // Register all routes
        router.register('dashboard', 'overview');
        router.register('overview', 'overview');
        router.register('stock-tracker', 'stock-tracker');
        router.register('items', 'items');
        router.register('ledger', 'ledger');
        router.register('reservations', 'reservations');
        router.register('discrepancies', 'discrepancies');
        router.register('adjustments', 'adjustments');
        router.register('transfers', 'transfers');
        router.register('receiving', 'receiving');
        router.register('picking', 'picking');
        router.register('cycle-counts', 'cycle-counts');
        router.register('warehouses', 'warehouses');
        router.register('update-stock', 'update-stock');
        router.register('reorder-automation', 'reorder-automation');
        router.register('exceptions', 'exceptions');
        router.register('putaway-rules', 'putaway-rules');
        
        // Detail screens
        router.register('sku-detail', 'sku-detail');
        router.register('bin-detail', 'bin-detail');
        router.register('warehouse-detail', 'warehouse-detail');
        router.register('transfer-detail', 'transfer-detail');
        router.register('receiving-detail', 'receiving-detail');
        router.register('picking-detail', 'picking-detail');
        
        // Workflow screens
        router.register('upload-document', 'upload-document');
        router.register('scan-barcodes', 'scan-barcodes');
        router.register('review-post', 'review-post');
        router.register('create-transfer', 'create-transfer');
        router.register('create-cycle-count', 'create-cycle-count');
        router.register('create-grn', 'create-grn');
        router.register('create-pick', 'create-pick');
        router.register('approval-adjustment', 'approval-adjustment');
        router.register('policy-config', 'policy-config');
        router.register('reports', 'reports');
        router.register('stock-valuation-report', 'stock-valuation-report');
        
        // Production Planning Routes (Simplified - 6 main screens)
        router.register('pp-overview', 'pp-overview');
        router.register('pp-planning', 'pp-planning');
        router.register('pp-capacity', 'pp-capacity');
        router.register('pp-materials', 'pp-materials');
        router.register('pp-work-orders', 'pp-work-orders');
        router.register('pp-shopfloor', 'pp-shopfloor');
        router.register('pp-quality', 'pp-quality');
        
        // Legacy navigateTo function (maintains backward compatibility)
        function navigateTo(screenId) {
            // Prevent double navigation
            if (router.currentRoute === screenId) {
                return;
            }
            
            // Map common route names to screen IDs
            const routeMap = {
                'dashboard': 'overview',
                'overview': 'overview',
                'stock-tracker': 'stock-tracker',
                'items': 'items',
                'ledger': 'ledger',
                'reservations': 'reservations',
                'discrepancies': 'discrepancies',
                'adjustments': 'adjustments',
                'transfers': 'transfers',
                'receiving': 'receiving',
                'picking': 'picking',
                'cycle-counts': 'cycle-counts',
                'warehouses': 'warehouses',
                'update-stock': 'update-stock',
                'reorder-automation': 'reorder-automation',
                'exceptions': 'exceptions',
                'putaway-rules': 'putaway-rules',
                'sku-detail': 'sku-detail',
                'bin-detail': 'bin-detail',
                'warehouse-detail': 'warehouse-detail',
                'transfer-detail': 'transfer-detail',
                'receiving-detail': 'receiving-detail',
                'picking-detail': 'picking-detail',
                'upload-document': 'upload-document',
                'scan-barcodes': 'scan-barcodes',
                'review-post': 'review-post',
                'create-transfer': 'create-transfer',
                'create-cycle-count': 'create-cycle-count',
                'create-grn': 'create-grn',
                'create-pick': 'create-pick',
                'approval-adjustment': 'approval-adjustment',
                'policy-config': 'policy-config',
                'reports': 'reports',
                'stock-valuation-report': 'stock-valuation-report',
                // Production Planning routes (simplified)
                'pp-overview': 'pp-overview',
                'pp-planning': 'pp-planning',
                'pp-capacity': 'pp-capacity',
                'pp-materials': 'pp-materials',
                'pp-work-orders': 'pp-work-orders',
                'pp-shopfloor': 'pp-shopfloor',
                'pp-quality': 'pp-quality'
            };
            
            const actualScreenId = routeMap[screenId] || screenId;
            
            // Expand menus if needed
            expandInventoryMenuIfNeeded(screenId);
            expandProductionMenuIfNeeded(screenId);
            
            // Update URL hash
            window.location.hash = `#${screenId}`;
            
            // Render the screen
            router.render(actualScreenId, screenId);
        }


        // Initialize - with router support
        document.addEventListener('DOMContentLoaded', function() {
            initDarkMode();
            router.init();
        });

        // Sidebar toggle for mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('mobile-sidebar');
            const overlay = document.getElementById('mobile-overlay');
            
            if (sidebar && overlay) {
                sidebar.classList.toggle('-translate-x-full');
                overlay.classList.toggle('hidden');
            }
        }

        // Toggle Inventory Control submenu
        function toggleInventoryMenu() {
            const submenu = document.getElementById('inventory-submenu');
            const arrow = document.getElementById('inventory-menu-arrow');
            const mainBtn = document.getElementById('nav-inventory-main');
            
            if (submenu && arrow) {
                const isOpening = submenu.classList.contains('hidden');
                
                // Close Production menu if opening Inventory
                if (isOpening) {
                    closeProductionMenu();
                }
                
                submenu.classList.toggle('hidden');
                arrow.classList.toggle('rotate-180');
                
                // Toggle active state on main button
                if (!submenu.classList.contains('hidden')) {
                    mainBtn.classList.add('bg-primary/10', 'text-primary', 'font-bold');
                    mainBtn.classList.remove('text-slate-600');
                } else {
                    mainBtn.classList.remove('bg-primary/10', 'text-primary', 'font-bold');
                    mainBtn.classList.add('text-slate-600');
                }
            }
        }

        // Toggle Production Planning submenu
        function toggleProductionMenu() {
            const submenu = document.getElementById('production-submenu');
            const arrow = document.getElementById('production-menu-arrow');
            const mainBtn = document.getElementById('nav-production-main');
            
            if (submenu && arrow) {
                const isOpening = submenu.classList.contains('hidden');
                
                // Close Inventory menu if opening Production
                if (isOpening) {
                    closeInventoryMenu();
                }
                
                submenu.classList.toggle('hidden');
                arrow.classList.toggle('rotate-180');
                
                // Toggle active state on main button
                if (!submenu.classList.contains('hidden')) {
                    mainBtn.classList.add('bg-primary/10', 'text-primary', 'font-bold');
                    mainBtn.classList.remove('text-slate-600');
                } else {
                    mainBtn.classList.remove('bg-primary/10', 'text-primary', 'font-bold');
                    mainBtn.classList.add('text-slate-600');
                }
            }
        }
        
        // Helper function to close Inventory menu
        function closeInventoryMenu() {
            const submenu = document.getElementById('inventory-submenu');
            const arrow = document.getElementById('inventory-menu-arrow');
            const mainBtn = document.getElementById('nav-inventory-main');
            
            if (submenu && !submenu.classList.contains('hidden')) {
                submenu.classList.add('hidden');
                arrow.classList.remove('rotate-180');
                mainBtn.classList.remove('bg-primary/10', 'text-primary', 'font-bold');
                mainBtn.classList.add('text-slate-600');
            }
        }
        
        // Helper function to close Production menu
        function closeProductionMenu() {
            const submenu = document.getElementById('production-submenu');
            const arrow = document.getElementById('production-menu-arrow');
            const mainBtn = document.getElementById('nav-production-main');
            
            if (submenu && !submenu.classList.contains('hidden')) {
                submenu.classList.add('hidden');
                arrow.classList.remove('rotate-180');
                mainBtn.classList.remove('bg-primary/10', 'text-primary', 'font-bold');
                mainBtn.classList.add('text-slate-600');
            }
        }

        // Expand inventory menu if navigating to an inventory screen
        function expandInventoryMenuIfNeeded(screenId) {
            const inventoryScreens = [
                'overview', 'stock-tracker', 'items', 'ledger', 'reservations',
                'discrepancies', 'adjustments', 'transfers', 'receiving', 
                'putaway-rules', 'picking', 'cycle-counts', 'sku-detail',
                'exceptions', 'update-stock', 'upload-document', 'warehouse-detail',
                'bin-detail', 'warehouses', 'reorder-automation', 'scan-barcodes'
            ];
            
            if (inventoryScreens.includes(screenId)) {
                const submenu = document.getElementById('inventory-submenu');
                const arrow = document.getElementById('inventory-menu-arrow');
                const mainBtn = document.getElementById('nav-inventory-main');
                
                if (submenu && submenu.classList.contains('hidden')) {
                    submenu.classList.remove('hidden');
                    arrow.classList.add('rotate-180');
                    mainBtn.classList.add('bg-primary/10', 'text-primary', 'font-bold');
                    mainBtn.classList.remove('text-slate-600');
                }
            }
        }

        // Expand production menu if navigating to a production screen
        function expandProductionMenuIfNeeded(screenId) {
            const productionScreens = [
                'pp-overview', 'pp-planning', 'pp-capacity', 'pp-materials',
                'pp-work-orders', 'pp-shopfloor', 'pp-quality'
            ];
            
            if (productionScreens.includes(screenId)) {
                const submenu = document.getElementById('production-submenu');
                const arrow = document.getElementById('production-menu-arrow');
                const mainBtn = document.getElementById('nav-production-main');
                
                if (submenu && submenu.classList.contains('hidden')) {
                    submenu.classList.remove('hidden');
                    arrow.classList.add('rotate-180');
                    mainBtn.classList.add('bg-primary/10', 'text-primary', 'font-bold');
                    mainBtn.classList.remove('text-slate-600');
                }
            }
        }

        // Sample data update functions (for demo purposes)
        function updateDashboardMetrics() {
            // This function would normally fetch real-time data from backend
            console.log('Dashboard metrics updated');
        }

        // Tab Switching Functions for Production Planning Screens
        function switchPlanningTab(tabName) {
            const tabs = ['versions', 'mps', 'analytics', 'parameters'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById('plan-tab-' + t);
                const tabContent = document.getElementById('planning-tab-' + t);
                if (t === tabName) {
                    tabBtn?.classList.add('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.remove('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.remove('hidden');
                } else {
                    tabBtn?.classList.remove('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.add('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.add('hidden');
                }
            });
        }

        function switchCapacityTab(tabName) {
            const tabs = ['utilization', 'load', 'shifts', 'conflicts'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById('cap-tab-' + t);
                const tabContent = document.getElementById('capacity-tab-' + t);
                if (t === tabName) {
                    tabBtn?.classList.add('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.remove('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.remove('hidden');
                } else {
                    tabBtn?.classList.remove('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.add('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.add('hidden');
                }
            });
        }

        function switchMaterialsTab(tabName) {
            const tabs = ['overview', 'bom', 'requirements', 'issues'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById('mat-tab-' + t);
                const tabContent = document.getElementById('materials-tab-' + t);
                if (t === tabName) {
                    tabBtn?.classList.add('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.remove('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.remove('hidden');
                } else {
                    tabBtn?.classList.remove('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.add('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.add('hidden');
                }
            });
        }

        function switchShopfloorTab(tabName) {
            const tabs = ['dispatch', 'execution', 'downtime'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById('sf-tab-' + t);
                const tabContent = document.getElementById('shopfloor-tab-' + t);
                if (t === tabName) {
                    tabBtn?.classList.add('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.remove('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.remove('hidden');
                } else {
                    tabBtn?.classList.remove('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.add('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.add('hidden');
                }
            });
        }

        function switchQualityTab(tabName) {
            const tabs = ['checks', 'scrap', 'templates', 'analysis'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById('q-tab-' + t);
                const tabContent = document.getElementById('quality-tab-' + t);
                if (t === tabName) {
                    tabBtn?.classList.add('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.remove('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.remove('hidden');
                } else {
                    tabBtn?.classList.remove('text-primary', 'border-primary', 'font-semibold');
                    tabBtn?.classList.add('text-slate-500', 'border-transparent', 'font-medium');
                    tabContent?.classList.add('hidden');
                }
            });
        }

        // Modal open/close functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Work Order modal functions
        function showCreateWOModal() {
            openModal('create-wo-modal');
        }

        function submitCreateWO() {
            closeModal('create-wo-modal');
            showNotification('Work Order created successfully!', 'success');
        }

        function showWODetailPanel() {
            showNotification('Work Order detail panel would open here', 'info');
        }

        // Planning Screen Functions
        function exportPlan() {
            document.getElementById('export-modal-title').textContent = 'Export Production Plan';
            openModal('export-modal');
        }

        function createNewVersion() {
            openModal('new-version-modal');
        }

        function submitNewVersion() {
            closeModal('new-version-modal');
            showNotification('New plan version created successfully!', 'success');
        }

        function viewPlanVersion(version) {
            document.getElementById('version-detail-title').textContent = version;
            openModal('view-version-modal');
        }

        function editPlanVersion() {
            closeModal('view-version-modal');
            showNotification('Edit mode enabled for plan version', 'info');
            navigateTo('pp-planning');
        }

        function activatePlanVersion() {
            showNotification('Activating plan version...', 'info');
            setTimeout(() => {
                showNotification('Plan version activated successfully!', 'success');
            }, 1000);
        }

        function submitActivateVersion() {
            closeModal('view-version-modal');
            showNotification('Plan version activated successfully!', 'success');
        }

        function viewArchive() {
            showNotification('Opening archived plan viewer...', 'info');
        }

        function autoSchedule() {
            openModal('auto-schedule-modal');
        }

        function runAutoSchedule() {
            closeModal('auto-schedule-modal');
            showNotification('Running auto-scheduler...', 'info');
            setTimeout(() => {
                showNotification('Auto-scheduling completed! 12 operations rescheduled.', 'success');
            }, 2000);
        }

        function savePlanningParameters() {
            showNotification('Planning parameters saved successfully!', 'success');
        }

        // Capacity Screen Functions
        function runSimulation() {
            openModal('simulation-modal');
            document.getElementById('simulation-results').classList.add('hidden');
        }

        function executeSimulation() {
            showNotification('Running simulation...', 'info');
            setTimeout(() => {
                document.getElementById('simulation-results').classList.remove('hidden');
                showNotification('Simulation completed!', 'success');
            }, 1500);
        }

        function resolveConflict(conflict) {
            document.getElementById('conflict-title').textContent = conflict + ' - Capacity Conflict';
            openModal('resolve-conflict-modal');
        }

        function applyConflictResolution() {
            closeModal('resolve-conflict-modal');
            showNotification('Conflict resolution applied successfully!', 'success');
        }

        function reviewCapacity(workCenter) {
            showNotification('Opening capacity review for: ' + workCenter, 'info');
            navigateTo('pp-capacity');
        }

        function addOvertime(workCenter) {
            openModal('resolve-conflict-modal');
        }

        function rescheduleWork(woNumber) {
            showNotification('Opening reschedule wizard for ' + woNumber, 'info');
        }

        function addShift() {
            openModal('add-shift-modal');
        }

        function submitAddShift() {
            closeModal('add-shift-modal');
            showNotification('New shift added successfully!', 'success');
        }

        // Materials Screen Functions
        function runMRP() {
            openModal('run-mrp-modal');
            document.getElementById('mrp-progress').classList.add('hidden');
        }

        function executeMRP() {
            const progressDiv = document.getElementById('mrp-progress');
            const progressBar = document.getElementById('mrp-progress-bar');
            progressDiv.classList.remove('hidden');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                progressBar.style.width = progress + '%';
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        closeModal('run-mrp-modal');
                        showNotification('MRP calculation completed! 3 shortages identified.', 'success');
                    }, 500);
                }
            }, 200);
        }

        function createPurchaseRequest(material) {
            if (material) {
                const select = document.getElementById('pr-material');
                for (let option of select.options) {
                    if (option.text.includes(material.split(' ')[0])) {
                        option.selected = true;
                        break;
                    }
                }
            }
            openModal('create-pr-modal');
        }

        function submitPurchaseRequest() {
            closeModal('create-pr-modal');
            showNotification('Purchase Request PR-2024-156 created successfully!', 'success');
        }

        function generatePRs() {
            showNotification('Generating Purchase Requests...', 'info');
            setTimeout(() => {
                showNotification('3 Purchase Requests generated for material shortages', 'success');
            }, 1500);
        }

        function searchBOM() {
            const searchInput = document.getElementById('bom-search-input');
            const query = searchInput ? searchInput.value : '';
            if (query) {
                showNotification('Searching BOM for: ' + query, 'info');
            } else {
                showNotification('Please enter a search term', 'warning');
            }
        }

        function issueMaterial() {
            openModal('issue-material-modal');
        }

        function submitMaterialIssue() {
            closeModal('issue-material-modal');
            showNotification('Material issued to work order successfully!', 'success');
        }

        // Shopfloor Functions
        function refreshShopfloor() {
            showNotification('Refreshing shopfloor data...', 'info');
            setTimeout(() => {
                showNotification('Shopfloor data updated', 'success');
            }, 1000);
        }

        function viewOperation(operation) {
            document.getElementById('operation-detail-title').textContent = operation;
            openModal('operation-detail-modal');
        }

        function startOperation(operation) {
            showNotification('Starting operation: ' + operation, 'info');
            setTimeout(() => {
                showNotification('Operation ' + operation + ' started successfully!', 'success');
            }, 1000);
        }

        function resumeOperation(operation) {
            showNotification('Resuming operation: ' + operation, 'success');
        }

        function pauseOperation() {
            showNotification('Operation paused', 'warning');
        }

        function completeOperation() {
            showNotification('Completing operation...', 'info');
            setTimeout(() => {
                showNotification('Operation completed successfully!', 'success');
            }, 1000);
        }

        function reportIssue() {
            openModal('report-issue-modal');
        }

        function submitIssueReport() {
            closeModal('report-issue-modal');
            showNotification('Issue reported and logged. Ticket #ISS-2024-089 created.', 'success');
        }

        function logDowntime() {
            openModal('log-downtime-modal');
        }

        function submitDowntimeLog() {
            closeModal('log-downtime-modal');
            showNotification('Downtime logged successfully!', 'success');
        }

        // Quality Screen Functions
        function exportQualityReport() {
            document.getElementById('export-modal-title').textContent = 'Export Quality Report';
            openModal('export-modal');
        }

        function executeExport() {
            closeModal('export-modal');
            showNotification('Exporting... Download will start shortly.', 'info');
            setTimeout(() => {
                showNotification('Export completed successfully!', 'success');
            }, 1500);
        }

        function createQualityCheck() {
            openModal('create-qc-modal');
        }

        function submitQualityCheck() {
            closeModal('create-qc-modal');
            showNotification('Quality Check QC-503 created successfully!', 'success');
        }

        function createQCTemplate() {
            openModal('create-template-modal');
        }

        function submitQCTemplate() {
            closeModal('create-template-modal');
            showNotification('QC Template created successfully!', 'success');
        }

        function addCheckpoint() {
            const list = document.getElementById('checkpoint-list');
            const count = list.children.length + 1;
            const div = document.createElement('div');
            div.className = 'flex items-center gap-2 p-3 bg-slate-50 rounded-lg';
            div.innerHTML = `
                <span class="text-sm text-slate-600">${count}.</span>
                <input type="text" placeholder="Enter checkpoint description" class="flex-1 h-8 px-2 border border-slate-200 rounded text-sm"/>
                <button onclick="this.parentElement.remove()" class="p-1 text-slate-400 hover:text-red-500"><span class="material-symbols-outlined text-[18px]">delete</span></button>
            `;
            list.appendChild(div);
        }

        function openFilters() {
            openModal('filters-modal');
        }

        function applyFilters() {
            closeModal('filters-modal');
            showNotification('Filters applied successfully!', 'success');
        }

        function resetFilters() {
            showNotification('Filters reset to default', 'info');
        }

        // ===================== INVENTORY MODAL HANDLERS =====================

        function showCreateTransferModal() {
            openModal('create-transfer-modal');
        }

        function submitTransfer() {
            closeModal('create-transfer-modal');
            showNotification('Stock Transfer TR-2024-0892 created successfully!', 'success');
        }

        function addTransferItem() {
            showNotification('Additional transfer item row added', 'info');
        }

        function showCreateAdjustmentModal() {
            openModal('create-adjustment-modal');
        }

        function submitAdjustment() {
            closeModal('create-adjustment-modal');
            showNotification('Stock Adjustment ADJ-2024-0156 submitted for approval!', 'success');
        }

        function showCreateGRNModal() {
            openModal('create-grn-modal');
        }

        function submitGRN() {
            closeModal('create-grn-modal');
            showNotification('Goods Receipt GRN-2024-0342 recorded successfully!', 'success');
        }

        function showCreatePickModal() {
            openModal('create-pick-modal');
        }

        function submitPickList() {
            closeModal('create-pick-modal');
            showNotification('Pick List PL-2024-0567 created and assigned!', 'success');
        }

        function showCreateCycleCountModal() {
            openModal('create-cycle-count-modal');
        }

        function submitCycleCount() {
            closeModal('create-cycle-count-modal');
            showNotification('Cycle Count CC-2024-089 scheduled successfully!', 'success');
        }

        function showAddItemModal() {
            openModal('add-item-modal');
        }

        function submitAddItem() {
            closeModal('add-item-modal');
            showNotification('New item added to inventory master!', 'success');
        }

        function showUpdateStockModal() {
            openModal('update-stock-modal');
        }

        function submitUpdateStock() {
            closeModal('update-stock-modal');
            showNotification('Stock quantity updated successfully!', 'success');
        }

        function showImportItemsModal() {
            openModal('import-items-modal');
        }

        function submitImportItems() {
            closeModal('import-items-modal');
            showNotification('Import started... Processing items.', 'info');
            setTimeout(() => {
                showNotification('Import completed! 156 items imported successfully.', 'success');
            }, 2000);
        }

        function showReorderAutomationModal() {
            openModal('reorder-automation-modal');
        }

        function submitReorderSettings() {
            closeModal('reorder-automation-modal');
            showNotification('Reorder automation settings saved!', 'success');
        }

        function showManualReserveModal() {
            openModal('manual-reserve-modal');
        }

        function submitManualReserve() {
            closeModal('manual-reserve-modal');
            showNotification('Stock reserved successfully! Reservation RES-2024-0892 created.', 'success');
        }

        function showBulkReleaseModal() {
            openModal('bulk-release-modal');
        }

        function submitBulkRelease() {
            closeModal('bulk-release-modal');
            showNotification('5 reservations released successfully!', 'success');
        }

        function showAddPutawayRuleModal() {
            openModal('add-putaway-rule-modal');
        }

        function submitPutawayRule() {
            closeModal('add-putaway-rule-modal');
            showNotification('Putaway rule created successfully!', 'success');
        }

        function showColumnSelectorModal() {
            openModal('column-selector-modal');
        }

        function applyColumnSettings() {
            closeModal('column-selector-modal');
            showNotification('Column settings applied!', 'success');
        }

        function showCreatePOModal() {
            openModal('create-po-modal');
        }

        function submitPurchaseOrder() {
            closeModal('create-po-modal');
            showNotification('Purchase Order PO-2024-0893 created successfully!', 'success');
        }

        // Auto-refresh dashboard every 30 seconds (optional)
        setInterval(updateDashboardMetrics, 30000);

        // Sample notification handler
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-emerald-500' : 
                type === 'error' ? 'bg-red-500' : 
                type === 'warning' ? 'bg-orange-500' : 
                'bg-blue-500'
            } text-white`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Sample chart data (for future chart integration)
        const stockLevelData = {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Stock Value',
                data: [1100000, 1150000, 1080000, 1200000, 1245000, 1245890]
            }]
        };

        // Export functions for external use
        window.inventoryApp = {
            navigateTo,
            toggleSidebar,
            showNotification,
            updateDashboardMetrics
        };

        // Dark Mode Toggle
        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');
            
            if (isDark) {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
                updateDarkModeIcon('dark_mode');
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
                updateDarkModeIcon('light_mode');
            }
        }

        function updateDarkModeIcon(icon) {
            const toggleBtn = document.getElementById('dark-mode-toggle');
            if (toggleBtn) {
                const iconElement = toggleBtn.querySelector('.material-symbols-outlined');
                if (iconElement) {
                    iconElement.textContent = icon;
                }
            }
        }

        // Initialize dark mode on page load
        function initDarkMode() {
            const savedTheme = localStorage.getItem('theme');
            
            // Only enable dark mode if user explicitly chose it
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
                updateDarkModeIcon('light_mode');
            } else {
                // Default to light mode
                document.documentElement.classList.remove('dark');
                updateDarkModeIcon('dark_mode');
            }
        }

        // Export functionality
        function exportData() {
            document.getElementById('export-modal-title').textContent = 'Export Data';
            openModal('export-modal');
        }

        // Column selector
        function toggleColumnSelector() {
            showColumnSelectorModal();
        }

        // Call on page load
        initDarkMode();

    </script>
</body>
</html>